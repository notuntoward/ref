{"path":"lit/lit_sources/papers_to_add/Nust20dockerDS10rules.pdf","text":"EDITORIAL TensimplerulesforwritingDockerfilesforreproducibledatascience DanielNu¨st ID 1*,VanessaSochat ID 2,BenMarwick ID 3,StephenJ.Eglen ID 4,TimHead 5,TonyHirst ID 6,BenjaminD.Evans 7 1InstituteforGeoinformatics,UniversityofMu¨nster,Mu¨nster,Germany,2StanfordResearchComputingCenter,StanfordUniversity,Stanford,California,UnitedStatesofAmerica,3DepartmentofAnthropology,UniversityofWashington,Seattle,Washington,UnitedStatesofAmerica,4DepartmentofAppliedMathematicsandTheoreticalPhysics,UniversityofCambridge,Cambridge,Cambridgeshire,GreatBritain,5WildTreeTech,Zurich,Switzerland,6DepartmentofComputingandCommunications,TheOpenUniversity,GreatBritain,7SchoolofPsychologicalScience,UniversityofBristol,Bristol,GreatBritain*daniel.nuest@uni-muenster.de Abstract Computationalsciencehasbeengreatlyimprovedbytheuseofcontainersforpackagingsoftwareanddatadependencies.Inascholarlycontext,themaindriversforusingthesecontainersaretransparencyandsupportofreproducibility;inturn,aworkflow’sreproducibil-itycanbegreatlyaffectedbythechoicesthataremadewithrespecttobuildingcontainers.Inmanycases,thebuildprocessforthecontainer’simageiscreatedfrominstructionspro-videdinaDockerfileformat.Insupportofthisapproach,wepresentasetofrulestohelpresearcherswriteunderstandableDockerfilesfortypicaldatascienceworkflows.Byfol-lowingtherulesinthisarticle,researcherscancreatecontainerssuitableforsharingwithfellowscientists,forincludinginscholarlycommunicationsuchaseducationorscientificpapers,andforeffectiveandsustainablepersonalworkflows. Authorsummary Computersandalgorithmsareubiquitousinresearch.Therefore,definingthecomputingenvironment,i.e.,thebodyofallsoftwareuseddirectlyorindirectlybyaresearcher,isimportant,becauseitallowsotherresearcherstorecreatetheenvironmenttounderstand,inspect,andreproduceananalysis.Ahelpfulabstractionforcapturingthecomputingenvironmentisacontainer,wherebyacontaineriscreatedfromasetofinstructionsinarecipe.Forthemostcommoncontainerisationsoftware,Docker,thisrecipeiscalledaDockerfile.Webelievethatinascientificcontext,researchersshouldfollowspecificpracticesforwritingaDockerfile.Thesepracticesmightbesomewhatdifferentfromthepracticesofgenericsoftwaredevelopersinthatresearchersoftenneedtofocusontrans-parencyandunderstandabilityratherthanperformanceconsiderations.Therulespre-sentedhereareintendedtohelpresearchers,especiallynewcomerstocontainerisation,leveragecontainersforopenandeffectivescholarlycommunicationandcollaborationwhileavoidingthepitfallsthatareespeciallyirksomeinaresearchlifecycle.The PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 1/24 a1111111111a1111111111a1111111111a1111111111a1111111111 OPENACCESSCitation:Nu¨stD,SochatV,MarwickB,EglenSJ,HeadT,HirstT,etal.(2020)TensimplerulesforwritingDockerfilesforreproducibledatascience.PLoSComputBiol16(11):e1008316.https://doi.org/10.1371/journal.pcbi.1008316Editor:ScottMarkel,DassaultSystemesBIOVIA,UNITEDSTATESPublished:November10,2020Copyright:©2020Nu¨stetal.ThisisanopenaccessarticledistributedunderthetermsoftheCreativeCommonsAttributionLicense,whichpermitsunrestricteduse,distribution,andreproductioninanymedium,providedtheoriginalauthorandsourcearecredited.Funding:Thefundershadnoroleinstudydesign,datacollectionandanalysis,decisiontopublish,orpreparationofthemanuscript.DNissupportedbytheprojectOpeningReproducibleResearchII(https://o2r.info/;https://www.uni-muenster.de/forschungaz/project/12343)fundedbytheGermanResearchFoundation(DFG)underprojectnumberPE1632/17-1.DNandSJEaresupportedbyaMozillaminisciencegrant.Thefundershadnoroleinstudydesign,datacollectionandanalysis,decisiontopublish,orpreparationofthemanuscript.Competinginterests:Theauthorshavedeclaredthatnocompetinginterestsexist. recommendationscoveradeliberateapproachtoDockerfilecreation,formattingandstyle,documentation,andhabitsforusingcontainers. Introduction Computinginfrastructurehasadvancedtothepointwherenotonlycanwesharedataunder-lyingresearcharticles,butwecanalsosharethecodethatprocessesthesedata.ThesharingofcodefilesisenabledbycollaborationplatformssuchasGitHuborGitLabandisbecominganincreasinglycommonpractice.Thesharingofthecomputingenvironmentisenabledbycon-tainerisation,whichallowsfordocumentingandsharingentireworkflowsinacomprehensiveway.Importantly,thissharingofcomputationalassetsisparamountforincreasingtherepro-ducibilityofcomputationalresearch.Whilepapersbasedonthetraditionaljournalarticlefor-matcanshareextensivedetailsabouttheresearch,computationalresearchisoftenfartoocomplicatedtobeeffectivelydisseminatedinthisformat[1].Approachessuchascontainerisa-tionareneededtosupportcomputationalresearch,orwhenanalysingorvisualisingdata,becauseapaper’sactualcontributiontoknowledgeincludesthefullcomputingenvironmentthatproducedaresult[2].Containerisationhelpsprovideinstructionsforpackagingthebuildingblocksofcomputer-basedresearch(i.e.,code,data,documentation,andthecomputingenvironment).Specifically,containersarebuiltfromplaintextfilesthatrepresentahuman-andmachine-readablerecipeforcreatingthecomputingenvironmentandinteractingwithdata.Byprovidingthisrecipe,authorsofscientificarticlesgreatlyimprovetheirwork’slevelofdocumentation,transparency,andreusability.Thisisanimportantpartofcommonpracticeforscientificcomputing[3,4].Anoverallgoalofthesepracticesistoensurethatboththeauthorandothersareabletorepro-duceandextendananalysisworkflow.Thecontainersbuiltfromtheserecipesareportableencapsulatedsnapshotsofaspecificcomputingenvironmentthatarebothmorelightweightandtransparentthanvirtualmachines.Suchcontainershavebeendemonstratedforcapturingscientificnotebooks[5]andreproducibleworkflows[6].Whileseveraltutorialsexistonhowtousecontainersforreproducibleresearch([7–11]andGrueningandcolleagues[12]giveveryhelpfulrecommendationsforpackagingreusablesoft-wareinacontainer),thereisnodetailedmanualforhowtowritetheactualinstructionstocre-atethecontainersforcomputationalresearchbesidesgenericbestpracticeguides[13,14].Here,weintroduceasetofrecommendationsforproducingcontainerconfigurationsinthecontextofdatascienceworkflowsusingthepopularDockerfileformat,summarisedinFig1. Prerequisitesandscope Tostartwith,weassumetheexistenceofascriptedscientificworkflow,i.e.,youcan,atleastatacertainpointintime,executethefullprocesswithafixedsetofcommands,forexample,makeprepare_datafollowedbyRscriptanalysis.Roronlypython3my-workflow.py.Tomaximisereach,weassumethatcontainers,whichyoueventuallysharewithothers,canonlyrunopen-sourcesoftware;toolslikeMathematicaandMatlabareoutofscopeforthisexample.Aworkflowthatdoesnotsupportscriptedexecutionisalsooutofscopeforreproducibleresearch,asitdoesnotfitwellwithcontainerisation.Furthermore,workflowsinteractingwithmanypetabytesofdataandexecutedinhigh-performancecomput-ing(HPC)infrastructuresareoutofscope.UsingsuchHPCjobmanagersorcloudinfrastruc-tureswouldrequireacollectionof“TenSimpleRules”articlesintheirownright.FortheHPCusecase,weencouragethereadertolookatSingularity[15].Forthisarticle,wefocusonwork-flowsthattypicallyrunonsinglemachine,e.g.,aresearcher’sownlaptopcomputeroravirtual PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 2/24 Fig1.Summaryofthe10simplerulesforwritingDockerfilesforreproducibledatascience.https://doi.org/10.1371/journal.pcbi.1008316.g001 PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 3/24 server.Thereadermightscopethedatarequirementtounderaterabyte,andcomputerequire-menttoamachinewith16coresrunningovertheweekend.Althoughitisoutsidethescopeofthisarticle,wepointreaderstodocker-compose[16]inthecasewhereonemightneedcontainerorchestrationformultipleapplications,e.g.,webservers,databases,andworkercontainers.Adocker-compose.ymlconfigurationfileallowsfordefiningmounts,environmentvariables,andexposedportsandhelpsusersstickto“onepurposepercontainer”,whichoftenmeansoneprocessrunninginthecontainer,andtocombineexistingstablebuildingblocksinsteadofbespokemassivecontainersforspecificpurposes.Because“thenumberofuniqueresearchenvironmentsapproximatesthenumberofresearchers”[17],stickingtoconventionshelpseveryresearchertounderstand,modify,andeventuallywritecontainerrecipessuitablefortheirneeds.Eveniftheyarenotsurehowtheunderlyingtechnologyactuallyworks,researchersshouldleveragecontainerisationfollowinggoodpractices.Thepracticesthataretobediscussedinthisarticlearestronglyrelatedtosoft-wareengineeringingeneralandresearchsoftwareengineeringinparticular,whichisconcernedwithquality,training,andrecognitionofsoftwareinscience[18].Weencourageyoutoreachouttoyourlocalornationalcommunityofresearchsoftwareengineers(seelistoforganisations)ifyouhavequestionsonsoftwaredevelopmentinresearchthatgobeyondtherulesofthiswork.Whilemanydifferentcontainertechnologiesexist,thisarticlefocusesonDocker[19].Dockerisahighlysuitabletoolforreproducibleresearch(e.g.,[20]),andourobservationsindi-cateitisthemostwidelyusedcontainertechnologyinacademicdatascience.ThegoalofthisarticleistoguideyouasyouwriteaDockerfile,thefileformatusedtocreateDockercon-tainerimages.TheruleswillhelpyouensurethattheDockerfileallowsforinteractivedevelopmentaswellasforreachingthehighergoalsofreproducibilityandpreservationofknowledge.Suchpracticesdonotgenerallyappearingenericcontainerisationtutorials,andtheyarerarelyfoundintheDockerfilespublishedaspartofsoftwareprojectsthatareoftenusedastemplatesbynovices.Thedifferencesbetweenahelpful,stableDockerfileandonethatismisleading,pronetofailure,andfullofpotentialobstaclesarenotobvious,especiallyforresearcherswhodonothaveextensivesoftwaredevelopmentexperienceorformaltraining.Bycommittingtothisarticle’srules,onecanensurethattheirworkflowsarereproducibleandreusable,thatcomputingenvironmentsareunderstandablebyothers,andthatresearchershavetheopportunitytocollaborateeffectively.Applyingtheserulesshouldnotbetriggeredbythepublicationofafinishedprojectbutshouldinsteadbeweavedintoday-to-dayhabits(cf.thoughtsonopennessasanafterthoughtby[21]andoncomputationalreproducibilityby[2]). DockerandDockerfiles Docker[19]isacontainertechnologythathasbeenwidelyadoptedandissupportedonmanyplatforms,andithasbecomehighlyusefulforresearch.Containersaredistinctfromvirtualmachinesorhypervisors,astheydonotemulatehardwareoroperatingsystemkernelsandhencedonotrequirethesamesystemresources.Severalsolutionsforfacilitatingreproducibleresearcharebuiltontopofcontainers[17,22–25],butthesesolutionsintentionallyhidemostofthecomplexityfromtheresearcher.TocreateDockercontainersforspecificworkflows,wewritetextfilesthatfollowaparticu-larformatcalledDockerfile[26].ADockerfileisamachine-andhuman-readablerecipeforbuildingimages.Here,imagesareexecutablefilesthatincludetheapplication,e.g.,theprogramminglanguageinterpreterneededtorunaworkflow,andthesystemlibrariesrequiredbyanapplicationtorun.Thus,aDockerfileconsistsofasequenceofinstructionstocopyfilesandinstallsoftware.Eachinstructionaddsalayertotheimage,whichcanbe PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 4/24 cachedacrossimagebuildsforminimisingbuildanddownloadtimes.Onceanimageisbuiltordownloaded,itisthenlaunchedasarunninginstanceknownasacontainer.Theimageshaveamainexecutableexposedasan“entrypoint”thatisstartedwhentheyarerunasstatefulcontainers.Further,containerscanbemodified,stopped,restarted,andpurged.AvisualanalogyforbuildingandrunningacontainerisprovidedinFig2.Akintocompil-ingsourcecodeforaprogramminglanguage,creatingacontaineralsostartswithaplaintextfile(Dockerfile),whichprovidesinstructionsforbuildinganimage.Similartousingacompiledbinaryfiletolaunchaprogram,theimageisthenruntocreateacontainerinstance.SeeListing1forafullDockerfile,whichwewillrefertothroughoutthisarticle.WhileDockerwastheoriginaltechnologytosupporttheDockerfileformat,othercon-tainertechnologiesnowoffersupportforit,includingpodman/buildahsupportedbyRedHat,kaniko,img,andbuildkit.ThecontainersoftwareSingularity[15],whichisoptimisedforsci-entificcomputingandthesecurityneedsofHPCenvironments,usesitsownformat,calledtheSingularityrecipe,butitcanalsoimportandrunDockerimages.Theruleshereare,tosomeextent,transferabletoSingularityrecipes.Whilesomemayargueagainstpublishingreproducibly,e.g.,duetoalackoftimeandincentives,areluctancetoshare(cf.[28]),andthesubstantialtechnicalchallengesinvolvedinmaintainingsoftwareanddocumentation,itshouldbecomeincreasinglystraightforwardfortheaverageresearchertoprovidecomputationalenvironmentsupportfortheirpublicationintheformofaDockerfile,apre-builtDockerimage,oranothertypeofcontainer.IfaresearchercanfindandcreatecontainersorwriteaDockerfiletoaddresstheirmostcom-monusecases,then,arguably,sharingitwouldnotmakeforextraworkafterthisinitialsetup Fig2.TheworkflowtocreateDockercontainersbyanalogy.ContainersbeginwithaDockerfile,arecipeforbuildingthecomputationalenvironment(analogoustosourcecodeinacompiledprogramminglanguage).Thisisusedtobuildanimagewiththedockerbuildcommand,analogoustocompilingthesourcecodeintoanexecutable(binary)file.Finally,theimageisusedtolaunchoneormorecontainerswiththedockerruncommand(analogoustorunninganinstanceofthecompiledbinaryasaprocess).https://doi.org/10.1371/journal.pcbi.1008316.g002 PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 5/24 (cf.README.mdof[29]).Infact,theDockerfileitselfrepresentspowerfuldocumentationtoshowfromwheredataandcodewerederived,i.e.,downloadedorinstalled,and,conse-quently,whereathirdpartymightobtainthedataagain.Listing1.Dockerfilefullexample.TheDockerfileandallotherfilesarepublishedinthefull-demoexample,seeSectionExamples;theimagedocker.io/nuest/datascidockerfiles:1.0.0isaready-to-usebuildofthisexample. FROMdocker.io/rocker/verse:3.6.2###INSTALLBASESOFTWARE###################################################InstallJava,neededforpackagerJavaRUNapt-getupdate&&\\apt-getinstall-ydefault-jdk&&\\rm-rf/var/lib/apt/lists/ � ###INSTALLWORKFLOWTOOLS##################################################InstallsystemdependenciesforRpackagesRUNapt-getupdate&&\\apt-getinstall-y\\#neededforRNetCDF,foundviahttps://sysreqs.r-hub.io/pkg/RNetCDFlibnetcdf-devlibudunits2-dev\\#neededforgit2r:libgit2-dev#InstallRpackages,basedonhttps://github.com/rocker-org/geospatial/blob/master/DockerfileRUNinstall2.r--error\\RColorBrewer\\RNetCDF\\git2r\\rJavaWORKDIR/tmp#InstallPythontoolsandtheirsystemdependenciesRUNapt-getupdate&&\\apt-getinstall-ypython-pip&&\\rm-rf/var/lib/apt/lists/ � COPYrequirements.txtrequirements.txtRUNpipinstall-rrequirements.txt#DownloadsuperduperimageconverterRUNwgethttps://downloads.apache.org/pdfbox/2.0.19/pdfbox-app-2.0.19.jar###ADDMYOWNSCRIPTS######################################################AddworkflowscriptsWORKDIR/workCOPYmyscript.shmyscript.shCOPYanalysis.pyanalysis.pyCOPYplots.Rplots.R#Configureworkflow PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 6/24 ENVDATA_SIZE42#Uncommentthefollowinglinestoexecutepreprocessingtasksduringbuild#RUNpythonanalysis.py#RUNRscriptplots.R###WORKFLOWCONTAINERFEATURE##############################################CMDfrombaseimageusedfordevelopment,uncommentthefollowinglinesto#havea\"runworkflowonly\"image#CMD[\"./myscript.sh\"]###Usageinstructions######################################################Buildtheimageswith#>dockerbuild--tagdatascidockerfiles:1.0.0.#RuntheimageinteractivelywithRStudio,openitonhttp://localhost/#>dockerrun-it-p80:8787-ePASSWORD=ten--volume$(pwd)/input:/inputdatascidockerfiles:1.0.0#Runtheworkflow:#>dockerrun-it--namegwfdatascidockerfiles:1.0.0/work/myscript.sh#Extractthedata:#>dockercpgwf:/output/./outputData#Extractthefigures:#>dockercpgwf:/work/figures/./figures Rule1:Useavailabletools Rule1couldinformallybedescribedas“Don’tbothertowriteaDockerfile!”.WritingaDockerfilefromscratchcanbedifficult,andevenexpertssometimestakeshortcuts.AgoodinitialstrategyistolookattoolsthatcanhelpgenerateaDockerfileforyou.Thedevelopersofsuchtoolshavelikelythoughtaboutandimplementedgoodpractices,andtheymayevenhaveincorporatednewerpracticeswhenreappliedatalaterpointintime.Therefore,themostimportantruleistoapplyamultistepprocesstocreatingaDockerfileforyourspecificusecase.First,youwanttodeterminewhetherthereisanexistingimagethatyoucanuse;ifso,youwanttobeabletouseitandaddtheinstructionsfordoingsotoyourworkflowdocumenta-tion.Asanexample,youmightbedoingsomekindofinteractivedevelopment.Forinteractivedevelopmentenvironmentssuchasnotebooksanddevelopmentserversordatabases,youcanreadilyfindimagesthatcomeinstalledwithallthesoftwarethatyouneed.Youcanlookforinformationaboutimagesin(a)thedocumentationofthesoftwareyouintendtouse;(b)theDockerimageregistryDockerHub;or(c)thesourcecodeprojectsofthesoftwarebeingused,asmanydeveloperstodayrelyoncontainersfordevelopment,testing,andteaching.Second,ifthereisnosuitablepreexistingimageforyourneeds,youmightnextlooktowell-maintainedtoolstohelpwithDockerfilegeneration.ThesetoolscanaddrequiredsoftwarepackagestoanexistingimagewithoutyouhavingtomanuallywriteaDockerfileatall.“Well-maintained”notonlyreferstothetool’sownstabilityandusabilitybutalsoindi-catesthatsuitablebaseimagesareused,typicallyfromtheofficialDockerlibrary[30],toensurethatthecontainerhasthemostrecentsecurityfixesfortheoperatingsysteminques-tion.Seethenextsection“Toolsforcontainergeneration”fordetails.Third,ifthesetoolsdonotmeetyourneeds,youmaywanttowriteyourownDocker-file.Inthiscase,followtheremainingrules. PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 7/24 Toolsforcontainergeneration repo2docker[25]isatoolmaintainedbyProjectJupyterthatcanhelptotransformasourcecodeordatarepository,e.g.,GitHub,GitLab,orZenodo,intoacontainer.Thetoolreliesoncommonconfigurationfilesfordefiningsoftwaredependenciesandversions,anditsupportsafewmorespecialfiles;seethesupportedconfigurationfiles.Asanexample,wemightinstalljupyter-repo2dockerandthenrunitagainstarepositorywitharequirements.txtfile,anindicationofbeingaPythonworkflowwithdependenciesonthePythonPackageIndex(PyPI),usingthefollowingcommand: jupyter-repo2dockerhttps://github.com/norvig/pytudes Theresultingcontainerimageinstallsthedependencieslistedintherequirementsfile,anditprovidesanentrypointtorunanotebookservertointeractwithanyexistingworkflowsintherepository.Sincerepo2dockerisusedwithinMyBinder.org,ifyoumakesureyourworkflowis“Binder-ready”,youandotherscanalsoobtainanonlineworkspacewithasingleclick.However,oneprecautiontoconsideristhatthedefaultcommandabovewillcreateahomeforthecurrentuser,meaningthatthecontaineritselfwouldnotbeidealtoshare;instead,anyresearcherinterestedininteractingwiththecodeinsideshouldrunrepo2-dockerthemselvesandcreatetheirowncontainer.Becauserepo2dockerisdeterministic,theenvironmentsarethesame(seeRule5forensuringthesamesoftwareversions).AdditionaltoolstoassistwithwritingDockerfilesincludecontainerit[31]anddockta[32].containeritautomatesthegenerationofastand-aloneDockerfileforworkflowsinR.ThisutilitycanprovideastartingpointforusersunfamiliarwithwritingaDockerfile,oritcan,togetherwithotherRpackages,provideafullimagecreationandexecutionprocesswithouthavingtoleaveanRsession.docktasupportsmultipleprogram-minglanguagesandconfigurationsfiles,justasrepo2dockerdoes,butitattemptstocreateareadableDockerfilecompatiblewithplainDockerandtoimproveuserexperiencebycleverlyadjustinginstructionstoreducebuildtime.Whileperhapsmoreusefulforfine-tun-ing,linterscanalsobehelpfulwhenwritingDockerfiles,bycatchingerrorsornon-recom-mendedformulations(seeRule10). Toolsfortemplating Itislikelythatovertimeyouwillworkonprojectsanddevelopimagesthataresimilarinnaturetoeachother.Toavoidconstantlyrepeatingyourself,youshouldconsideradoptingastandardworkflowthatwillgiveyouaquickstartforanewproject.Asanexample,cookiecuttertemplates[33]orcommunitytemplates(e.g.,[34])canprovidetherequiredstructureandfiles(e.g.,fordocumentation,continuousintegration(CI),andlicenses),forgettingstarted.Ifyoudecidetobuildyourowncookiecuttertemplate,considercollaborat-ingwithyourcommunityduringdevelopmentofthestandardtoensureitwillbeusefultoothers.PartofyourprojecttemplateshouldbeaprotocolforpublishingtheDockerfileandevenexportingtheimagetoasuitablelocation,e.g.,acontainerregistryordatarepository,takingintoconsiderationhowyourworkflowcanreceiveaDOIforcitation.Atemplateispreferabletoyourownsetofbaseimagesbecauseofthemaintenanceeffortsthebaseimagesrequire.Therefore,insteadofbuildingyourownindependentsolution,considercontributingtoexistingsuitesofimages(seeRule2)andimprovingtheseforyourneeds.Foranytoolthatyouuse,besuretolookatdocumentationforusageandconfigurationoptions,andlookforoptionstoaddmetadata(e.g.,labels;seeRule4). PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 8/24 Rule2:Builduponexistingimages Manypre-builtcommunityanddevelopercontributedDockerimagesarepublicallyavailableforanyonetopull,runandextend,withouthavingtoreplicatetheimageconstructionprocess.However,agoodunderstandingofhowbaseimagesandimagetagsworkiscrucial,astheimageandtagthatyouchoosehasimportantimplicationsforyourderivedimagesandcon-tainers.ItisgoodpracticetousebaseimagesthataremaintainedbytheDockerlibrary,socalled“officialimages”[35],whichbenefitfromareviewforbestpracticesandvulnerabilityscanning[13].Youcanidentifytheseimagesbythemissinguserportionoftheimagename,whichcomesbeforethe/,e.g.,r-baseorpython.However,theseimagesonlyprovidebasicprogramminglanguagesorverywidelyusedsoftware,soyouwilllikelyuseimagesmain-tainedbyorganisationsorfellowresearchers.Whilesomeorganisationscanbetrustedtoupdateimageswithsecurityfixes(seelistbelow),formostindividualaccountsthatprovideready-to-useimages,itislikelythatthesewillnotbeupdatedregularly.Further,it’sevenpossiblethatanimageoraDockerfilecoulddis-appear,oranimagecouldbepublishedwithmaliciousintent(thoughwehavenotheardofanysuchcaseinacademia).Therefore,forsecurity,transparency,andreproducibility,youshouldonlyuseimageswhereyouhaveaccesstotheDockerfile.Incasearepositorygoesaway,wesuggestthatyousaveacopyoftheDockerfilewithinyourproject(seeRule7).Thefollowinglistisaselectionofcommunitiesthatproducewidelyused,regularlyupdatedimages,includingready-to-useimageswithpreinstalledcollectionsofsoftwareconfiguredtoworkoutofthebox.Dotakeadvantageofsuchimages,especiallyforcomplexsoftwareenvi-ronments,e.g.,machinelearningtoolstacks,oraspecificBLASlibrary.•RockerforRandRStudioimages[20]•BioconductorDockerimagesforbioinformaticswithR•NeuroDebianimagesforneuroscience[36]•JupyterDockerStacksforNotebook-basedcomputing•TavernaServerforrunningTavernaworkflowsForexample,hereishowwewoulduseabaseimageverse,whichprovidesthepopularTidyversesuiteofpackages[37],withRversion3.5.2fromtherockerorganisationonDockerHub(docker.io,whichisthedefaultandcanbeomitted).FROMdocker.io/rocker/verse:3.6.2 Useversion-specifictags Imageshavetagsassociatedwiththem,andthesetagshavespecificmeanings,e.g.,asemanticversionindicatorsuchas3.7ordev,orvariantslikeslimthatattempttoreduceimagesize.Tagsaredefinedatthetimeofimagebuildandappearintheimagenameafterthe:whenyouuseanimage,e.g.,python:3.7.Byconventionamissingtagisassumedtobethewordlatest,whichgivesyouthelatestupdatesbutisalsoamovingtargetforyourcomputingenvironmentthatcanbreakyourworkflow.Notethataversiontagmeansthatthetaggedsoft-wareisfrozen,butitdoesnotmeanthattheimagewillnotchange,asbackwardscompatiblefixes(cf.semanticversioning,[38]),e.g.,version1.2.3thatfixesasecurityprobleminver-sion1.2.2orupdatestoanunderlyingsystemlibrary,wouldbepublishedtotheparenttag1.2. PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 9/24 Fordatascienceworkflows,youshouldalwaysrelyonversion-specificimagetags,bothforbaseimagesthatyouuseandforimagesthatyoubuildyourselfandthenrun(seeusageinstructionsinListing1foranexampleofthe--tagparameterofdockerbuild).Whenkeepingdifferentversions(tags)available,itisgoodpracticetopublishanimageinanimageregistry.Fordetails,wereferyoutothedocumentationonautomatedbuilds,seeDockerHubBuildsorGitLab’sContainerRegistryaswellasCIservicessuchasGitHubactions,orCircleCIthatcanhelpyougetstarted.Donotdockerpushalocallybuiltimage,becausethatcounteractstheconsiderationsoutlinedabove.Ifapre-builtimageisprovidedinapublicimageregistry,donotforgettodirecttheusertoitinyourdocumentation,e.g.,intheREADMEfileorinanarticle. Rule3:Formatforclarity First,itisgoodpracticetothinkoftheDockerfileasahuman-andmachine-readablefile.Thismeansthatyoushoulduseindentation,newlines,andcommentstomakeyourDock-erfilewelldocumentedandreadable.Specifically,carefullyindentcommandsandtheirargumentstomakeclearwhatbelongstogether,especiallywhenconnectingmultiplecom-mandsinaRUNinstructionwith&&.Use\\attheendofalinetobreakasinglecommandintomultiplelines.Thiswillensurethatnosinglelinegetstoolongtocomfortablyread.Contentspreadacrossmoreandshorterlinesalsoimprovesreadabilityofchangesinversioncontrolsystems.Further,uselongversionsofparametersforreadability(e.g.,--inputinsteadof-i).Whenyouneedtochangeadirectory,useWORKDIR,becauseitnotonlycreatesthedirectoryifitdoesnotexistbutalsopersiststhechangeacrossmultipleRUNinstructions.Second,clarityofthestepswithinaDockerfileismostimportant,andifitrequiresverbos-ityoraddstothefinalimagesize,thatisanacceptabletrade-off.Forexample,ifyourcontainerusesascripttorunacomplexinstallroutine,insteadofremovingitfromthecontaineruponcompletion(apracticecommonlyseeninproductionDockerfilesaimingatsmallimagesizes,cf.[12]),youshouldkeepthescriptinthecontainerforafutureusertoinspect;thescriptsizeisnegligiblecomparedtotheimagesize.Onecommonpatternyouwillencounterisasin-gleandverylengthyRUNinstructionchainingmultiplecommandstoinstallsoftwareandcleanupafterwards.Forexample(a)theinstructionupdatesthedatabaseofavailablepackages,installsapieceofsoftwarefromapackagerepository,andpurgesthecacheofthepackagemanager;or(b)theinstructiondownloadsasoftware’ssourcearchive,unpacksit,buildsandinstallsthesoftware,andthenremovesthedownloadedarchiveandalltemporaryfiles.Althoughthispatterncreatesinstructionsthatmaybehardtoread,itisverycommonandcanevenincreaseclaritywithintheimagefilesystembecauseinstallationandbuildartifactsaregone.Ingeneral,ifyourcontainerismostlysoftwaredependencies,youshouldnotneedtoworryaboutimagesizebecause(a)yourdataislikelytohavemuchlargerstoragerequire-ments;and(b)transparencyandinspectabilityoutweighstorageconcernsindatascience.Ifyoureallyneedtoreducethesize,youmaylookintousingmultiplecontainers(cf.[12])ormultistagebuilds[39].Dependingontheprogramminglanguageused,yourprojectmayalreadycontainfilestomanagedependencies,andyoumayuseapackagemanagertocontrolthisaspectofthecom-putingenvironment.Thisisaverygoodpracticeandhelpful,thoughyoushouldconsidertheexternalisationofcontenttooutsideoftheDockerfile(seeRule7).Often,asinglelongDockerfilewithsectionsandhelpfulcommentscanbemoreunderstandablethanacollec-tionofseparatefiles.Generally,aimtodesigntheRUNinstructionssothateachperformsonescopedaction,e.g.,download,compile,andinstallonetool.ThismakesthelinesofyourDockerfileawell- PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 10/24 documentedrecipefortheuseraswellasamachine.Eachinstructionwillresultinanewlayer,andreasonablygroupedchangesincreasereadabilityoftheDockerfileandfacilitateinspec-tionoftheimage,e.g.,withtoolslikedive[40].ConvolutedRUNinstructionscanbeacceptabletoreducethenumberoflayers,butcarefullayoutandconsistentformattingshouldbeapplied.AlthoughyouwillfindDockerfilesthatusebuild-timevariablestodynamicallychangeparametersatbuildtime,suchacustomisationoptionreducesclarityfordatascienceworkflows. Rule4:DocumentwithintheDockerfileExplainincomments AsyouarewritingtheDockerfile,bemindfulofhowotherpeople(includingfutureyou!)willreaditandwhy.Areyourchoicesandcommandsbeingexecutedclearly,orarefurthercommentswarranted?ToassistothersinmakingsenseofyourDockerfile,youcanaddcommentsthatincludelinkstoonlineforums,coderepositoryissues,orversioncontrolcom-mitmessagestogivecontextforyourspecificdecisions.Forexample,thisDockerfilebyKaggledoesagoodjobofexplainingthereasoningbehindthecontainedinstructions.IfyoucopyinstructionsfromanotherDockerfile,acknowledgethesourceinacomment.Also,itcanbehelpfultoincludecommentsaboutcommandsthatdidnotworksoyoudonotrepeatpastmistakes.Further,ifyoufindthatyouneedtorememberanundocumentedstep,thatisanindicationthisstepshouldbedocumentedintheDockerfile.Allinstructionscanbegroupedstartingwithashortcomment,whichalsomakesiteasiertospotchangesifyourDockerfileismanagedinsomeversioncontrolsystem(seeRule6).Listing2showsaselectionoftypicalkindsofcommentsthatareusefultoincludeinaDockerfile.Listing2.PartialDockerfilewithexamplesforhelpfulcomments. ...#apt-getinstallspecificversion,use‘apt-cachemadison<pkg>‘#toseeavailableversionsRUNapt-getinstallpython3-pandas=0.23.3+dfsg-4ubuntu1#installrequiredRpackages;beforelogtheusedrepository#forbetterprovenanceinthebuildlogRUNR-e‘getOption(\"repos\")’&&\\install2.r\\fortunes\\here#thislibrarymustbeinstalledfromsourcetogetversionnewer#thaninaptsourcesRUNgitclonehttp://url.of/repo&&\\cdrepo&&\\makebuild&&makeinstall Addmetadataaslabels Dockerautomaticallycapturesusefulinformationintheimagemetadata,suchastheversionofDockerusedforbuildingtheimage.TheLABELinstructioncanaddcustommetadatatoimages.Youcanviewalllabelsandotherimagemetadatawithdockerinspectcommand.Listing3showsthemostrelevantonesfordatascienceworkflows.Labelsserveasstructuredmetadatathatcanbeleveragedbyservices,e.g.,https://microbadger.com/labels.Forexample,softwareversionsofcontainerisedapplications(cf.[12]),licenses,andmaintainercontact PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 11/24 informationarecommonlyseen,andtheyareveryusefulifaDockerfileisdiscoveredoutofcontext.Regardinglicensinginformation,thisshouldincludethelicenseofyourowncodeandcouldpointtoaLICENSEfilewithintheimage(cf.[12]).Whileyoucanaddarbitrarilycomplexinformationwithlabels,fordatasciencescenariostheuser-facingdocumentationismuchmoreimportant.RelevantmetadatathatmightbeutilisedwithfuturetoolsincludeglobalidentifierssuchasORCIDidentifiers,DOIsoftheresearchcompendium(cf.https://research-compendium.science),e.g.,reservedonZenodo,orafundingagency’sgrantnumber.YoucanusetheARGinstructiontopassvariablesatbuildtime,forexample,topassvaluesintolabels,suchasthecurrentdateorversioncontrolrevision.However,ascriptorMakefilemightberequiredsothatyoudonotforgetthatyousettheargument,orhowyousetit(seeRule10).TheOpenContainerInitiative(OCI)ImageFormatSpecificationprovidessomecommonlabelkeys(seethe“Annotations”sectionin[41])tohelpstandardisefieldnamesacrosscon-tainertools,asshownbelow.Somekeysholdspecificcontent,e.g.,org.opencontai-ners.image.documentationisaURLascharacterstringpointingtodocumentationontheimage,andorg.opencontainers.image.licensesistheSPDXlicenseidentifier.Youmayalsocommonlyfindlabelsinthedeprecatedorg.label-schema-specificationformat,e.g.,org.label-schema.description.However,weencouragetheuseoftheOCIschemainallnewandunlabelledprojects.Listing3.PartialDockerfilewithcommonlyusedlabels;notethelinebreakswithinthevalues(usingthe\\character),whichwereaddedtolimitlinelength,arenotprecededbyaspacecharacter,asthisspacewouldappearinthevalue,whereasthelinebreaksbetweenkeysandvaluesareseparatedbywhitespaceforreadability.... LABELmaintainer=\"D.Nüst<daniel.nuest@uni-muenster.de>\"\\org.opencontainers.image.authors=\"Nüst(daniel.nuest@uni-muenster.de),\\Sochat,Marwick,Eglen,Head,Hirst,andEvans\"\\org.opencontainers.image.url=\"\\https://github.com/nuest/ten-simple-rules-dockerfiles\"org.opencontainers.image.documentation=\"https://nuest.github.io/\\ten-simple-rules-dockerfiles/ten-simple-rules-dockerfiles.pdf\"org.opencontainers.image.version=\"1.0.0\"LABELorg.opencontainers.image.vendor=\"TenSimpleInstitute,UniofRules\"org.opencontainers.image.description=\"Reproducibleworkflowimage\"org.opencontainers.image.licenses=\"Apache-2.0\"LABELedu.science.data.group.project=\"Findoutsomething(Grant#123456)\"edu.science.data.group.name=\"DataScienceLab\"\\author.orcid=\"0000-0002-1825-0097\" Defineversions,parameters,andpathsonce TheENVinstructioninaDockerfileallowsfordefiningenvironmentvariables.Thesevari-ablespersistinsidethecontainerandcanbeuseful,forexample,for(a)settingsoftwareversionsorpathsandreusingthemacrossmultipleinstructionstoavoidmistakes;(b)specifyingmeta-dataintendedtobediscoveredbyinstalledlibrariesorsoftware;or(c)addingbinariestothepath(PATH)orlibrarypath(LD_LIBRARY_PATH).Youshouldbecarefultodistinguishtheseenvironmentvariablesfromthosethatmightvaryandberequiredatruntime.Listing4showssomeexamples.Forruntimeenvironmentvariables,eithertosetanewvariableoroverrideonesetinthecontainer,youcanusethe--envparameterofdockerrun(seeListings4and6). PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 12/24 Listing4.PartialDockerfileshowingusageofenvironmentvariableswiththeENVinstruction. ...#DefinenumberofcoresusedbyPowerfulAlgorithmENVPOWER_ALG_CORES2#InstallUsefulSofttoolinspecificversionfromsourceENVUSEFULSOFT_VERSION=1.0.0\\USEFULSOFT_INSTALLDIR=/workspace/binRUNwgethttp://usesoft.url/useful_software/$USEFULSOFT_VERSION/useful-$USEFULSOFT_VERSION.zip&&\\unzipuseful-$USEFULSOFT_VERSION.zip-duseful-src&&\\cduseful-src&&\\bashinstall.sh--target$USEFULSOFT_INSTALLDIR&&\\cd..&&\\rm-ruseful-srcuseful-$USEFULSOFT_VERSION.zip#PutUsefulSofttoolonthepathforsubsequentinstructionsENVPATH$PATH:$USEFULSOFT_INSTALLDIR###Usageinstructions####[...]#Runtheimage(definingthenumberofcoresused):#>dockerrun--it--envPOWER_ALG_CORES32my_workflow Includeusageinstructions Itisoftenhelpfultoprovideusageinstructions,i.e.,howtodockerbuildanddockerruntheimage,withintheDockerfile,eitheratthetoporbottomwherethereaderislikelytofindthem.Suchdocumentationisespeciallyrelevantifbindmounts,specificnames,orportsareimportantforusingthecontainer;see,forexample,thefinallinesofListing1.Theseinstructionsarenotlimitedtodocker<command>butincludetheusageofbespokescripts,aMakefile,ordocker-compose(seeRule8andRule10).Followingacommoncodingaphorism,wemightsay“ADockerfileyouwrotethreemonthsagomayjustaswellhavebeenwrittenbysomeoneelse.”Thus,usageinstructionshelpothers,becausetheyquicklygetthemrunningyourworkflowandinteractingwiththecontainerintheintendedwaywith-outreadingalloftheinstructions(a“tl;dr”-kindofusage).Usageinstructionsalsoprovideadefactowayoftestingthatyourcontainerworksinawaythatotherscantryout.TheDock-erfilealongsideyourdocumentationstrategyisademonstrationofyourcarefulworkhab-itsandgoodintentionsfortransparencyandcomputationalreproducibility. Rule5:Specifysoftwareversions ThereproducibilityofyourDockerfileheavilydependsonhowwellyoudefinethever-sionsofsoftwaretobeinstalledintheimage.Themorespecificallyyoucandefinethemthebetter,becauseusingthedesiredversionleadstoreproduciblebuilds.Thepracticeofspecify-ingversionsofsoftwareiscalledversionpinning(e.g.,onapt:https://blog.backslasher.net/my-pinning-guidelines.html).Forstableworkflowsinascientificcontext,itisgenerallyadvisedtofreezethecomputingenvironmentexplicitlyandnotrelyonthe“current”or“lat-est”software,whichisamovingtarget. PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 13/24 Systemlibraries Systemlibraryversionscanlargelycomefromthebaseimagetagthatyouchoosetouse,e.g.,ubuntu:18.04,becausetheoperatingsystem’ssoftwarerepositoriesareveryunlikelytointroducebreakingchangesbutwillpredominantlyfixerrorswithnewerversions.However,youcanalsoinstallspecificversionsofsystempackageswiththerespectivepackagemanager.Forexample,youmightwanttodemonstrateabug,preventabuginanupdatedversion,orpinaworkingversionifyoususpectanupdatecouldleadtoaproblem.Generally,systemlibrariesaremorestablethansoftwaremodulessupportinganalysisscripts,butinsomecases,theycanbehighlyrelevanttoyourworkflow.Installingfromsourceisausefulwaytoinstallveryspecificversions,butitcomesatthecostoflongerbuildtimeandmorecomplexinstructions.Herearesomeexamplesofterminalcommandsthatwilllistthecurrentlyinstalledversionsofsoftwareonyoursystem:•Debian/Ubuntu:dpkg--list•Alpine:apk-vvinfo|sort•CentOS:yumlistinstalledorrpm-qaWhenyouinstallseveralsystemlibraries,itisgoodpracticetoaddcommentsaboutwhythedependenciesareneeded(seeListing1).Thisway,ifapieceofsoftwareisremovedfromthecontainer,itwillbeeasiertoremovethesystemdependenciesthatarenolongerneeded,therebyreducingmaintenanceoverhead:youwillnotunnecessarilyfixproblemswithalibrarythatisnolongerneededorincludelong-runninginstallations.AtestprovidedviaaHEALTHCHECK[42]canfurtherensureproperfunctioningofyourcontainer. Versioncontrol Softwarecanoftenbeinstalleddirectlyfromaversioncontrolledrepository(e.g.,GitHub,GitLab,orMercurial).It’srecommendedtocheckoutaspecificversion,tag,orcommittoensurepinningaversionfortherepository.Forexample,hereishowtocloneaspecificreleasetag(v3.6.1)oftheSingularitycontainersoftware: RUNgitclone-bv3.6.1https://github.com/hpcng/singularity Inthecasethatyouwanttocloneandcheckoutaspecificcommit,youcanusethecheckoutcommand. RUNgitclonehttps://github.com/hpcng/singularity&&\\cdsingularity&&\\gitcheckout8a92cf127a49118cab61579bb36b3d51ba5c6434&&\\#installstepsgohere\\ Extensionpackagesandprogramminglanguagemodules Ifyouneedtoinstallpackagesordependenciesforaspecificlanguage,packagemanagersareagoodoption.Packagemanagersgenerallyprovidereliablemirrorsorendpointstodownloadsoftware;manypackagesaretestedbeforerelease,and,mostimportantly,theyprovideaccesstospecificversions.MostpackagemanagershaveacommandlineinterfacethatcanbeusedfromRUNcommandsinyourDockerfile,alongwithvariousflavoursof“freeze”commandsthatcanoutputatextfilelistingallsoftwarepackagesandversions(cf.https://markwoodbridge.com/2017/03/05/jupyter-reproducible-science.htmlcitedby[5]).Thebiggestriskwithusing PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 14/24 packagemanagerswithrespecttoaDockerfileisoutsourcingconfiguration.Asanexample,hereareconfigurationfilessupportedbycommonlyusedlanguagesinscientificprogramming:•Python:requirements.txt(piptool,[43])andenvironment.yml(Conda,[44])•R:DESCRIPTIONfileformat[45]andr(“littleR”,[46])•JavaScript:package.jsonofnpm[47]•Julia:Project.tomlandManifest.toml[48].Insomecases(e.g.,Conda)thepackagemanagerisalsoabletomakedecisionsaboutwhatversionstoinstall,whichislikelytoleadtoanon-reproduciblebuild.Forthisreason,itisnec-essarytopinthedependencyversions.Inthecaseofhavingfewpackages,itmaybesimplesttowritetheinstallstepsandversionsdirectlyintotheDockerfile(alsoforclarity,seeRule3): RUNpipinstall\\geopy==1.20.0\\uszipcode==0.2.2 Alternatively,versionsmaybespecifiedinaseparatedependencyfile(e.g.,require-ments.txtorenvironment.yml)andCOPYiedtotheimageforinstallation: COPYrequirements.txt.RUNpipinstall-rrequirements.txt Thismodularisationmayreducereadability,butprovidesmoreflexibilityinfacilitatingdif-ferentwaysofbuildingareproducibleenvironment,providedthedependencyfileisunderversioncontrolinthesamerepository(seeRule6).YoucanalsousepackagemanagerstoinstallsoftwarefromsourcecodeCOPYiedintotheimage(seeRule7).Finally,youcanusemanypackagemanagerstoinstallsoftwarefromsourceobtainedfromexternalcodemanage-mentrepositories,e.g.,installingatoolfromaspecificversiontagorcommithash.Beawareoftheriskthatsuchinstallationsmaylaterfail,especiallywhentheexternalrepositoriesareoutofyourcontrol.However,theseconcernscanbemitigatedbyrunningtheinstallationcom-mandwiththefullURL(includingthespecificversiontagorcommithash),whichishelpfulintroubleshootingifproblemsarise.Theversionpinningcapabilitiesofthesefileformatsandpackagemanagersaredescribedintheirrespectivedocumentation.Asafinalnoteonsoftwareinstallation,youshouldbeawareoftheUSERinstructioninaDockerfileandhowyourbaseimagemightchangetheuserforparticularinstructions,restrictingwhichcommandscanberunwithinthecontainer.Itiscommontouseimageswiththedefaultuserroot,whichisrequiredforinstallingsystemdependencies.However,youmayencounterbaseimagesrunningasanon-rootuser(e.g.,intheJupyterandRockerimagestacks)inordertoavoidpermissionproblemswhenmountingfilesintothecontainer,especiallyfor“output”files(seeRule7).Werecommendensuringthattheimageworkswith-outspecifyinganyusers,and,ifyourimagedeviatesfromthat,wesuggestyoudocumentitprecisely. Rule6:Useversioncontrol Asplaintextfiles,Dockerfilesarewellsuitedforusewithversioncontrolsystems.Includ-ingaDockerfilealongsideyourcodeanddataisaneffectivewaytoconsistentlybuildyour PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 15/24 software,toshowvisitorstotherepositoryhowitisbuiltandused,tosolicitfeedbackandcol-laboratewithyourpeers,andtoincreasetheimpactandsustainabilityofyourwork(cf.[49]).Mostimportantly,youshouldpublishallfilesCOPYiedintotheimage,e.g.,testdataorfilesforsoftwareinstallationfromsource(seeRule7),inthesamepublicrepositoryastheDock-erfile,e.g.,inaresearchcompendium.Ifyouprefertoedityourscriptsmoreinteractivelyinarunningcontainer(e.g.,usingJupyter),thenitmaybemoreconvenienttobindmounttheirdirectoryfromthehostatruntime,providedallchangesarecommittedbeforesharing.Onlinecollaborationplatforms(e.g.,GitHub,GitLab)alsomakeiteasytouseCIservicestotestbuildingandexecutingyourimageinanindependentenvironment.CIincreasesstabilityandtrust,anditallowsforimagestobepublishedautomatically.Automationstrategiesexisttobuildandtestimagesformultipleplatformsandsoftwareversions,evenwithCI.Suchapproachesareoftenusedwhendevelopingpopularsoftwarepackagesforabroaduserbaseoperatingacrossawiderangeoftargetplatformsandenvironments,andtheycanbeleveragedifyouexpectyourworkflowtofallintothiscategory.Furthermore,thecommitmessagesinyourversion-controlledrepositorypreservearecordofallchangestotheDockerfile,andyoucanusethesameversionsintagsforboththecontainer’simageandthegitrepository. Rule7:Mountdatasetsatruntime Theroleofcontainersistoprovidethecomputingenvironment,nottoencapsulate(poten-tiallyverylarge)datasets.Itisbettertoinsertlargedatafilesfromthelocalmachineintothecontaineratruntime,andusetheimageprimarilyforthesoftwareanddependencies.Thisinsertionisachievedbyusingbindmounts.MountingthesefilesispreferabletousingtheADD/COPYinstructionsintheDockerfile,becausefilespersistwhenthecontainerinstanceorimageisremovedfromyoursystem,andthefilesaremoreaccessiblewhentheworkspaceispublished.Ifyouwanttoaddlocalfilestothecontainer(anddonotneedADD’sextrafeatures),werecommendCOPYbecauseitissimplerandexplicit.VolumesareusefulforpersistingchangesacrossrunsofacontainerandofferfasterfileI/Ocomparedtoothermountingmethods(particularlyusefulwithdatabasesforexample).However,theyarelesssuitableforreproducibility,sincethesechangesexistwithintheimage(makingthemlessinlinewithtreatingcontainersasephemeral;seeRule10)andarenotsoeasytoaccessorplaceunderversioncontrol.Unlessspecificfeaturesareneeded,bindmountsarepreferabletostoragevolumessincethecontentsaredirectlyaccessiblefromboththecontainerandthehost.Thefilescanalsobemoreeasilyincludedinthesamerepository.Storingdatafilesoutsideofthecontainerallowshandlingofverylargeorsensitivedatasets,e.g.,proprietarydataorprivateinformation.Donotincludesuchdatainanimage!Toavoidpublishingsensitivedatabyaccident,youcanaddthedatadirectorytothe.dockerignorefile,whichexcludesfilesanddirectoriesfromthebuildcontext,i.e.,thesetoffilesconsideredbydockerbuild.Ignoringdatafilesalsospeedsupthebuildincaseswherethereareverylargefilesormanysmallfiles.Asanexception,youshouldincludedummyorsmalltestdata-setsintheimagetoensurethatacontainerisfunctionalwithouttheactualdataset,e.g.,forautomatedtests,instructionsintheusermanual,orpeerreview(seealso“functionaltestinglogic”in[12]).Forallthesecases,youshouldprovideclearinstructionsintheREADMEfileonhowtousetheactual(ordummy)data,andhowtoobtainandmountitifitiskeptoutsideoftheimage.Whenpublishingyourworkspace,e.g.,onZenodo,havingdatasetsoutsideofthecontaineralsomakesthemmoreaccessibletoothers,forexample,forreuseoranalysis.Amountcanalsobeusedtoaccessoutputdatafromacontainer;thiscanbeanextramountorthesamedatadirectory.Alternatively,youcanusethedockercpcommandtoaccessfilesfromarunningorstoppedcontainer,butthisrequiresaspecifichandling,e.g., PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 16/24 namingthecontainerwhenstartingitorusingmultipleshells,whichrequiresverydetailedinstructionsforusers.Youcanusethe-v/--volumeorpreferably--mountflagstodockerruntoconfig-urebindmountsofdirectoriesorfiles[50],includingoptions,asshowninthefollowingexam-ples.Ifthetargetpathexistswithintheimage,thebindmountwillreplaceitforthestartedcontainer.(Note,$HOMEisanenvironmentvariableinUNIXsystemsrepresentingthepathtothecurrentuser’shomedirectory,e.g.,/home/moby,and$(pwd)returnsthecurrentpath). #mountdirectorydockerrun--mounttype=bind,source=$HOME/project,target=/projectmycontainer#mountdirectoryasread-onlydockerrun--mounttype=bind,src=$HOME/project,dst=/workspace,readonlymycontainer#mountmultpledirectories,onewithwriteaccessrelativetocurrentpath(Linux)dockerrun--mounttype=bind,src=$(pwd)/article-x-supplement/data,dst=/input-data,readonly\\–mounttype=bind,src=$(pwd)/outputs,dst=/output-datamycontainer Howyourcontainerexpectsexternalresourcestobemountedintoitshouldbeincludedintheexamplecommands(seeRule4).Inthesecommands,youcanalsomakesuretoavoidissueswithfilepermissionsbyusingDocker’s--useroption.Forexample,bydefault,writ-inganewfilefrominsidethecontainerwillbeownedbyuserrootonyourhost,becausethatisthedefaultuserwithinthecontainer. Rule8:Maketheimageone-clickrunnable Containersareverywellsuitedforday-to-daydevelopmenttasks(seealsoRule10),becausetheysupportcommoninteractiveenvironmentsfordatascienceandsoftwaredevelopment.Buttheyarealsousefulfora“headless”executionoffullworkflows.Forexample,[51]demon-stratesacontainerforrunninganagent-basedmodelwithvideofilesasoutputs,andthisarti-cle’sRMarkdownsource,whichincludedcellswithanalysiscode,renderedintoaPDFinacontainer.Aworkflowthatdoesnotsupportheadlessexecutionmayevenbeseenasirreproducible.These2usagescanbeconfiguredbytheDockerfile’sauthorandexposedtotheuserbasedontheDockerfile’sENTRYPOINTandCMDinstructions.Animage’smainpurposeisreflectedbythedefaultprocessandconfiguration,thoughtheENTRYPOINTandCMDcanalsobechangedatruntime.Itisconsideredgoodpracticetohaveacombinationofdefaultentrypointandcommandthatmeetsreasonableuserexpectations.Forexample,acontainerknowntobeaworkflowshouldexecutetheentrypointtotheworkflowandperhapsuse--helpasthecommandtoprintoutusage.Thecontainerentrypointshouldnotexecutetheworkflow,astheuserislikelytorunthecontainerforbasicinspection,andstartingananalysisasasurprisethatmightwritefilesisundesired.Asthemaintaineroftheworkflow,youshouldwriteclearinstructionsforhowtoproperlyinteractwiththecontainer,bothforyourselfandothers.Apossibleweaknesswithusingcontainersisthattheycanonlyprovideonedefaultentrypointandcommand.However,tools,e.g.,TheScientificFilesystem[52],havebeen PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 17/24 developedtoexposemultipleentrypoints,environments,helpmessages,labels,andeveninstallsequences.WithplainDocker,youcanoverridethedefaultsaspartofthedockerruncommandorinanextraDockerfileusingtheprimaryimageasabase,asshowninListing5.Inanycase,youshoulddocumentdifferentvariantsverywellandpotentiallycapturebuildandruncommandsinaMakefile[27].IfyouuseaMakefile,thenkeepitinthesamerepository(seeRule7),andincludeinstructionsforitsusage(seeRule4).Tosupportmorecomplexconfigurationoptions,itishelpfultoexposesettingsviaaconfigurationfile,whichcanbebindmountedfromthehost[51],viaenvironmentvariables(seeRule4and[53]),orviawrappersusingDocker,suchasKliko[54].Listing5.WorkflowDockerfileandderived“runnerimage”DockerfilewithfilenameDockerfile.runner. #-----File:Dockerfile-----------------------#baseimage(interactive)FROMjupyter/datascience-notebook:python-3.7.6#Usageinstructions:#dockerbuild--tagworkflow:1.0.#dockerrunworkflow:1.0#-----File:Dockerfile.runner----------------#interactiveimageFROMworkflow:1.0ENTRYPOINT[\"python\"]CMD[\"/workspace/run-all.sh\"]#Usageinstructions:#dockerbuild--tagworkflow-runner:1.0--fileDockerfile.runner.#dockerrun-eITERATIONS=10-eALGORITHM=advanced\\--volume/tmp/results:/workspace/output_dataworkflow-runner:1.0 Interactivegraphicalinterfaces,suchasRStudio,Jupyter,orVisualStudioCode,canruninacontainertobeusedacrossoperatingsystemsandbothlocallyandremotelyviaaregularwebbrowser.TheHTML-baseduserinterfaceisexposedoverHTTP.UsetheEXPOSEinstructiontodocumenttheportsofinterestforbothhumansandtools,becausetheyneedtobeboundtothehosttobeaccessibletotheuserusingthedockerrunoption-p/--publish<hostport>:<containerport>.Thecontainershouldalsoprinttothescreenoftheusedportsalongwithanylogincredentialsneeded.Forexample,thisisdoneinthelastfewlinesoftheoutputofrunningaJupyterNotebookserverlocally(linesabbreviated): dockerrun-p8888:8888jupyter/datascience-notebook:7a0c7325e470[...][I15:44:31.323NotebookApp]TheJupyterNotebookisrunningat:[I15:44:31.323NotebookApp]http://9027563c6465:8888/?token=6a92d[..][I15:44:31.323NotebookApp]orhttp://127.0.0.1:8888/?token=6a92[..][I15:44:31.323NotebookApp]UseControl-Ctostopthisserverand[..] ApersonwhoisunfamiliarwithDockerbutwantstouseyourimagemayrelyongraphicaltoolslikeContainDS,Portainer,ortheDockerDesktopDashboardforassistanceinmanaging PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 18/24 containersontheirmachinewithoutusingtheDockerCLI.Suchtoolswilloftendetectexposedportsanddeclaredvolumessoastomaketheuserawareofthem.Interactiveusageofacommand-lineinterfaceisquitestraightforwardtoaccessfromcon-tainers,ifusersarefamiliarwiththisstyleofuserinterface.Runningthecontainerwillprovideashellwhereatoolcanbeusedandwherehelporerrormessagescanassisttheuser.Forexam-ple,complexworkflowsinanyprogramminglanguagecan,withsuitablepre-configuration,betriggeredbyrunningaspecificscriptfile.Ifyourworkflowcanbeexecutedviaacommandlineclient,youmayusethattovalidatecorrectfunctionalityofanimageinautomatedbuilds,e.g.,byusingasmalltoyexampleandcheckingtheoutputbycheckingsuccessfulresponsesfromHTTPendpointsprovidedbythecontainer,suchaswithanHTTPresponsecodeof200,orbyusingabrowserautomationtoolsuchasSelenium[55].ThefollowingexamplerunsasimpleRcommandcountingthelinesinthisarticle’ssourcefile.Thefilepathispassedasanenvironmentvariable.Listing6.Passingaparameterviaenvironmentvariable;workingcodeinexample“pass-parameter-env”,seeExamples. dockerrun\\–-envCONFIG_PARAM=\"/data/ten-simple-rules-dockerfiles.Rmd\"\\–-volume$(pwd):/data\\jupyter/datascience-notebook:7a0c7325e470\\R--quiet-e\"l=length(readLines(Sys.getenv(‘CONFIG_PARAM’)));\\print(paste(‘Numberoflines:‘,l))\">l=length(readLines(Sys.getenv(‘CONFIG_PARAM’)));>print(paste(‘Numberoflines:‘,l))[1]\"Numberoflines:568\" Ifthereisonlyaregulardesktopapplication,thehost’swindowmanagercanbeconnectedtothecontainer.Althoughthisraisesnotablesecurityissues,theycanbeaddressedbyusingthe“X11forwarding”nativelysupportedbySingularity[56],whichcanexecuteDockercon-tainers,orbyleveragingsupportingtoolssuchasx11docker[57].Otheralternativesincludebridgecontainers[58]andexposingaregulardesktopviathebrowser(e.g.,forJupyterHub[59]).Thisvarietyofapproachesrendersseeminglymoreconvenientuncontainerisedenvi-ronmentsunnecessary.Justusingone’slocalmachineisonlyslightlymorecomfortablebutmuchlessreproducibleandportable. Rule9:Ordertheinstructions Youwillregularlybuildanimageduringdevelopmentofyourworkflow.Youcantakeadvan-tageofbuildcachingtoavoidexecutionoftime-consuminginstructions,e.g.,installfromaremoteresourceorcopyingafilethatgetscached.Therefore,youshouldkeepinstructionsinorderofleastlikelytochangetomostlikelytochange.DockerwillexecutetheinstructionsintheorderthattheyappearintheDockerfile;whenoneinstructioniscompleted,theresultiscached,andthebuildmovestothenextone.IfyouchangesomethingintheDockerfileandrebuildtheimage,eachinstructionisinspectedinturn.Ifithasnotchanged,thecachedlayerisusedandthebuildprogresses.Conversely,ifthelinehaschanged,thatbuildstepisexe-cutedafresh,andtheneverysubsequentinstructionwillhavetobeexecutedincasethechangedlineinfluencesalaterinstruction.Youshouldregularlyrebuildtheimageusingthe--no-cacheoptiontolearnaboutbrokeninstructionsassoonaspossible(cf.Rule10asanaside,dockerimageprune--allisagoodwaytoremoveunusedimages,asthese PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 19/24 tendtoaccruesilentlyinyoursystemandtakeupsignificantdiskspace).Sucharebuildisalsoagoodoccasiontorevisittheorderofinstructions,e.g.,ifyouappendedaninstructionattheendtosavetimewhileiterativelydevelopingtheDockerfile,andtheformatting.Youcanaddaversiontagtotheimagebeforetherebuildtomakesuretokeepaworkingenvironmentathand.Arecommendedorderingbasedontheseconsiderationsisasfollows,andyoucanusecommentstovisuallyseparatethesesectionsinyourfile(cf.Listing1):1.Systemlibraries2.Language-specificlibrariesormodulesa.fromrepositories(i.e.,binaries)b.fromsource(e.g.,GitHub)3.Installationofyourownsoftwareandscripts(ifnotmounted)4.Copyingdataandconfigurationfiles(ifnotmounted)5.Labels6.Entrypointanddefaultcommand. Rule10:Regularlyuseandrebuildcontainers Usingcontainersforresearchworkflowsrequiresnotonlytechnicalunderstandingbutalsoanawarenessofrisksthatcanbemanagedeffectivelybyfollowinganumberofgoodhabits,dis-cussedinthissection.Whilethereisnofirmrule,ifyouuseacontainerdaily,itisgoodprac-ticetorebuildthatcontainerevery1or2weeks;thishelpsidentifybreakingchangesearlyandpreventsmultipleissuescompoundingoneachother.Atthetimeofpublicationofresearchresults,itisgoodpracticetosaveacopyoftheimageinapublicdatarepositorysothatreadersofthepublicationcanaccesstheresourcesthatproducedthepublishedresults.First,itisagoodhabittouseyourcontainereverytimeyouworkonaprojectandnotjustasafinalstepduringpublication.Ifthecontaineristheonlyplatformyouuse,youcanbehighlyconfidentthatyouhaveproperlydocumentedthecomputingenvironment[60].Youshouldprioritisethisusageoverothers,e.g.,noninteractiveexecutionofafullworkflow,becauseitgivesyoupersonallythehighestvalueanddoesnotlimityouruseorothers’useofyourdataandcodeatall(seeRule8).Second,forreproducibility,wecantreatcontainersastransientanddisposable,andevenintentionallyrebuildanimageatregularintervals.Ideally,containersthatwebuiltyearsagoshouldrebuildseamlessly,butthisisnotnecessarilythecase,especiallywithrapidlychangingtechnologyrelevanttomachinelearninganddatascience.Habituallydeletingacontainerandperformingacache-lessrebuildoftheimage(a)increasessecurityduetoupdatingunderlyingsoftware;(b)helpstorevealissuesrequiringmanualintervention,e.g.,changestocodeorcon-figurationthatarenotdocumentedintheDockerfilebutperhapsshouldbe;and(c)allowsyoutomoreincrementallydebugissues.ThishabitcanbesupportedbyusingcontinuousdeploymentorCIstrategies.Incaseyouneedasetuporconfigurationforthefirst2habits,itisgoodpracticetoprovideaMakefilealongsideyourDockerfile,whichcancapturethespecificcommands.Furthermore,whenyourebuildtheimage,youcantakeafreshlookattheDockerfileandimproveitovertime,becauseitwillbehardtoapplyallrulesatonce.Variouslintingtools,eitheronthecom-mandline[61]orasawebservice[62],areavailableandcanbeintegratedintoyourworkflow. PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 20/24 Third,youcanexporttheimagetofileanddeposititinapublicdatarepository,whereitnotonlybecomescitablebutalsoprovidesasnapshotoftheactualenvironmentyouusedataspecificpointintime.Youshouldincludeinstructionsforhowtoimportandrunthework-flowbasedontheimagearchive,andaddyourownimagetagsusingsemanticversioning(seeRule2)forclarity.Depositingtheimagenexttootherprojectfiles,i.e.,data,code,andtheusedDockerfile,inapublicrepositorymakesthemlikelytobepreserved,butitishighlyunlikelythatovertimeyouwillbeabletorecreateitpreciselyfromtheaccompanyingDock-erfile.Publishingtheimageandthecontainedmetadatatherein(e.g.,theDockerversionused)mayevenallowfuturesciencehistorianstoemulatetheDockerenvironment.Sharingtheactualimageviaaregistryandaversion-controlledDockerfiletogetherallowsyoutofreelyexperimentandcontinuedevelopingyourworkflowandkeeptheimageuptodate,e.g.,updatingversionsofpinneddependencies(seeRule5)andregularimagebuilding(seeabove).Finally,forasanitycheckandtofosterevenhighertrustinthestabilityanddocumentationofyourproject,youcanaskacolleagueorcommunitymembertobeyourcodecopilot(seehttps://twitter.com/Code_Copilot)tointeractwithyourworkflowcontaineronamachineoftheirown.Youcandothisshortlybeforesubmittingyourreproducibleworkflowforpeerreview,soyouarewellpositionedforthefutureofscholarlycommunicationandopenscience,wherethesemaybestandardpracticesrequiredforpublication[21,63–65]. Examples Todemonstratethe10rules,wemaintainacollectionofannotatedexampleDockerfilesintheexamplesdirectoryofthisarticle’sGitHubrepository.TheDockerfilesweremostlydiscoveredinpublicrepositoriesandupdatedtoadherebettertotherules;seehttps://github.com/nuest/ten-simple-rules-dockerfiles/tree/master/examples,archivedathttps://doi.org/10.5281/zenodo.3878582. Conclusions InthisarticlewehaveprovidedguidanceforusingDockerfilestocreatecontainersforuseandcommunicationinsmaller-scaledatascienceresearch.Reproducibilityinresearchisanendeavourofincrementalimprovementandbestefforts,notaboutachievingtheperfectsolu-tion;suchasolutionmaybenotachievableformanyresearcherswithlimitedresources,anditsdefinitionmaychangeovertime.Evenifimperfect,theefforttocreateanddocumentscien-tificworkflowsprovidesincrediblyusefulandvaluabletransparencyforaproject.Weencour-ageresearcherstofollowthesestepstakenbytheirpeerstouseDockerfilestopracticereproducibleresearch,andweencouragethemtochangethewaytheycommunicatetowards“preproducibility”[66],whichvaluesopenness,transparency,andhonestytofindfascinatingproblemsandadvancescience.So,weaskresearchers,withtheirbesteffortsandwiththeircurrentknowledge,tostrivetowritereadableDockerfilesforfunctionalcontainersthatarerealisticaboutwhatmightbreakandwhatisunlikelytobreak.Inasimilarvein,weacceptthatresearcherswillfreelybreaktheserulesifanotherapproachmakesmoresensefortheirusecase.Also,weaskthatresearchersnotoverwhelmthemselvesbytryingtofollowalltherulesrightaway,butthattheysetupaniterativeprocesstoincreasetheircomputingenviron-ment’smanageabilityovertime.Mostimportantly,weaskresearcherstoshareandexchangetheirDockerfilesfreelyandtocollaborateintheircommunitiestospreadtheknowledgeaboutcontainersasatoolforresearchandscholarlycollaborationandcommunication. Acknowledgments WethankDavClarkwhoprovidedfeedbackonthepreprint[67]. PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 21/24 References 1.MarwickB.Howcomputersbrokescience—andwhatwecandotofixit[Internet].TheConversation.2015.https://theconversation.com/how-computers-broke-science-and-what-we-can-do-to-fix-it-499382.DonohoDL.Aninvitationtoreproduciblecomputationalresearch.Biostatistics.2010;11:385–388.https://doi.org/10.1093/biostatistics/kxq028PMID:205388733.WilsonG,AruliahDA,BrownCT,HongNPC,DavisM,GuyRT,etal.Bestpracticesforscientificcom-puting.PLoSBiol.2014;12:e1001745.https://doi.org/10.1371/journal.pbio.1001745PMID:244159244.WilsonG,BryanJ,CranstonK,KitzesJ,NederbragtL,TealTK.Goodenoughpracticesinscientificcomputing.PLoSComputBiol.2017;13:e1005510.https://doi.org/10.1371/journal.pcbi.1005510PMID:286408065.RuleA,BirminghamA,ZunigaC,AltintasI,HuangS-C,KnightR,etal.TensimplerulesforwritingandsharingcomputationalanalysesinJupyterNotebooks.PLoSComputBiol2019;15:e1007007.https://doi.org/10.1371/journal.pcbi.1007007PMID:313440366.SandveGK,NekrutenkoA,TaylorJ,HovigE.Tensimplerulesforreproduciblecomputationalresearch.PLoSComputBiol.2013;9:e1003285.https://doi.org/10.1371/journal.pcbi.1003285PMID:242042327.Nu¨stD.AuthorCarpentry:Dockerforreproducibleresearch[Internet].2017.https://nuest.github.io/docker-reproducible-research/8.ChapmanP.ReproducibledatascienceenvironmentswithDockerPhilChapman’sBlog[Internet].2018.https://chapmandu2.github.io/post/2018/05/26/reproducible-data-science-environments-with-docker/9.rOpenSciLabs.RDockertutorial[Internet].2015.https://ropenscilabs.github.io/r-docker-tutorial/10.Udemy,ZhbankoV.DockerContainersforDataScienceandReproducibleResearch[Internet].Udemy.2019.https://www.udemy.com/course/docker-containers-data-science-reproducible-research/11.PsomopoulosFE.Lesson\"DockerandReproducibility\"inWorkshop\"ReproducibleanalysisandResearchTransparency\"[Internet].ReproducibleanalysisandResearchTransparency.2017.https://reproducible-analysis-workshop.readthedocs.io/en/latest/8.Intro-Docker.html12.GrueningB,SallouO,MorenoP,LeprevostFdaVeiga,Me´nagerH,SøndergaardD,etal.Recommen-dationsforthepackagingandcontainerizingofbioinformaticssoftware.F1000Research.2019;7:742.https://doi.org/10.12688/f1000research.15140.2PMID:3154394513.DockerInc.BestpracticesforwritingDockerfiles[Internet].DockerDocumentation.2020.https://docs.docker.com/develop/develop-images/dockerfile_best-practices/14.VassT.IntroGuidetoDockerfileBestPractices[Internet].DockerBlog.2019.https://www.docker.com/blog/intro-guide-to-dockerfile-best-practices/15.KurtzerGM,SochatV,BauerMW.Singularity:Scientificcontainersformobilityofcompute.PLoSONE.2017;12:e0177459.https://doi.org/10.1371/journal.pone.0177459PMID:2849401416.DockerInc.OverviewofDockerCompose[Internet].DockerDocumentation.2019.https://docs.docker.com/compose/17.Nu¨stD,KonkolM,PebesmaE,KrayC,SchutzeichelM,PrzibytzinH,etal.OpeningthePublicationPro-cesswithExecutableResearchCompendia.D-LibMagazine2017;23.https://doi.org/10.1045/january2017-nuest18.CohenJ,KatzDS,BarkerM,ChueHongNP,HainesR,JayC.TheFourPillarsofResearchSoftwareEngineering.IEEESoftw.2020.https://doi.org/10.1109/MS.2020.297336219.Wikipediacontributors.Docker(software)[Internet].Wikipedia.2019.https://en.wikipedia.org/w/index.php?title=Docker_(software)&oldid=92844108320.BoettigerC,EddelbuettelD.AnIntroductiontoRocker:DockerContainersforR.TheRJournal.2017;9:527–536.https://doi.org/10.32614/RJ-2017-06521.ChenX,Dallmeier-TiessenS,DaslerR,FegerS,FokianosP,GonzalezJB,etal.Openisnotenough.NatPhys.2019;15:113.https://doi.org/10.1038/s41567-018-0342-222.BrinckmanA,ChardK,GaffneyN,HateganM,JonesMB,KowalikK,etal.Computingenvironmentsforreproducibility:Capturingthe“WholeTale”.FuturGenerComputSyst.2018.https://doi.org/10.1016/j.future.2017.12.02923.CodeOcean[Internet].2019.https://codeocean.com/24.SˇimkoT,HeinrichL,HirvonsaloH,KousidisD,Rodrı´guezD,REANA:ASystemforReusableResearchDataAnalyses.EPJWebConf.2019;214:06034.https://doi.org/10.1051/epjconf/20192140603425.ProjectJupyter,BussonnierM,FordeJ,FreemanJ,GrangerB,HeadT,etal.Binder2.0—Reproduc-ible,interactive,sharableenvironmentsforscienceatscale.Proceedingsofthe17thPythoninScienceConference.2018;113–120.10.25080/Majora-4af1f417-011 PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 22/24 26.DockerInc.Dockerfilereference[Internet].DockerDocumentation.2019.https://docs.docker.com/engine/reference/builder/27.Wikipediacontributors.Make(software)[Internet].Wikipedia.2019.https://en.wikipedia.org/w/index.php?title=Make_(software)&oldid=92997646528.BoettigerC.AnIntroductiontoDockerforReproducibleResearch.SIGOPSOperSystRev.2015;49:71–79.https://doi.org/10.1145/2723872.272388229.BenMarwick.1989-excavation-report-Madjebebe.2015.10.6084/m9.figshare.129705930.DockerInc.OfficialImagesonDockerHub[Internet].DockerDocumentation2019.https://docs.docker.com/docker-hub/official_images/31.Nu¨stD,HinzM.Containerit:GeneratingDockerfilesforreproducibleresearchwithR.JOpenSourceSoftw.2019;4:1603.https://doi.org/10.21105/joss.0160332.Stencila.Stencila/dockta[Internet].Stencila.2019.https://github.com/stencila/dockta33.Cookiecuttercontributors.Cookiecutter/cookiecutter[Internet].cookiecutter.2019.https://github.com/cookiecutter/cookiecutter34.MarwickB.Benmarwick/rrtools[Internet].2019.https://github.com/benmarwick/rrtools35.DockerInc.OfficialImagesonDockerHub[Internet].DockerDocumentation2020.https://docs.docker.com/docker-hub/official_images/36.HalchenkoYO,HankeM.OpenisNotEnough.Let’sTaketheNextStep:AnIntegrated,Community-DrivenComputingPlatformforNeuroscience.FrontNeuroinform.2012;6.https://doi.org/10.3389/fninf.2012.00022PMID:2305596637.WickhamH,AverickM,BryanJ,ChangW,McGowanL,Franc¸oisR,etal.Welcometothetidyverse.JOpenSourceSoftw.2019;4:1686.https://doi.org/10.21105/joss.0168638.Preston-WernerT.SemanticVersioning2.0.0[Internet].SemanticVersioning.2013.https://semver.org/39.DockerInc.Usemulti-stagebuilds[Internet].DockerDocumentation2020.https://docs.docker.com/develop/develop-images/multistage-build/40.GoodmanA.Wagoodman/dive[Internet].2019.https://github.com/wagoodman/dive41.Opencontainers.Opencontainers/image-specv1.0.1—Annotations[Internet].GitHub.2017.https://github.com/opencontainers/image-spec/blob/v1.0.1/annotations.md42.DockerInc.Dockerfilereference,healthcheck[Internet].DockerDocumentation.2020.https://docs.docker.com/engine/reference/builder/#healthcheck43.ThePythonSoftwareFoundation.RequirementsFiles—pipUserGuide[Internet].2019.https://pip.pypa.io/en/stable/user_guide/#requirements-files44.ContinuumAnalytics.Managingenvironments—condadocumentation[Internet].2017.https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html45.RCoreTeam.TheDESCRIPTIONfilein\"writingrextensions\"[Internet].1999.https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file46.EddelbuettelD,HornerJ.Littler:Ratthecommand-linevia‘r’[Internet].2019.https://CRAN.R-project.org/package=littler47.npm.Creatingapackage.jsonfilenpmDocumentation[Internet].2019.https://docs.npmjs.com/creating-a-package-json-file48.TheJuliaLanguageContributors.10.Project.TomlandManifest.TomlPkg.Jl[Internet].2019.https://julialang.github.io/Pkg.jl/v1/toml-files/49.EmsleyI,DeRoureD.AFrameworkforthePreservationofaDockerContainerInternationalJournalofDigitalCuration.IntJDigitCuration.2018;12.https://doi.org/10.2218/ijdc.v12i2.50950.DockerInc.Usebindmounts[Internet].DockerDocumentation.2019.https://docs.docker.com/storage/bind-mounts/51.VerstegenJA.JudithVerstegen/PLUC_Mozambique:FirstreleaseofPLUCforMozambique[Internet].Zenodo.2019.https://doi.org/10.5281/zenodo.351998752.SochatV.TheScientificFilesystem.GigaScience2018;7.https://doi.org/10.1093/gigascience/giy023PMID:2971821353.KnothC,Nu¨stD.ReproducibilityandPracticalAdoptionofGEOBIAwithOpen-SourceSoftwareinDockerContainers.RemoteSens.2017;9:290.https://doi.org/10.3390/rs903029054.MolenaarG,MakhathiniS,GirardJN,SmirnovO.Kliko—Thescientificcomputecontainerformat.AstronomyComput.2018;25:1–9.https://doi.org/10.1016/j.ascom.2018.08.003 PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 23/24 55.Seleniumcontributors.SeleniumHQ/selenium[Internet].Selenium.2019.https://github.com/SeleniumHQ/selenium56.Singularity.FrequentlyAskedQuestionsSingularity[Internet].2019.http://singularity.lbl.gov/archive/docs/v2-2/faq#can-i-run-x11-apps-through-singularity57.ViereckM.X11docker:RunGUIapplicationsinDockercontainers.JOpenSourceSoftw.2019;4:1349.https://doi.org/10.21105/joss.0134958.YaremenkoE.JAremko/docker-x11-bridge[Internet].2019.https://github.com/JAremko/docker-x11-bridge59.PandaY.Yuvipanda/jupyter-desktop-server[Internet].2019.https://github.com/yuvipanda/jupyter-desktop-server60.MarwickB.READMEof1989-excavation-report-Madjebebe.2015.10.6084/m9.figshare.129705961.Arule-basedlinterfordockerfiles[Internet].2020.https://github.com/projectatomic/dockerfile_lint62.Dockerfilelinter[Internet].2020.https://hadolint.github.io/hadolint/63.EglenS,Nu¨stD.CODECHECK:Anopen-scienceinitiativetofacilitatesharingofcomputerprogramsandresultspresentedinscientificpublications.SeptentrioConferenceSeries2019.10.7557/5.491064.Scho¨nbrodtF.TrainingstudentsfortheOpenSciencefuture.NatHumBehav.2019;3:1031–1031.https://doi.org/10.1038/s41562-019-0726-zPMID:3160203465.EglenSJ,MounceR,GattoL,CurrieAM,NobisY.Recentdevelopmentsinscholarlypublishingtoimproveresearchpracticesinthelifesciences.EmergTopLifeSci.2018;2:775–778.https://doi.org/10.1042/ETLS2018017266.StarkPB.Beforereproducibilitymustcomepreproducibility.Nature.2018.https://doi.org/10.1038/d41586-018-05256-0PMID:2979552467.Nu¨stD,SochatV,MarwickB,EglenS,HeadT,HirstT.TenSimpleRulesforWritingDockerfilesforReproducibleDataScience[Internet].OpenScienceFramework.2020Apr.https://doi.org/10.31219/osf.io/fsd7t PLOS COMPUTATIONAL BIOLOGY PLOSComputationalBiology|https://doi.org/10.1371/journal.pcbi.1008316November10,2020 24/24","libVersion":"0.3.1","langs":""}