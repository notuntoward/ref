{"path":"lit/lit_sources/Zhao22DatadrivenCyclecalendarCombined.pdf","text":"General rights Copyright and moral rights for the publications made accessible in the public portal are retained by the authors and/or other copyright owners and it is a condition of accessing publications that users recognise and abide by the legal requirements associated with these rights. ï‚· Users may download and print one copy of any publication from the public portal for the purpose of private study or research. ï‚· You may not further distribute the material or use it for any profit-making activity or commercial gain ï‚· You may freely distribute the URL identifying the publication in the public portal If you believe that this document breaches copyright please contact us providing details, and we will remove access to the work immediately and investigate your claim. Downloaded from orbit.dtu.dk on: Jul 07, 2023 Data-driven Cycle-calendar Combined Battery Degradation Modeling for Grid Applications Zhao, Chunyang; Andersen, Peter Bach; TrÃ¦holt, Chresten; Hashemi, Seyedmostafa Published in: Proceedings of 2022 IEEE Power & Energy Society General Meeting (PESGM) Link to article, DOI: 10.1109/PESGM48719.2022.9917143 Publication date: 2022 Document Version Peer reviewed version Link back to DTU Orbit Citation (APA): Zhao, C., Andersen, P. B., TrÃ¦holt, C., & Hashemi, S. (2022). Data-driven Cycle-calendar Combined Battery Degradation Modeling for Grid Applications. In Proceedings of 2022 IEEE Power & Energy Society General Meeting (PESGM) IEEE. Ieee Power and Energy Society General Meeting https://doi.org/10.1109/PESGM48719.2022.9917143 Data-driven Cycle-calendar Combined Battery Degradation Modeling for Grid Applications Chunyang Zhao, Peter Bach Andersen, Chresten TrÃ¦holt, Seyedmostafa Hashemi Center for Electric Power and Energy (CEE) Technical University of Denmark Copenhagen, Denmark chuzh@elektro.dtu.dk, pba@elektro.dtu.dk, ctr@elektro.dtu.dk, shtog@elektro.dtu.dk Abstractâ€”Battery degradation is the main uncertainty that hedges the development of battery projects. In this work, we build a data-driven battery degradation model assessing the impact of the complex state of charge (SOC) operation condition. Both cycle life and calendar life are incorporated, based on the available lab testing data of battery cells. Various degradation modeling functions are compared to acquire the best fitting results under different depths of discharge (DOD) ranges calculated by rainflow counting algorithm. The statistical relation between shallow cycles and calendar time is used to address the calendar degradation in the cycling scope. A battery frequency regulation service case study is carried out based on a one-year frequency record in the Nordic synchronous area. Our work bridges the battery cell testing datasets to the battery degradation modeling in grid applications and proposes a new perspective to address the calendar life by the analysis of the shallow cycles for the state of health (SOH) estimation, which improves applicability and accuracy. Keywordsâ€”Battery degradation, grid service, data-driven model, cycle life, calendar life I. INTRODUCTION The battery energy storage system (BESS) has been increasingly essential for modern power systems, which are at the transformation process from conventional power resources to sustainable power resources. The intermittency of renewable power generation is the inherent feature of natural resources, such as wind speed and solar irradiance, and the mismatch between power generation and consumption creates challenges for balancing. In this situation, the BESS is required to improve the stability of the power system by providing grid services, which include applications such as frequency regulation, load leveling, black start, and so on [1]. Battery degradation, as known as battery aging and capacity fading, is one of the key issues that hedges the popularization of battery usage. Research works are testing and modeling the battery degradation under various duty profiles, to investigate the battery life performance under various conditions, such as time, temperatures, current-rate (C-rate), SOC, and other parameters representing the pattern of the load [2]â€“[5]. However, the advanced development of battery degradation modeling is mostly at the level of the battery cell, and the research of battery degradation of BESS under operation such as grid services are limited. To address the battery degradation in grid services, the key processes are building the degradation model and analyzing the battery usage pattern. The aging test and degradation modeling have been carried since the invention and implementation of the battery cells, especially for the lithium- ion battery cells [6]. From the theoretical electrochemical research, the degradation modes have been categorized as loss of lithium inventory, loss of active anode material, and loss of active cathodes material, which are related to different degradation mechanisms, such as the solid electrolyte interphase growth, lithium plating, and so on [7]. The correlation of aforementioned mechanisms and battery usage conditions are investigated, and various modeling approaches, such as electrochemical model, semi-empirical model, and data-driven model, are established [8]. Regardless of the methodologies, the battery aging test dataset is critical for modeling accuracy, and the work to summarize different datasets is presented in [9]. However, there is limited research utilizing the newly built battery aging data resource to address the battery degradation uncertainty in engineering applications such as providing grid services. In this paper, the development of battery degradation modeling and related battery aging tests are introduced. The Lithium-Nickel-Manganese-Cobalt-Oxide (NMC) battery cycle and calendar aging test results are selected for data- driven modeling. Specifically, the battery calendar life is addressed by shallow cycle accumulation, and both calendar life and cycle life are estimated from the rainflow counting results of SOC time series analysis. The proposed method is implemented in the case of BESS providing frequency regulation service in Nordic countries for the quantitative degradation estimation. The rest of the paper is organized as follows: Section â…¡ gives backgrounds including the battery aging test dataset pattern analysis methods, and degradation modeling methods. Section â…¢ present the battery cycle aging and calendar aging performance. In Section â…£, the battery degradation modeling is presented, and the shallow cycle relation to battery calendar life is emphasized. In Section â…¤, cycle-calendar combined battery degradation modeling and the degradation case study of BESS providing frequency regulation service are demonstrated. Section â…¥ concludes the paper. II. BACKGROUND The battery aging test is the principal way to investigate the degradation of lithium-ion batteries; therefore, a substantial amount of battery tests are carried in recent 15 years and the amount of accessible data is increasing [9]. The degradation of the battery mainly depends on two aspects, which are battery design and battery usage. Regarding the design, various chemistry and cell formats are used. And for battery usage, multiple operating conditions are implemented, for example, the time, C-rate, voltage, temperature, and SOC history are all related to the immediate and long-term aging performance. The aforementioned aspects influence the non- linear degradation of the battery, and to control the variables, specific combinations are selected for the aging test [10]. Pattern selection and recognition are the crucial parts of data-driven battery degradation modeling. Conventionally, the previous SOH record of the same battery is used as the primary source for the future SOH trajectory [2]. The time- series history of the current, voltage, SOC, and temperature are also used to predict the battery degradation tendency since it inherently affects the degradation [11]. On one hand, the recent degradation modeling research is focusing on the feature engineering of the battery condition monitoring records, i.e., to select and preprocess the recorded data to improve the accuracy of the SOH prediction. On the other hand, various data-driven algorithms are implemented to fit the size of data, the number of features, complexity, interpretability, etc. Rainflow counting has been used extensively for load pattern analysis, from the material engineering of fatigue research to degradation modeling based on SOC analysis [12], [13]. It extracts the battery usage information such as the number of cycles, cycle range, and cycle depth from the SOC record. Furthermore, it helps to accumulate the cycle history in pre-defined cycle ranges, which is distinguished by the depth of discharge (DOD). For example, a continuous SOC record could be decomposed to the discrete cycles with different DOD as the input of the degradation model. Although battery degradation is a complex process, the degradation trajectory is specific when the battery working condition is certain. Therefore, polynomial-based regression is sufficient to build the relationship between the battery cycle with the battery SOH, which achieves good accuracy. With the consideration of operation conditions, the polynomial function is adjusted to reveal the influence of DOD. III. BATTERY TEST AND DEGRADATION Addressing the battery degradation by cycle life and calendar life separately is the common approach for battery degradation quantification [14]. With consideration of other influencing parameters such as temperature, chemistry, etc., the time is recorded to calculate the battery calendar aging, and cycles are used to calculate the cycle aging of the battery cells. For example, the overall degradation of the battery is given by the sum of calendar degradation and cycle degradation as shown in (1). ğ‘„ğ‘ ğ‘¢ğ‘š = ğ‘„ğ‘ğ‘ğ‘™ğ‘’ğ‘›ğ‘‘ğ‘ğ‘Ÿ + ğ‘„ğ‘ğ‘¦ğ‘ğ‘™ğ‘’ (1) The calendar aging tests generally put the battery cell in a controlled environment without connection to the electric circuit and measure the battery capacity once in a while during years of the experimental period, and the battery degradation of cycle aging is under the designed duty profile, which charges and discharges the battery intensively and measures the SOH by round trip tests between the testing cycles. However, the simple superposition of two degradations tends to overestimate the battery degradation, since the battery calendar degradation is happening during the cycle aging test. Therefore, addressing the calendar life in the cycle aging scope could mitigate the double-counting risk for degradation estimation. The NMC battery datasets from Sandia National Labs are used to investigate the battery cycle degradation of the NMC cells considering the DOD influence [15], and the battery calendar aging test is referring to the research work from UniversitÃ© Grenoble Alpes [16]. Regarding battery cycle life, the smaller the DOD leads to slower cycle degradation. As shown in Fig. 1, the SOH development (represented by % initial capacity) along with the equivalent full cycle (EFC) shows that the smaller DOD gives better SOH performance. The usage of EFC is to convert the small cycle count to full cycles by throughput. Compared with other battery chemistry, the NMC battery degradation is not very sensitive regarding C-rate, especially during the low C-rate usage. Moreover, The battery degrades quicker during the early usage phase, and the pattern of the degradation curve is not as parabolic as other chemistries [15]. Fig. 1. NMC Battery cycle aging with difference DOD [15] In the work of Bramy Pilipili Matadi et al, the NMC battery calendar degradation is investigated under different temperature and average SOC ranges [16]. As shown in Fig. 2, the battery degradation is highly impacted by the SOC and temperature. The high temperature and high SOC conditions accelerate the degradation process, and the battery aging performance during the room temperature is relatively stable. Fig. 2. NMC Battery calendar aging with different temperatures and SOC [16] IV. MODELING A. Battey cycle life model The battery degradation trajectory is rather regular and predictable when the condition parameters are fixed. To have a quantitative analysis of the battery degradation, we use various regression formulas to fit the degradation trajectory. Based on the SOH development tendency, the polynomial regression is selected and the coefficient of determination (ğ‘…2) are used to check the model performance as shown in (2). ğ‘…2 = 1 âˆ’ âˆ‘(ğ‘¦ğ‘– âˆ’ ğ‘¦ğ‘–Ì‚)2 âˆ‘(ğ‘¦ğ‘– âˆ’ ğ‘¦ğ‘–Ì…)2 (2) As shown below (3)-(5), the polynomial function of degree 3, polynomial function of degree 5, and logarithmic polynomial function of degree 3 are selected for regression. In Table 1, the results of ğ‘…2 are presented. Normally, with a higher degree of the polynomial function, the higher ğ‘…2 value will be. However, the complex model tends to overfit the training dataset and gives significant bias for prediction, which is significant in the case of F5 together with 100% DOD. As shown in Table 1, with the purpose of simplification and overfitting reduction, the model for 100% DOD, 60% DOD, and 20% DOD are selected as F3_log, F3, and F3_log, with the calculated ğ‘…2 value of 0.951, 0.921, and 0.964 respectively. The degradation pattern is different under various DOD conditions, which requires specific fitting functions and it is related to the inherent electrochemical mechanism. With requirements to fit the degradation curve passing the initial battery capacity point, the aforementioned equations are presented below, ğ¹3(ğ‘¥) = ğ‘ğ‘¥3 + ğ‘ğ‘¥2 + ğ‘ğ‘¥ + ğ‘‘ (3)ï€  ğ¹5(ğ‘¥) = ğ‘ğ‘¥5 + ğ‘ğ‘¥4 + ğ‘ğ‘¥3 + ğ‘‘ğ‘¥2 + ğ‘’ğ‘¥ + ğ‘“ (4)ï€  ğ¹3_ğ‘™ğ‘œğ‘”(ğ‘¥) = ğ‘ âˆ— log(ğ‘¥ + 1)3 + ğ‘ âˆ— ğ‘™ğ‘œğ‘”(ğ‘¥ + 1)2 + ğ‘ âˆ— ğ‘™ğ‘œğ‘”(ğ‘¥ + 1) + ğ‘‘ (5)ï€  TABLE 1 FUNCTION SELECTION BY ğ‘…2 Function selection ğ‘¹ğŸ 100% DOD 60% DOD 20% DOD F3 0.692 0.921 0.954 F3_log 0.951 0.900 0.965 F5 0.880 0.925 0.963 TABLE 2 COEFFICIENTS OF REGRESSION RESULTS Aging type Coefficients a b c d 100% DOD -5.145e-4 1.482e-3 -2.283e-2 1.000 60% DOD -8.178e-12 6.562e-8 -7.814e-4 1.000 20% DOD -6.218e-4 4.992e-3 -1.277e-2 1.000 Calendar -9.657e-7 6.457e-5 -2.504e-3 1.007 As shown in Table 2, the calculated coefficients of the corresponding function are presented, and the curve fitting results of NMC battery degradation for 20%, 60%, and 100% DOD are shown in Fig. 3, Fig. 4, and Fig. 5 respectively, together with the scatter plot of aging test records. Not only the speed of degradation development is more significant during high DOD, but also the degradation pattern changes as the DOD operation range changes. B. Battery calendar life model The battery capacity degrades even without usage. To investigate the battery degradation of calendar life, the calendar aging tests are carried with different chemistry, temperature, resting SOC, etc. 16 NMC cells are tested in the work of [16], and results show that the calendar aging of battery increases with higher temperature, and the SOC range around 50% gives longer useful life compared to higher SOCs. Considering the battery of grid application is normally under the sufficient cooling system, the temperature of 25 ËšC is guaranteed. As the SOC is varying during the real operation of the battery providing grid services, the calendar life development tendency is selected at 50% SOC. The regression results are shown in Table 3 and Fig. 6. Similar to the cycle life trajectory regression, the F3 function without crossing the initial capacity point is used, but the x input is time by month instead of cycle. At this stage, the cycle life and calendar life are represented by the regression functions, but the inputs are in different scopes, which are cycles and time. C. Relation between shallow cycle and calendar life With the smaller DOD, the battery degradation tends to be slower. It is logical when the DOD tends to zero, the battery degradation tends to the calendar life, which is the degradation without usage. We define the cycle with DOD less than 1% as the shallow cycle, which is derived from the rainflow counting results. To investigate the relation between shallow cycles and calendar life, the first step is to build the connection between SOC history with calendar time, and the second step is to apply the battery life testing data from similar battery cells to build the calendar life model. Fig. 3. Aging test and regression results of 20% DOD cycles Fig. 4. Aging test and regression results of 60% DOD cycles Fig. 5. Aging test and regression results of 100% DOD cycles Fig. 6. Aging test and regression results of calendar life The battery degradation under shallow cycles depends on calendar aging when the DOD is approaching 0, and the statistical behavior of shallow cycles helps to track the calendar time and to predict the battery calendar life. In our case, we separate the battery SOC records into groups with 10000 continuous seconds, to check the shallow cycle count distribution. As shown in Fig. 7, the counts follow the normal distribution, compared with the kernel density estimation and histogram. Since the normal distribution describes the count of cycles under 1 % well, the mean value of the count of cycles could be used to estimate the expectation of the number of shallow cycles. Specifically, the mean value of shallow cycles is 51.60, which represents 10000 seconds of frequency regulation service provision in our case. Fig. 7. Probability density of shallow cycles (DOD <1%) when battery providing frequency regulation service V. DEGRADATION MODEL FOR BATTERY PROVIDING GRID APPLICATION A. Methodology of cycle-calendar combined battery degradation modeling SOC Shallow cycle- calendar life relation Normal Cycles (>1% DOD) Shallow Cycles (<1% DOD) Cycle - cycle life relation SOH estimation Fig. 8. Process of cycle-calendar combined battery degradation modeling In Fig. 8, the cycle-calendar combined battery degradation modeling method is introduced. The normal cycle is used to address the conventional cycle aging and the shallow cycle is used to assess the calendar aging. After building the relationship between shallow cycles and calendar life, all required curve fitting results are ready for battery degradation estimation, with the cycle as the dependent variable. In Fig. 9 and Fig. 10, the fitted curve of cycle life with different DOD and approximated calendar life with 1 % DOD are plotted by cycles and EFC. On one hand, the smaller DOD leads to more cycles but not necessary more EFC, for example in Fig. 10, the 20% and 60% curves are proximate. On the other hand, the battery cannot provide infinite cycles when providing shallow cycles, as the limit is the calendar life. There is a significant difference between the battery testing duty profile and the real-life operation. The battery test duty profile is a repetition of test cycles and measurement cycles, while the real-life operation profile is based on the request of real-life BESS use cases, which are less regular. Conventionally, the rainflow counting algorithm is implemented to decompose the real-life operation SOC profile to get the cycle count for different DOD. The result of rainflow counting is a discrete array that counts the number of cycles in each DOD range, which can be used as the inputs for the aforementioned battery degradation model. Fig. 9. Degradation curve fitting results with cycle Fig. 10. Degradation curve fitting results with EFC Fig. 11. Frequency signal visualization of one year B. Case study results The battery SOC history of frequency regulation is selected to be assessed by the cycle-calendar combined battery degradation modeling. With the one-year recorded frequency data from the Nordic synchronous area in 2016 and the frequency response requirements, the battery is simulated to provide frequency containment reserve for normal operation (FCR-N) [17]. In Fig. 11, the dashed line indicates the response limits of FCR-N regulation service. In detail, the battery delivery power is proportional in the range of FCR-N limits and gives full power out of the FCR-N limit to curb the frequency disturbance. Depending on battery specification, control logic, and bidding strategy of the BESS, the SOC behaves very differently. The battery SOC simulation results of the first 5 days in the year with 0.5C are shown in Fig. 12. Since the battery energy capacity is relatively small and our strategy is to fulfill the power request as much as possible, the battery are frequently cycled with the large DOD. The one-year SOC simulation results are divided into 12 months and put into the rainflow counting algorithm with a DOD granularity of 1%. Cycles amount with DODs from 2% to 50%, 51% to 90%, and 90% to 100% are put into the 20% DOD, 60% DOD, and 100% DOD degradation regression functions respectively, which are built by the battery aging data. Since there are significant small cycles counts in the 20% DOD model, the amount of counting in this group is halved to avoid overestimation. In addition, the amount of 1% DOD cycles is put to the calendar aging model. Conventionally, the battery performance at the beginning of the life is better than the specification, and the SOH is set to 1 (or 100%) even it is over 1. Therefore, we use the battery capacity in month 1 as the reference point. The final degradation results are shown in Fig. 13 by a stacked bar chart. The SOH decrease is set to 0 at the beginning. The battery degrades quickly at the early stage, and the speed of degradation is decreasing at the later stage. The large cycles cause the majority of the degradation especially at the early stage, and the calendar aging is comparable to the small cycle aging. Fig. 12 Battery SOC record of first 5 days Fig. 13 Final degradation simulation results VI. CONCLUSION In this paper, we build the data-driven battery degradation model by battery aging test datasets of NMC battery cells. This work bridges the aging research of battery cells to the degradation analysis of the battery in grid applications. Various regression functions are compared and the degradation of various DOD is investigated. The cycle- calendar combined battery degradation model is proposed, which addresses the calendar life by the statistical behavior of the shallow cycles. Therefore, the SOC is sufficient to estimate battery degradation with the assessment of rain flow counting. The proposed method is used to assess the battery degradation of the BESS providing frequency regulation service in the Nordic synchronous area. Successful adoption of this work gives better flexibility to battery dispatching optimization since there is only one dependent variable, which is the battery operation cycle. REFERENCES [1] C. Zhao, S. Hashemi, P. B. Andersen, and C. Traholt, â€œData-driven State of Health Modeling of Battery Energy Storage Systems Providing Grid Services,â€ in 2021 11th International Conference on Power, Energy and Electrical Engineering (CPEEE), 2021, no. 64018, pp. 43â€“ 49. [2] R. R. Richardson, M. A. Osborne, and D. A. Howey, â€œGaussian process regression for forecasting battery state of health,â€ J. Power Sources, vol. 357, pp. 209â€“219, 2017. [3] K. A. Severson, P. M. Attia, N. Jin, N. Perkins, B. Jiang, Z. Yang, M. H. Chen, M. Aykol, P. K. Herring, D. Fraggedakis, M. Z. Bazant, S. J. Harris, W. C. Chueh, and R. D. Braatz, â€œData-driven prediction of battery cycle life before capacity degradation,â€ Nat. Energy, vol. 4, no. 5, pp. 383â€“391, May 2019. [4] W. Li, N. Sengupta, P. Dechent, D. Howey, A. Annaswamy, and D. U. Sauer, â€œOnline capacity estimation of lithium-ion batteries with deep long short-term memory networks,â€ J. Power Sources, vol. 482, p. 228863, 2021. [5] W. Diao, S. Saxena, and M. Pecht, â€œAccelerated cycle life testing and capacity degradation modeling of LiCoO2-graphite cells,â€ J. Power Sources, vol. 435, no. June, p. 226830, 2019. [6] B. Saha and K. Goebel, â€œBattery Data Set,â€ NASA Ames Prognostics Data Repository NASA Ames Research Center, Moffett Field, CA, 2007. [Online]. Available: http://ti.arc.nasa.gov/project/prognostic- data-repository. [7] C. R. Birkl, M. R. Roberts, E. McTurk, P. G. Bruce, and D. A. Howey, â€œDegradation diagnostics for lithium ion cells,â€ J. Power Sources, vol. 341, pp. 373â€“386, 2017. [8] M. S. Hosen, J. Jaguemont, J. Van Mierlo, and M. Berecibar, â€œBattery lifetime prediction and performance assessment of different modeling approaches,â€ iScience, vol. 24, no. 2, p. 102060, 2021. [9] G. dos Reis, C. Strange, M. Yadav, and S. Li, â€œLithium-ion battery data and where to find it,â€ Energy AI, vol. 5, p. 100081, Sep. 2021. [10] L. Cai, J. Meng, D. I. Stroe, J. Peng, G. Luo, and R. Teodorescu, â€œMultiobjective Optimization of Data-Driven Model for Lithium-Ion Battery SOH Estimation with Short-Term Feature,â€ IEEE Trans. Power Electron., vol. 35, no. 11, pp. 11855â€“11864, 2020. [11] V. Klass, M. Behm, and G. Lindbergh, â€œA support vector machine- based state-of-health estimation method for lithium-ion batteries under electric vehicle operation,â€ J. Power Sources, vol. 270, pp. 262â€“272, 2014. [12] ASTM E1049, â€œStandard practices for cycle counting in fatigue analysis,â€ ASTM Stand., vol. 85, no. Reapproved 2017, pp. 1â€“10, 2017. [13] J. Wang, S. Hashemi, S. You, and C. Troholt, â€œActive and reactive power support of MV distribution systems using battery energy storage,â€ in Proceedings of the IEEE International Conference on Industrial Technology, 2017, pp. 382â€“387. [14] L. Calearo, â€œProfitability of Frequency Regulation by Electric Vehicles in Denmark and Japan Considering Battery Degradation Costs,â€ 2020. [15] Y. Preger, H. M. Barkholtz, A. Fresquez, D. L. Campbell, B. W. Juba, J. RomÃ n-Kustas, S. R. Ferreira, and B. Chalamala, â€œDegradation of Commercial Lithium-Ion Cells as a Function of Chemistry and Cycling Conditions,â€ J. Electrochem. Soc., vol. 167, no. 12, p. 120532, Sep. 2020. [16] B. P. Matadi, S. GeniÃ¨s, A. Delaille, T. Waldmann, M. Kasper, M. Wohlfahrt-Mehrens, F. Aguesse, E. Bekaert, I. JimÃ©nez-Gordon, L. Daniel, X. Fleury, M. Bardet, J.-F. Martin, and Y. Bultel, â€œEffects of Biphenyl Polymerization on Lithium Deposition in Commercial Graphite/NMC Lithium-Ion Pouch-Cells during Calendar Aging at High Temperature,â€ J. Electrochem. Soc., vol. 164, no. 6, pp. A1089â€“ A1097, 2017. [17] â€œData from the power system | Statnett.â€ [Online]. Available: https://www.statnett.no/en/for-stakeholders-in-the-power- industry/data-from-the-power-system/.","libVersion":"0.3.1","langs":""}