{"path":"lit/lit_sources.backup/Subramanya21vppAggPVnEurFreq.pdf","text":"energies Article A Virtual Power Plant Solution for Aggregating Photovoltaic Systems and Other Distributed Energy Resources for Northern European Primary Frequency Reserves Rakshith Subramanya 1,* , Matti Yli-Ojanperä 1, Seppo Sierla 1 , Taneli Hölttä 1, Jori Valtakari 2 and Valeriy Vyatkin 1,3,4 \u0001\u0002\u0003\u0001\u0004\u0005\u0006\u0007\b\u0001 \u0001\u0002\u0003\u0004\u0005\u0006\u0007 Citation: Subramanya, R.; Yli-Ojanperä, M.; Sierla, S.; Hölttä, T.; Valtakari, J.; Vyatkin, V. A Virtual Power Plant Solution for Aggregating Photovoltaic Systems and Other Distributed Energy Resources for Northern European Primary Frequency Reserves. Energies 2021, 14, 1242. https://doi.org/10.3390/en14051242 Academic Editor: Seppo Valkealahti Received: 3 February 2021 Accepted: 18 February 2021 Published: 24 February 2021 Publisher’s Note: MDPI stays neutral with regard to jurisdictional claims in published maps and institutional afﬁl- iations. Copyright: © 2021 by the authors. Licensee MDPI, Basel, Switzerland. This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC BY) license (https:// creativecommons.org/licenses/by/ 4.0/). 1 Department of Electrical Engineering and Automation, School of Electrical Engineering, Aalto University, FI-00076 Espoo, Finland; matti.yli-ojanpera@aalto.ﬁ (M.Y.-O.); seppo.sierla@aalto.ﬁ (S.S.); taneli.holtta@aalto.ﬁ (T.H.); valeriy.vyatkin@aalto.ﬁ (V.V.) 2 Siemens Osakeyhtiö, 02600 Espoo, Finland; jori.valtakari@siemens.com 3 SRT, Luleå University of Technology, 97187 Luleå, Sweden 4 International Research Laboratory of Computer Technologies, ITMO University, 197101 St. Petersburgh, Russia * Correspondence: rakshith.subramanya@aalto.ﬁ Abstract: Primary frequency reserves in Northern Europe have traditionally been provided with hydro plants and fossil fuel-burning spinning reserves. Recently, smart distributed energy resources have been equipped with functionality needed to participate on frequency reserves. Key categories of such resources include photovoltaic systems, batteries, and smart loads. Most of these resources are small and cannot provide the minimum controllable power required to participate on frequency reserves. Thus, virtual power plants have been used to aggregate the resources and trade them on the frequency reserves markets. The information technology aspects of virtual power plants are proprietary and many of the details have not been made public. The ﬁrst contribution of this article is to propose a generic data model and application programming interface for a virtual power plant with the above-mentioned capabilities. The second contribution is to use the application programming interface to cope with the unpredictability of the frequency reserve capacity that the photovoltaic systems and other distributed energy resources are able to provide to the frequency reserves markets in the upcoming bidding period. The contributions are demonstrated with an operational virtual power plant installation at a Northern European shopping center, aggregating photovoltaic Primary Frequency Reserves resources. Keywords: solar power; virtual power plant; application programming interface; primary frequency reserve; frequency containment reserve; demand response; forecasting; machine learning; neural network 1. Introduction One signiﬁcant trend in the transition to renewable energy is that the need for PFR (Primary Frequency Reserves) increases due to the penetration of Photovoltaic (PV) and wind power generation, while conventional providers of PFR, namely fossil fuel burning plants with spinning reserves, are being replaced by renewable energy sources [1]. In response to this trend, there is a booming body of research on innovative solutions for providing PFR with smart loads (e.g., [2,3]), wind power generators (e.g., [4,5]), and electric vehicles or other battery storages (e.g., [6,7]). One major constraint that is often neglected in academic research is that the minimum capacity requirement for the PFR market must be met. For example, in the Finnish PFR markets Frequency Containment Reserve for Normal Operation (FCR-N) and Frequency Containment Reserve for Disturbances (FCR-D), the minimum capacity of one bid is 0.1 Megawatt (MW) and 1 MW, respectively [8]. Thus, aggregation of the PFR providing reserve resources by a Virtual Power Plant (VPP) or similar solution is necessary for all Energies 2021, 14, 1242. https://doi.org/10.3390/en14051242 https://www.mdpi.com/journal/energies Energies 2021, 14, 1242 2 of 23 energy resources that do not by themselves satisfy such requirements. However, real-world VPPs remain proprietary solutions with little publicly available documentation. In order to catalyze research in this area, the goal of this paper is to propose an architecture and data model for a generic VPP application programming interface to encapsulate proprietary details of commercial VPPs. One major use case for the virtual power plant application programming interface is energy forecasting. Several machine learning forecasting applications relevant to virtual power plants have been proposed for wind power generation [9]; photovoltaic power gen- eration [10]; electric vehicle charging load [11]; electric vehicle battery state-of-charge [12]; battery storage state-of-charge [13]; and Heating, Ventilation and Air Conditioning (HVAC) load [14]. This article demonstrates the use of the virtual power plant application program- ming interface for one energy forecasting application. However, the contribution of the article is not the forecasting solution. The contribution is the virtual power plant informa- tion architecture, data model, and application programming interface, which support the development of energy forecasting applications beyond the one presented in this paper, such as the ones referenced above, as well as other analytics applications exploiting virtual power plant data. This paper is structured as follows. Section 2 reviews related works and places the currently limited research on photovoltaic PFR into the context of emerging types of PFR. Section 3 presents our proposal for an architecture and data model for a generic VPP application programming interface. Section 4 presents use cases for the VPP application programming interface. Section 5 describes technology choices for implementing the archi- tecture and data model in Section 3 for our case study. Section 6 applies the VPP application programming interface to realize the use cases in the context of an operational virtual power plant installation at a Finnish shopping center, aggregating photovoltaic and other PFR resources. Section 7 discusses the exploitation scenarios of the results. Section 8 concludes the paper. 2. Related Research 2.1. Primary Frequency Reserves Markets Technical requirements for PFR originate from an era in which fossil fuel-based so- lutions were used to provide the PFR. As the power system inertia is impacted by the penetration of wind and photovoltaic generation, authors are calling for shorter response time requirements in the provision of frequency reserves [15,16]. The emergence of new solutions for PFR, such as controllable loads, offers a solution for meeting such require- ments [17]. Since the loads can have much faster response time than generators, due to a lack of inertia, proposals have been made to redesign the established market and control mechanisms for PFR. Li et al. [18] redesigned the PFR market mechanism to account for the response time in the valuation of offers. Liu & Du. [19] approached the problem by proposing separate markets for generators and loads participating in PFR, so that the pro- curement of resources on these two markets is coordinated. However, this article focusses on existing markets, since data from the operation of existing PFR solutions on existing markets is required to solve the research problem. 2.2. Novel Solutions for Primary Frequency Reserves 2.2.1. Smart Loads The development of a smart load capable of providing PFR requires innovation that takes into account the speciﬁc characteristics of the load, so that the PFR can be provided without compromising the primary function of the load. Liu et al. [20] proposed an approach for controlling Light-Emitting Diode (LED) luminaires to obtain the PFR while maintaining user satisfaction within acceptable limits. Several different solutions have been presented to aggregate refrigerators while maintaining the temperature of each refrigerator in the desired range [2,21,22]. Zhao et al. [23] proposed a more general solution for thermostatically controlled loads. Wu et al. [3] generalized further to HVAC loads. Energies 2021, 14, 1242 3 of 23 Biegel et al. [24] proposed an even more general approach for an aggregator managing on/off loads, but this does not take into account the speciﬁc constraints of each type of load. Perroy et al. [25] analyzed diverse industrial loads, capture their constraints for providing PFR, and develop a pooling system for aggregating such loads for the provision of PFR. In contrast, De Carne et al. [26] did not try to tailor a control strategy for any particular type of load but perform load sensitivity identiﬁcation to determine a PFR control strategy with limited impact to the primary usage of the load. Weckx et al. [27] assumed the availability of utility functions, which capture the inconvenience to end users from using their devices for PFR. 2.2.2. Energy Storages In addition to smart loads, energy storage systems have been proposed as a solution for PFR in a scenario where conventional power generation is replaced by wind and photo- voltaic generation [28]. Knap et al. [29] determined the minimum size for the storage to cope with a certain volume of wind power generation. If batteries are not dedicated for the purpose of PFR, probabilistic methods are needed to minimize the risk of PFR interfering with the primary purpose of the battery [7]. Electric vehicles are notable examples of such batteries, and speciﬁc solutions have been developed for their use to provide PFR. Izadkhast et al. [6] proposed using the rapid load-shedding capability of electric vehicle chargers in order to rapidly react to frequency deviations, so that as soon as the conven- tional PFR reserves are activated they will relieve the chargers. Kariminejad et al. [30] proposed a hierarchical control of conventional fossil fuel reserves and electric vehicles to minimize the utilization of electric vehicles for PFR. Srinivasan et al. [31] noted that battery storages are generally too small for PFR unless they are aggregated. 2.2.3. Photovoltaic and Other Sources of Renewable Power Generation The adaptation of wind power generators for the provisioning of PFR is feasible and necessary [32–34]. Several variations of droop control have been proposed for wind genera- tors [4,5,35,36]. Several authors argue that such approaches need to be complemented with battery storage system in the case of wind [37,38] and photovoltaic power generation [39]. Molina-García et al. [40] complement wind generator PFR with PFR capable smart loads. You et al. [41] analyzed the opportunity cost of lost power generation resulting by provid- ing PFR with wind or photovoltaic power generators, and call for economic comparisons with other approaches, such as the use of smart loads and energy storages for PFR. While wind power applications dominate the research on PFR provisioning by re- newable power generators, a few works exist related to hydro power. Saarinen et al. [42] noted that hydro plants are already being used for PFR and analyze the economic tradeoff of providing PFR versus selling power to the spot market. Spitalny et al. [43] proposed small hydro plants developed speciﬁcally for PFR. Ahmed et al. [44] noted the possibility of providing PFR from pumped storage hydro. 2.3. Managing Primary Frequency Reserves with a Virtual Power Plant It is important to distinguish between Demand Response (DR) and PFR. In a recent survey on DR, Vardakas et al. [45] identiﬁed frequency-controlled DR such as PFR as one exotic type of DR. Thus, it is unsurprising that the great majority of VPP solutions for managing DR focus on other types of DR, namely various price-based or incentive-based programs offered to consumers (e.g., [46–48]). Few researchers address the management of PFR capable resources with a VPP. Abbasi. [49] deﬁnes PFR-capable loads as DR loads, to be managed by a VPP doing business directly with a transmission system operator. Srinivasan et al. [31] recognize the need for a virtual power plant managing batteries capable of providing PFR, since the individual batteries are generally too small to partic- ipate on such markets directly. Molina-Garcia et al. [50] proposed a speciﬁc solution for aggregating several small consumer-owned DR-capable loads to meet PFR market require- ments. Although the research on managing PFR with a VPP is currently very limited, if the Energies 2021, 14, 1242 4 of 23 research reviewed in Section 2.2 results in practical implementations, there will be a need for VPP-like solutions to aggregate and trade these solutions on PFR markets. In order to trade proﬁtably, forecasts will be required, as discussed in the next section. The primary users of the virtual power plant application programming interface would be developers of advanced functionalities to the virtual power plant, especially related to participation on PFR markets. For example, PFR market price and asset capacity forecasts could be developed by third parties and integrated to the virtual power plant through the proposed virtual power plant application programming interface. Regarding the applicability of the results to other system integrations, the following areas of further research are identiﬁed. Calvillo et al. [51] presented an overview of smart city energy management systems such as power grid simulators; the integration of a virtual power plant through our proposed interface could work as a one-way solution (datasets are extracted as input to the simulator), but not as a two way solution as generally commercial virtual power plant packages cannot be expected to have simulation capability. However, our solution could integrate to provide Key Performance Indicators (KPIs) to an urban control center [52]; the asset operational reliability quantiﬁed in use case 1 is an example of a possible KPI. Currently, commercial virtual power plants in general, and in our case study in particular, are focusing on electric systems, but in case of extensions to district heating and combined heat and power production, it would be necessary to assess the applicability of our proposed data models to multicommodity smart energy systems [53]. Under current PFR market participation rules, especially in the case study country Finland, virtual power plants are not expected to coordinate; however, the auction-based PFR mar- ket may not be optimal from an energy management perspective, so further research on novel PFR markets could be undertaken based on concepts of interactively cooperating virtual power plants [54]. Finally, one essential system integration for any virtual power plant is the integration to the system managing the distributed energy resources. Exam- ples of such systems to be integrated include microgrid controllers, battery management systems, and building automation systems [55,56]. The Representational state transfer (REST) Application Programming Interface (API) presented in this article is one possible integration technique; however, the industry standard IEC 104 may be better supported by such systems. 2.4. Forecasting Problems in the Context of Primary Frequency Reserves Prior to deﬁning the forecasting problem in further detail, some terms need to be deﬁned. Before providing the deﬁnitions, an example is provided. In several European countries, and especially in Northern Europe, PFR are called Frequency Containment Reserves (FCR) [22,25,42,57]. Taking the Finnish FCR markets as a concrete example of national PFR markets, the Transmission System Operator, which operates the market, runs an auction on the previous day in which participants bid certain capacities at certain prices for the hours of the next day [8]. If bids are accepted, the bidder is required to monitor the local grid frequency and activate reserve in the case of frequency deviations according to the technical speciﬁcation of FCR [58]. It is notable that the Transmission System Operator compensates bidders according to the bids and for their reserve capacity at the market clearing price, regardless of whether any activations occurred [8]. If the reserve could not be provided during frequency deviations, the market rules also specify a penalty payment [8]. The following definitions are used in this article. These are in line with Nordic PFR market operator terminology in general and Finnish PFR markets specifications in particular: 1. The capacity of PFR reserves is deﬁned as the power that is standing by, ready to be controlled in the event of a frequency deviation. Thus, the capacity is a ﬁxed value for the duration of the bidding period, which is 1 h in the case of Finnish FCR. a. The operator of the PFR market, usually a Transmission system operator, needs to forecast the needed PFR capacity in order to decide how much to procure for the upcoming bidding period. Energies 2021, 14, 1242 5 of 23 b. The participant to the PFR market, for example a Virtual Power Plant operator, needs to forecast the available capacity from the resources under its control, in order to bid proﬁtably, to exploit the PFR capacity as fully as possible, and to ensure that it can honor its bids, should they be accepted by the market operator. 2. The activation of PFR reserves is the actual change in power consumption or genera- tion that is required in response to a frequency deviation that may occur during the delivery period. 3. The price of PFR reserves is the price that the market operator pays for accepted bids, regardless of whether activations occurred. 4. The penalty is the payment that a bidder must pay to the market operator, in case the bid was accepted, and activations occurred, but the PFR reserve could not be provided. In order to use the PFR reserves proﬁtably on the PFR market, it is desirable to forecast the capacity, activation, and price as well as the likelihood of incurring penalties. Based on such forecasts, intelligent decision making would be possible. However, most publications that discuss forecasting in the context of PFR do not address the items 1–4. One reason for the existence of PFR is to cope with errors in load forecasting, which result in the wrong quantity of electricity generation being procured, resulting in imbalance of electricity production and consumption, which can be managed at delivery time by PFR (e.g., [59–61]). However, much research has already been done on load forecasting (e.g., [62,63]), which is a separate problem from forecasting capacity, activation, price, and penalty as deﬁned above. A few publications address forecasting the items 1–4. Relevant to 1a are forecasts of PFR capacity required to cope with the variability of photovoltaic power generation [64]. In contrast, Wang et al. [32] forecasted the reserves that can be provided by PFR capable wind power generators, relevant to 1b. Srinivasan et al. [31] considered a virtual power plant managing diverse resources capable of providing PFR. Their approach involves creating a control signal forecast for a model predictive controller, which can be categorized as activation forecasting as deﬁned in 2. Giovanelli et al. [57,65] forecasted prices for FCR, relevant to 3. No works have addressed item 4, penalty forecasting, although such a forecast could be constructed by combining forecasts for 1b and 2. A limited body of research for machine learning applications addresses PFR directly. Giovanelli et al. [57] assesses the use of a classic neural network and [65] performs a com- parative assessment of the performance of non-neural network approaches, namely GBDT (Gradient Boosting Decision Tree), SVR (Support Vector Machine), Linear Regression, and Regression Tree. However, there is no direct comparison between neural network and non-neural network-based approaches in this context. The machine learning solutions pre- sented in this article are provided for exemplary purposes and are similar to the approach presented in [57]. Other more advanced machine learning approaches in the broader ﬁeld of energy forecasting are potential areas for further research in PFR-related forecasting applications. Liu et al. [66,67] address a signiﬁcant shortcoming in the said articles, namely a systematic method for determining the signiﬁcance of each input feature on the forecast quality; the approach could be applicable to the present article for an example related to selecting the key weather features from a large set of available weather features. The machine learning research on PFR is currently focusing on short term forecasting, but further work on long term forecasting with neural networks could beneﬁt from model migration techniques [68]. As virtual power plants manage resources with unpredictable behavior, such as electric vehicle batteries, the forecasts would ideally be accompanied with an uncertainty metric. Kempitiya et al. [69] propose such a metric for PFR price forecasting as well as bidding logic that exploits the forecasts as well as the uncertainty metrics to achieve increased revenues from the PFR markets. Other uncertainty metrics could also be applied from the literature in machine learning solutions for energy forecasting. Gaussian process regression has been applied to determine conﬁdence intervals for the predictions [70–72]. A topic for further research would be PFR market bidding algorithms that are able to utilize the Energies 2021, 14, 1242 6 of 23 conﬁdence intervals to maximize market revenue while minimizing the risk of failing to deliver the offered capacity. 2.5. Northern European Primary Frequency Reserves Markets: Current Status and Future Trends The Nordic countries are Finland, Denmark, Iceland, Norway, and Sweden. Due to its geographical isolation, Iceland is not part of the Nordic electrical power markets, though. The remaining countries have evolved a so-called Nordic markets model or power market structure, see e.g., [73], which consists of: 1. Financial market (Nasdaq Commodities), from 10 years down to 1 day ahead of the physical delivery of the power 2. Day-ahead markets (aka Elspot in case of Nord Pool), 1 day ahead of physical delivery 3. Intraday markets (aka Elbas similarly), on the day of physical delivery, and 4. Reserve and balancing power markets, elaborated below. Finally, imbalance settlement is done on Nordic level post-delivery, to account for differences between plans, forecasts, or trades and actual deliveries. Denmark will fully join this Nordic settlement activity by 2021 [74]. Currently, the time resolution of the electrical power markets in the Nordics is hourly, so the trading, delivery, and settlement will be distinct for every hour of the day (see e.g., [74–77]). The Nordic reserve and balancing power markets, a.k.a. ancillary services markets, are currently the following throughout the region [78–81]: 1. Fast frequency reserve (FFR), a national day-ahead market in select seasons 2. Frequency containment reserve for normal operation (FCR-N), national yearly, and day-ahead markets 3. Frequency containment reserve for disturbances (FCR-D), mainly national yearly and day-ahead markets (the Transmission System Operator (TSO) may also purchase capacity from neighbouring countries) 4. Automatic frequency restoration reserve (aFRR), a Nordic hourly market in select hours 5. Manual frequency restoration reserve (mFRR), a Nordic hourly market The time resolution of all the reserve and balancing power markets in the Nordics is also hourly, and it will become quarterly, as with the Nordic power markets [82]. This is related in part to European harmonization of energy markets. From a grid balancing point of view, the EU’s whole Internal Energy Market is split up into different synchronous areas. Synchronous areas are deﬁned as ‘areas covered by syn- chronously interconnected TSOs, such as the Nordic synchronous area’ [83]. Synchronous areas are mainly important for the fastest types of reserves, in Europe called Frequency Containment Reserves (FCR), which are dimensioned and operated at this scale [84]. The main task of the FCR is to dampen/stop a sudden drop or rise in system frequency. The international concept of primary frequency reserves corresponds with the Euro- pean concept of FCRs. In the Nordic synchronous area, the primary frequency reserves cover the FFR, FCR-N, and FCR-D markets. The main features of these markets are sum- marized in Table 1. 2.6. Summary According to the research that has been reviewed in this section, a signiﬁcant number of smart solutions are being developed to equip distributed energy resources with a PFR participations capability. An analysis of the PFR market speciﬁcations reveals that the minimum bid size in MW signiﬁcantly exceeds the capacity of most distributed energy resources, so a solution such as a virtual power plant is needed to aggregate the resources and meet the minimum bid size. Key tasks related to bidding, such as forecasting the available capacity, require data from the virtual power plant. There is a lack of research on virtual power plant information architectures, data model, and application programming interfaces, and this is an obstacle towards applying the emerging body of literature on PFR Energies 2021, 14, 1242 7 of 23 provided by distributed energy resources. The contribution of this article is to overcome this obstacle and to encourage further research in the area, possibly resulting in eventual standardization of interfaces and data models. Table 1. Main features of the Nordic primary frequency reserve markets [79,85–92]. FCR-N FFR FCR-D Market area National National National Bid submittal by 18:30 (EET) 18:00 (EET) 18:30 (EET) Minimum capacity 0.1 MW 1 MW 1 MW Maximum capacity 5 MW per bid 10 MW (13.5 MW) per bid 10 MW per bid Control capability Linear or piecewise linear Single step activation Linear, piecewise linear or single step activation To begin from 0.01 Hz deviation −0.3 or −0.4 or −0.5 Hz deviation −0.1 Hz deviation (or see spec re: single step activating assets) Activation speed Max 180 sec where 0.1 Hz Max 0.7 or 1.0 or 1.3 s respectively Max 5 sec 50% of cap., max 30 s 100% where −0.5 Hz Activation duration (sustain) Continuous (at least 30 min) Min 5 sec or 30 sec, max as long as deviation > −0.2 Hz Continuous (at least 30 min) Deactivation When deviation < 0.01 Hz Max 20%/sec or not limited, set by min Activation duration When deviation < 0.1 Hz for 3 min Recovery wait N/A Min 10 sec N/A Recovery power N/A Max 25% of capacity, earliest 10 s from end of Deactivation. N/A Re-activatable Any time during delivery period In max 15 min In max 15 min (or see spec re: energy storages) Direction Symmetric Upregulation only Upregulation only Example technologies Industrial process, heating, lighting Electrolysis, EV batteries, UPS Industrial process, heating, lighting Price formation Margin price principle Margin price principle Margin price principle Energy fee/cost Energy fee per mFRR price No energy fee received Energy fee per mFRR price 3. Architecture and Data Model for a Generic VPP Application Programming Interface 3.1. Architecture An overview of the architecture is presented in Figure 1. The generic VPP API is built on top of the underlying commercial VPP to encapsulate its proprietary details. For security reasons, neither the VPP nor the generic API are exposed to a public network. The communication to frequency reserve markets is opened only for those VPPs that have an agreement with the TSO. VPP client interfaces between the VPP and the REST API are described in Section 3.3. The client accesses whatever proprietary interface that is provided by the VPP to get the data. It converts the data to comply with the REST API speciﬁcation and passes it to the REST API, and vice versa for the data ﬂow from the generic API to the VPP. This provides the possibility to use the same generic API with any VPP. Only the VPP client needs to be built and conﬁgured for each different VPP. Generic VPP API consists of a relational database, a REST API, and preprocessing. The relational database is used to persist the data retrieved from the VPP, and its data model is presented in Section 3.2. The REST API provides endpoints to create, retrieve, update, and delete all the necessary data. The REST API also provides the ability to retrieve extensive time series datasets that can be used in the capacity forecaster and to provide data for reports and analytics. Preprocessing is used to create those datasets. It unites multiple timeseries into one table and resamples the data to a speciﬁed frequency. The preprocessing can also calculate minimum, maximum, and average values as well as sums, differences, and multiplications. Examples of these calculations are presented in Section 4.1. The REST API is explained in more detail in Section 3.3. Market forecaster is used to forecast the price of PFR reserves for each market interval of the upcoming bidding period. An applicable solution has been presented in previous research [57], based on supervised machine learning and using open data sources to teach the model and to make the predictions. Energies 2021, 14, 1242 8 of 23 Capacity forecaster is used to predict the available capacity that the VPP can use to participate in PFR markets. Capacity in this context is according to the deﬁnition in Section 2.4. There is a lack of previous research for this purpose, but a solution is presented in this article, based on supervised machine learning. Relevant data shall be retrieved from the VPP through the VPP client to teach the model and make the predictions. Open data sources can be used to enhance the accuracy of the model; for example, solar radiation data from the local meteorological institute is relevant for predicting the capacity of photovoltaic reserve resources participating on PFR markets. Figure 1. Overview of the architecture of the proposed generic VPP API. 3.2. Data Model The data model is described in the Uniﬁed Modeling Language (UML) class diagram in Figure 2. Each class has a corresponding table in the database and each attribute has a corresponding column in the table. Datapoint is used to store timeseries data. Each datapoint has a timestamp ﬁeld and value ﬁeld. It also has a foreign key to measurement type and measurement point. MeasurementType is used to store the metadata of all the different types of timeseries data that are stored. The main types of timeseries are forecasts and measurements. Each MeasurementType has a reference to the identiﬁcation information the MeasurementType has in the VPP. The ﬁeld data_after speciﬁes the starting date of the cached data. MeasurementPoint is a super class for Asset and ControlArea. This allows use of the same DataPoint model to store both asset- and control area-related time series data. Each MeasurementPoint has a reference to the identiﬁcation information the MeasurementPoint has in the VPP. Asset is used to store the metadata of all different assets that have the capability to function as reserve resources on the PFR markets. Examples of such assets were reviewed in Section 2.2. ControlArea is used to store the metadata of all different control areas. A control area pools a set of assets that can be aggregated to a single offer to a frequency reserve market. Each ControlArea has a reference to the identiﬁcation information the ControlArea has in the VPP. It is also used to maintain an up-to-date list of Markets the ControlArea is used to participate in. Energies 2021, 14, 1242 9 of 23 Figure 2. UML Class diagram of the data model. Market is used to store the metadata of different frequency reserve markets. Each Market has a reference to the identiﬁcation information that the Market has in the VPP. TransactionType is an enumeration with two possible values: ‘offer’ or ‘order’. Offer is a term that VPP systems use to refer to the bids discussed in Section 2.4. Order is an offer that has been accepted by the market operator. MarketTransactions is used to store the time series data of offers and orders of different markets. In this context, offers are bids made to a frequency reserve market and orders are bids that the TSO has accepted. Each MarketTransaction has market, type, status, price, quantity, start, and period ﬁelds. Market ﬁeld is a foreign key to a Market. Price ﬁeld is as deﬁned in Section 2.4. Quantity in this context is the capacity deﬁned in Section 2.4. Start ﬁeld is the start time of the bid. Period ﬁeld is the bidding period as deﬁned in Section 2.4. AssetEnrollment is used to maintain an up-to-date list of assets that are able to partici- pate as reserve resources in a given market at a given time. Each AssetEnrollment has a start and end time and foreign key references to Market and Asset. AssetAssignment is used to store the time period when a speciﬁc asset participated in market activation in a speciﬁc ControlArea. Each AssetAssignment has start and end times and foreign key references to ControlArea and Asset. Activation in this context is as deﬁned in Section 2.4. The assignment information is needed for reporting to the TSO. 3.3. REST API REST has become a well-established technology for implementing Information Tech- nology (IT) systems according to the Service-Oriented Architecture paradigm (e.g., [93,94]), and it is used broadly in commercial VPPs, such as the VPP in our case stsudy. For each class in Figure 2, with the exception of the superclass MeasurementPoint, the following REST API endpoints are deﬁned. This is an example for the Asset class: • GET/assets/ • GET/assets/{ref}/ • GET/assets/{ref}/data • POST/assets/ • PATCH/assets/{ref}/ • PUT/assets/{ref}/ Energies 2021, 14, 1242 10 of 23 • DELETE/assets/{ref}/ There are three GET endpoints. The ﬁrst one lists all the assets conﬁgured into the VPP. The following is an example of the JSON (JavaScript Object Notation) output in the case of a VPP with two assets: [ { “udc_id”: “CHP1”, “sub_type”: “Generation”, “active”: true, “id”: 1, “type”: “VPP”, “ref”: 51, “status”: “Active”, “data_after”: “2020-06-03 11:45:00” }, { “udc_id”: “Building1”, “sub_type”: “Load”, “active”: true, “id”: 2, “type”: “VPP”, “ref”: 52, “status”: “Active”, “data_after”: “2020-06-03 11:45:00” } ] The second GET returns the unique asset with the unique id ‘ref’ (ref is a ﬁeld of Asset’s superclass MeasurementPoint in Figure 2.) The third GET is only available for those classes in Figure 2 that have timeseries data, namely Asset, ControlArea, and Market. It returns the timeseries for all of the MeasurementTypes associated with the said class. There are three endpoints that are used to modify the assets: POST, PATCH, and PUT. The POST endpoint is used to add a new asset. PATCH and PUT endpoints are used to update the assets. The PUT endpoint requires that data for all ﬁelds of an asset are submitted; with the PATCH endpoint, it is possible to submit a partial modiﬁcation to one or more ﬁelds. The DELETE endpoint is used to delete an asset. 4. Use Cases The applicability of the proposed virtual power plant application programming inter- face is demonstrated with two use cases. The ﬁrst use case is the operational reliability of an asset. Its objective is to determine an indicator that captures how well an individual asset has delivered its forecasted PFR capacity. This is of interest to several actors. Firstly, a maintenance manager is able to target maintenance activities to assets that score poorly on this indicator. Secondly, the trader on PFR markets is able to use this information to assess the likelihood of the assets failing to deliver the forecasted capacity, and to take this into account when deciding the capacity to bid on the PFR market. Thirdly, the virtual power plant operator and the asset owners need to have an agreement about how the revenues from the PFR market are shared. The operational reliability of an asset is one possible metric that can be used to determine the shares. The presentation in Section 4.1 is applicable to any asset managed by the virtual power plant. The case study in Section 6.1 is speciﬁc to a battery storage asset. The second use case is a forecast of the PFR capacity of an asset. Its objective is to deliver forecasts of the capacity for all intervals of the upcoming bidding period. The PFR market in several countries, including the case study country Finland, is day-ahead and hourly, so one capacity forecast is needed for each hour of the next day. The main actor for this use case is the trader, since the trader must specify the capacity in the bid for each hour, as speciﬁed in Sections 2.4 and 2.5. The trader’s objective is to maximize Energies 2021, 14, 1242 11 of 23 the capacity, and thus the revenue, while avoiding penalties related to situations in which the asset is not able to fully deliver the capacity speciﬁed in the bid. The presentation in Sections 4.2 and 5 is generally applicable to virtual power plant assets and needs to be adapted to a speciﬁc asset type through the selection of relevant input features to the machine learning forecaster. Section 6.2 presents the relevant inputs to the photovoltaic asset capacity forecaster. 4.1. Use Case 1: Operational Reliability of Virtual Power Plant Assets The operational reliability of an asset is calculated in the preprocessing module of Figure 1. The deﬁnition of capacity in Section 2.4 is elaborated as follows: • CapacityNeg: If the asset is a load, this is the adjustable additional power consumption that can be activated in over frequency events. If the asset is a generator such as a PV panel, this is the adjustable curtailable power production. • CapacityPos: If the asset is a load, this is the adjustable curtailable power consumption that can be activated in underfrequency events. If the asset is a generator, this is the additional power production that can be activated. • ForecastCapacityPos: This is the forecasted CapacityPos. • ForecastCapacityNeg: This is the forecasted CapacityNeg. A special case of an asset is an energy storage. A storage may participate on PFR markets by curtailing its charging power, in which case it behaves in the same way as a load, and the curtailable power is speciﬁed by CapacityPos; in case the storage is able to increase its charging power in an overfrequency event, the possible power increase is speciﬁed by CapacityNeg. In case the storage is able to provide power to the grid through a grid inverter, it acts as a generator, and the provided power is speciﬁed by CapacityPos. The third GET in the REST API in Section 3.3 can be used to obtain the timeseries for all of the MeasurementTypes associated with the Asset class, including the types in the above list. In commercial VPPs, the operational reliability of an asset is a metric of how well it actually delivers its forecasted capacity. It is deﬁned as follows: Min(CapacityPos, CapacityNeg)/Min(ForecastCapacityPos, ForecastCapacityNeg) 4.2. Use Case 2: Reserve Capacity Forecasting An advanced feature of a virtual power plant is to forecast the ForecastCapacityPos and ForecastCapacityNeg timeseries (deﬁned in Section 4.1). Such forecasts are useful for the VPP when it bids on the frequency reserves markets. Since the CapacityPos and CapacityNeg timeseries (deﬁned in Section 4.1) are available through the REST API, a supervised learning type of machine learning forecast is possible. This approach will be applicable to all kinds of reserve resources managed by the VPP, which have been prequaliﬁed for the frequency reserves markets. Such reserves include PV, batteries, electric vehicles, and building automation loads. 5. Implementation The box with the label Capacity forecaster in Figure 1 is implemented as follows. Supervised learning is applied to the time series forecasting problem deﬁned in Section 4.2. The approach is similar to [57], but without the restrictive assumption that the AI model is trained once per day and then used to make predictions for each hour of the next day. The goal is to provide predictions for a time series at intervals called epochs. In the results section of this paper, the epoch is 1h, which is the bidding interval of frequency reserves markets in Finland. In supervised learning, the model is trained with a labelled set of training samples. In time series forecasting, there is one sample for each epoch. A matrix Xtrain is constructed with one row for each feature and one column for each epoch. The labels are the correct values for the time series to be predicted for the said epochs and they are stored in a one-column matrix Ytrain. Since the goal is to obtain the values for the ForecastCapacityPos Energies 2021, 14, 1242 12 of 23 and ForecastCapacityNeg timeseries (deﬁned in Section 4.1), the labels are CapacityPos and CapacityNeg, respectively (deﬁned in Section 4.1). The most recent epoch in the training set cannot be any more recent than the most recent epoch for which the label would be available, if the solution would be deployed in real time. When Xtrain and Ytrain are available, it is possible to train an AI model. The model architecture and hyper-parameters are based on time series forecasting research in this domain [57]. A three-layer classic neural network is used. Both hidden layers are followed by a ‘dropout’ layer for the purpose of regularization, i.e., preventing the model from overﬁtting to the training samples. Table 2 provides additional information for AI practitioners who may wish to reproduce the results. The Adam optimizer is used to ensure the convergence of neural network training. Table 2. Neural network architecture and hyper-parameters. Layer Type Number of Nodes Dropout Activation Function 1st hidden layer Dense Same as input layer 0.4 tanh 2nd hidden layer Dense 24 0.4 tanh Output layer Dense 1 No dropout relu The purpose of AI is to obtain the values for a set of future epochs for the time series to be predicted. This is a column matrix Ypred. Thus, a matrix Xpred is constructed, which is otherwise similar to Xtrain but has the values for the said future epochs. Thus, all features must be selected in such a way that data are available for those epochs. If this is not the case, the following feature engineering technique can be used: a time shift is applied, such as using the data from the day before. The same time shift applies to Xpred and Xtrain. Figure 3 shows the data ﬂows. Xtrain and Ytrain are used to ﬁt the model. Xpred and Xtrain are concatenated before normalization, so that the training data and Xpred have the same statistical properties. In our implementation, X had features in rows and Ypred is a column vector, so X is transposed before model ﬁtting. Xpred is given as an input to the ﬁtted model, which outputs the forecasts Ypred. Since the research is conducted with historical data, the actual values Yreal were also available and have been plotted in the results section alongside the forecasts. Figure 3. Data ﬂows for training the machine learning model and using it to make forecasts. Energies 2021, 14, 1242 13 of 23 The implementation of the Database in Figure 1 is as follows. Django is a high-level Web application development framework broadly used in industry and academia (e.g., [95,96]). It has been used to implement the data model in Figure 2. This means that the data model consists of multiple Django models. A Django model is the single, deﬁnitive source of information about the data. It contains the essential ﬁelds and behaviors of the stored data. Each model maps to a single database table and each model is a Python class that subclasses django.db.models.Model. In use case 1, the ForecastCapacityPos, ForecastCapacityNeg, CapacityPos, and Ca- pacityNeg are obtained from the virtual power plant through our API. In use case 2, the matrix Y data is likewise obtained from the virtual power plant. The matrix X uses weather data from the relevant region as input features to the neural network; the data is obtained from the Finnish Meteorological Institute open API https://en.ilmatieteenlaitos.ﬁ/open- data-sets-available (accessed on 22 February 2021). The trading interval for PFR in the case country Finland is hourly, so the datasets have one datapoint per hour. Further research may utilize additional data from the control systems of the distributed energy resources. In the case of sensor data from control systems, there will be a large number of data points per hour, so these need to be preprocessed to obtain one data point per hour. One direction of further research is preprocessing solutions that intelligently ﬁlter the sensor noise. 6. Case Study 6.1. Use Case 1: Operational Relisability of Virtual Power Plant Assets Figure 4 shows the time series CapacityPos, CapacityNeg, ForecastCapacityNeg, and ForecastCapacityPos, deﬁned in Section 4.1, and the Operational reliability which is calculated based on these time series by the equation in Section 4.1. These series are from a battery storage unit in a shopping mall. The unit is participating on the Finnish FCR-N market and the data is obtained through the VPP API of the VPP that manages the energy resources of the shopping mall. In Figure 4, ForecastCapacityNeg and ForecastCapacityPos both have a constant value of 1.7 MW. Thus, based on the equation in Section 4.1, it is expected that the Operational reliability will look like min (CapacityPos, CapacityNeg) and be scaled by dividing by 1.7 MW. This behavior is observed in Figure 4. Figure 4. Operational reliability calculation for a battery storage asset. Energies 2021, 14, 1242 14 of 23 6.2. Use Case 2: Reserve Capacity Forecasting Reserve capacity forecasting of a photovoltaic PFR resource is performed on the data received from the VPP application programming interface. This operational VPP is installed at a Finnish shopping center, aggregating photovoltaic and other PFR resources. This use case mainly targets to forecast a day-ahead photovoltaic capacity for each hour of the next day, i.e., forecasting ForecastCapacityPos and ForecastCapacityNeg time-series (deﬁned in Section 4.1) from the labels CapacityPos and CapacityNeg, respectively (deﬁned in Section 4.1). For this purpose, historical data of about 16 months is collected from the VPP application programming interface. The response from the application programming interface includes the PV capacity (in 10 kW) data for every 15-min interval. The forecasting is targeted for every hour, but there are more data points than required. The preprocessing is done by taking the average of the data points per hour. Figure 5 shows the preprocessed PV data collected from the application programming interface. In addition to VPP data, openly available solar radiation data is collected from the local meteorological institute. Utilizing the open API of the Finnish Meteorological Institute, data is collected for every hour for 16 months in the same time frame as the PV capacity data. This open API provides the solar radiation features listed in Table 3. Figure 5. Aggregated FCR-N capacity of the photovoltaic panels at the shopping center. Table 3. Solar Radiation features provided by open API. Parameter Unit Diffuse radiation W/m2 Direct solar radiation W/m2 Global radiation W/m2 Long wave solar radiation W/m2 Long wave outgoing solar radiation W/m2 Radiation balance W/m2 Reﬂected radiation W/m2 Sunshine duration s Ultraviolet irradiance index Energies 2021, 14, 1242 15 of 23 Among these features, except Direct solar radiation (W/m2), Radiation balance (W/m2), and Ultraviolet irradiance (index), all other features were chosen for the model training. Figure 6 portrays these six features plotted alongside with the PV power output. Figure 6. FMI radiation observation data. Figure 6 shows an apparent inﬂuence of solar radiation features on the PV power output. For instance, like other features, the feature ‘Global radiation’ peaks from May 2019 to August 2019. In the same time frame, the power output from the PV panel is also high. Conversely, from October 2019 to March 2020, the feature value and power output both are low. Furthermore, a steady increase or decrease in the power values are directly proportional to the steady increase or decrease in the feature values. From this analysis, it is evident that these six features are relevant with respect to the power generation in the PV panels, and they can be used in forecasting. Additionally, after analyzing the power output patterns from Figures 7 and 8, the data seems to have a vital seasonality component. For example, the PV power output is high between 10 and 16 h. Similarly, the month around July seems to contribute more to the power generation and can provide more data to the network by explicitly referencing days and months. Thus, these calendar features have been included. The implementation method, model architecture, and hyper-parameters of PV capacity forecasting are mentioned in Section 5. The VPP application programming interface and meteorological institute’s collected data are aggregated to a single data source and the features are manually selected. The matrix Xtrain is constructed with one row from each of the selected features and one column for each epoch, i.e., hour, as speciﬁed in Section 5. Once the forecasts were run by the system in Figure 3, the results were plotted, as shown in Figure 9. In this use case, as the research is carried with historical data, Yreal was also available along with Ypred from the forecast results. These three parameters: Historical data, Yreal, and Ypred were plotted alongside one another in Figure 9. Figure 10 shows True PV capacity (i.e., Yreal) vs. Predicted PV capacity (i.e., Ypred) to get more clarity on the forecast results. By comparing the true and predicted values, it can be observed that the model is performing very well in forecasting the PV capacity values. However, few outlier power patterns were observed in some hours. For instance, from Energies 2021, 14, 1242 16 of 23 Figure 11, the day’s starting hours have been accurately predicted by the model, but one outlier pattern is observed for a day. This pattern can be clearly seen in Figure 12. Overall, this use case’s objective was to predict the day-ahead PV capacity from the VPP application programming interface data. This research described the problem analysis and implementation scheme used to forecast the capacity forecasting. Figure 7. Hourly power output from Photovoltaic Panel. Figure 8. Monthly power output from Photovoltaic Panel. Energies 2021, 14, 1242 17 of 23 Figure 9. True vs. Predicted PV capacity output with training data. Figure 10. True PV capacity vs. Predicted PV capacity. Energies 2021, 14, 1242 18 of 23 Figure 11. True vs. Predicted PV capacity output for 3 days. Figure 12. True vs. Predicted PV capacity output for 1 day. 7. Discussion The case studies demonstrate application scenarios of the virtual power plant archi- tecture, data model and application programming interface. Both case studies exploit time series data from the virtual power plant as source information in order to perform analytics Energies 2021, 14, 1242 19 of 23 and to generate a new time series of interest to the end user. From Figure 2 and the REST API calls in Section 3.3, it is clear that a commercial virtual power plant does not provide user-friendly interfaces, which energy domain experts can be expected to use to request the source information. Figure 2 is understandable for a computer science expert and can serve as the basis for multidisciplinary collaboration between such professionals as well as energy sector professionals building advanced features to virtual power plants. Both of the use cases presented in this article are examples of such advanced features. Once the source information has been obtained and the advanced feature has been implemented, the result is a new dataset, such as the operational reliability of an asset or the predicted PV PFR capacity. There remains the question of how such a dataset can be used. This question is especially relevant in the context of virtual power plants that visualize all relevant data for users and may even perform automatic trading on PFR markets. Thus, it is necessary to input the result datasets to the VPP in a format in which it is able to receive it. From Figure 2, it is seen that both of the mentioned result datasets are a series of datapoints associated to a speciﬁc asset, so one of the endpoints in the REST API, namely POST, PATCH, or PUT can be used to write the results back to the virtual power plant’s database, after which they can be exploited by the virtual power plant. It is notable that the work presented in this article is based on one commercial virtual power plant. According to the experience of the authors, the material in Section 3 would be applicable to other vendors’ virtual power plants. Unfortunately, there is a lack of academic as well as professional publications on the subjects. This is an obstacle for researchers who would like to perform case studies with real power plants. It is also an obstacle for industry seeking to exploit research in this area by interfacing innovative algorithms as advanced features to their power plant. The authors welcome follow-up research by other groups working with different virtual power plant vendors, aiming at an internationally shared vision of virtual power plant architecture, data models, and application programming interfaces. 8. Conclusions This paper has focused on the following gap in VPP research: Although much research is being published, its applicability in the context of real-world VPPs is often unclear. This paper has proposed a generic architecture, data model, and API for accessing real VPPs. Its applicability has been demonstrated in the context of an operational commercial VPP in Finland for two use cases: (1) computing the operational reliability of VPP managed assets, and (2) forecasting the capacity that PV assets can offer on Finnish frequency reserve markets. The ﬁrst use case is straightforward and serves the purpose of demonstrating the industrial applicability and technology readiness level. The second use case has implications on advanced features of a VPP, namely its ability to bid intelligently to maximize its revenue from trading its assets on frequency reserves markets. The bidding is day-ahead in Nordic markets, and the capacity forecasting solutions work on the same day-ahead timeframe. A key component of the bid is the capacity of adjustable power that VPP is able to provide the next day to react to frequency deviations. The revenue is directly proportional to this capacity. Thus, the VPP should maximize the capacity in its bids while avoiding the penalties due to failing to deliver the promised capacity. The PV capacity forecasts presented in this paper are directly applicable for the bidding module of the VPP. Several directions of future work are possible. Firstly, the forecasting approach could be applied to other types of assets in addition to PV; in this case, a key task would be to select the relevant features that the machine learning model needs to predict the capacity of that type of asset. Secondly, bidding strategies could be developed on top of the forecasts. Thirdly, further case studies on different commercial VPPs operating in different countries could further validate and develop the generality of the proposed VPP data model and API. Energies 2021, 14, 1242 20 of 23 Author Contributions: Conceptualization, R.S., M.Y.-O. and S.S.; methodology, R.S., M.Y.-O. and S.S.; software, R.S. and M.Y.-O.; validation, R.S., J.V., S.S., V.V.; formal analysis, R.S.; investigation, R.S.; resources, R.S., M.Y.-O., J.V. and S.S.; data curation, R.S.; writing—original draft preparation, R.S., M.Y.-O., T.H. and S.S.; visualization, R.S.; supervision, S.S., J.V. and V.V.; project administration, T.H. and S.S.; funding acquisition, S.S., T.H. and J.V. All authors have read and agreed to the published version of the manuscript. Funding: This research was supported by Business Finland grant 7439/31/2018. Institutional Review Board Statement: Not Applicable. Informed Consent Statement: Not Applicable. Data Availability Statement: Data is contained within the article. Conﬂicts of Interest: The authors declare no conﬂict of interest. References 1. Kippelt, S.; Schlüter, T.; Rehtanz, C. Future demand for prospective providers of control reserves. In Proceedings of the IEEE PES Innovative Smart Grid Technologies, Europe, Istanbul, Turkey, 12–15 October 2014; IEEE: Piscataway, NJ, USA, 2014; pp. 1–6. 2. Vrettos, E.; Ziras, C.; Andersson, G. Fast and Reliable Primary Frequency Reserves from Refrigerators with Decentralized Stochastic Control. IEEE Trans. Power Syst. 2017, 32, 2924–2941. [CrossRef] 3. Wu, X.; He, J.; Xu, Y.; Lu, J.; Lu, N.; Wang, X. Hierarchical Control of Residential HVAC Units for Primary Frequency Regulation. IEEE Trans. Smart Grid 2018, 9, 3844–3856. [CrossRef] 4. Fu, Y.; Wang, Y.; Zhang, X. Integrated wind turbine controller with virtual inertia and primary frequency responses for grid dynamic frequency support. IET Renew. Power Gener. 2017, 11, 1129–1137. [CrossRef] 5. Ye, H.; Pei, W.; Qi, Z. Analytical Modeling of Inertial and Droop Responses from a Wind Farm for Short-Term Frequency Regulation in Power Systems. IEEE Trans. Power Syst. 2015, 31, 3414–3423. [CrossRef] 6. Izadkhast, S.; Garcia-Gonzalez, P.; Frias, P.; Bauer, P. Design of Plug-In Electric Vehicle’s Frequency-Droop Controller for Primary Frequency Control and Performance Assessment. IEEE Trans. Power Syst. 2017, 32, 4241–4254. [CrossRef] 7. Engels, J.; Claessens, B.; Deconinck, G. Combined Stochastic Optimization of Frequency Control and Self-Consumption with a Battery. IEEE Trans. Smart Grid 2017, 10, 1971–1981. [CrossRef] 8. Terms and Conditions for Providers of Frequency Containment Reserves (FCR) 15 June 2018. Available online: https://www. ﬁngrid.ﬁ/globalassets/dokumentit/en/electricity-market/reserves/appendix2---terms-and-conditions-for-providers-of-fcr. pdf (accessed on 16 October 2019). 9. Jorgensen, K.L.; Shaker, H.R. Wind Power Forecasting Using Machine Learning: State of the Art, Trends and Challenges. In Proceedings of the 2020 IEEE 8th International Conference on Smart Energy Grid Engineering (SEGE), Oshawa, ON, Canada, 12–14 August 2020; IEEE: Piscataway, NJ, USA, 2020; pp. 44–50. 10. Su, D.; Batzelis, E.; Pal, B. Machine Learning Algorithms in Forecasting of Photovoltaic Power Generation. In Proceedings of the 2019 International Conference on Smart Energy Systems and Technologies (SEST), Porto, Portugal, 9–11 September 2019; IEEE: Piscataway, NJ, USA, 2019; pp. 1–6. 11. Xingshuai, H.; Di, W. Benoit Boulet Ensemble Learning for Charging Load Forecasting of Electric Vehicle Charging Stations—IEEE Conference Publication. In Proceedings of the 2020 IEEE Electric Power and Energy Conference (EPEC), Edmonton, AB, Canada, 9–10 November 2020; pp. 1–5. [CrossRef] 12. Nait-Malek, Y.; Najib, M.; Bakhouya, M.; Essaaidi, M. On the Use of Machine Learning for State-of- Charge Forecasting in Electric Vehicles. In Proceedings of the 2019 IEEE International Smart Cities Conference (ISC2), Casablanca, Morocco, 14–17 October 2019; IEEE: Piscataway, NJ, USA, 2019; pp. 408–413. 13. Mashlakov, A.; Honkapuro, S.; Tikka, V.; Kaarna, A.; Lensu, L. Multi-Timescale Forecasting of Battery Energy Storage State-of- Charge under Frequency Containment Reserve for Normal Operation. In Proceedings of the 2019 16th International Conference on the European Energy Market (EEM), Ljubljana, Slovenia, 18–20 September 2019; IEEE: Piscataway, NJ, USA, 2019; pp. 1–8. 14. Haque, A.; Pipattanasomporn, M.; Rahman, S.; Kothandaraman, R.; Malekpour, A.; Paaso, E.A.; Bahramirad, S. An SVR-based Building-level Load Forecasting Method Considering Impact of HVAC Set Points. In Proceedings of the 2019 IEEE Power & Energy Society Innovative Smart Grid Technologies Conference (ISGT), Washington, DC, USA, 17–20 February 2019; IEEE: Piscataway, NJ, USA, 2019; pp. 1–5. 15. Majumder, S.; Agalgaonkar, A.P.; Khaparde, S.A.; Perera, S.; Kulkarni, S.V.; Ciufo, P.P. Allowable Delay Heuristic in Provision of Primary Frequency Reserve in Future Power Systems. IEEE Trans. Power Syst. 2020, 35, 1231–1241. [CrossRef] 16. Zhang, G.; Ela, E.; Wang, Q. Market Scheduling and Pricing for Primary and Secondary Frequency Reserve. IEEE Trans. Power Syst. 2018, 34, 2914–2924. [CrossRef] 17. Chakravorty, D.; Chaudhuri, B.; Hui, S.Y.R. Rapid Frequency Response from Smart Loads in Great Britain Power System. IEEE Trans. Smart Grid 2017, 8, 2160–2169. [CrossRef] Energies 2021, 14, 1242 21 of 23 18. Li, W.; Du, P.; Lu, N. Design of a New Primary Frequency Control Market for Hosting Frequency Response Reserve Offers from Both Generators and Loads. IEEE Trans. Smart Grid 2017, 9, 4883–4892. [CrossRef] 19. Liu, C.; Du, P. Participation of Load Resources in Day-Ahead Market to Provide Primary-Frequency Response Reserve. IEEE Trans. Power Syst. 2018, 33, 5041–5051. [CrossRef] 20. Liu, J.; Zhang, W.; Liu, Y. Primary Frequency Response from the Control of LED Lighting Loads in Commercial Buildings. IEEE Trans. Smart Grid 2016, 8, 2880–2889. [CrossRef] 21. Aunedi, M.; Kountouriotis, P.-A.; Calderon, J.E.O.; Angeli, D.; Strbac, G. Economic and Environmental Beneﬁts of Dynamic Demand in Providing Frequency Regulation. IEEE Trans. Smart Grid 2013, 4, 2036–2048. [CrossRef] 22. Giovanelli, C.; Kilkki, O.; Sierla, S.; Seilonen, I.; Vyatkin, V. Task Allocation Algorithm for Energy Resources Providing Frequency Containment Reserves. IEEE Trans. Ind. Inform. 2018, 15, 677–688. [CrossRef] 23. Zhao, H.; Wu, Q.; Huang, S.; Zhang, H.; Liu, Y.; Xue, Y. Hierarchical Control of Thermostatically Controlled Loads for Primary Frequency Support. IEEE Trans. Smart Grid 2016, 9, 2986–2998. [CrossRef] 24. Biegel, B.; Hansen, L.H.; Andersen, P.; Stoustrup, J. Primary Control by ON/OFF Demand-Side Devices. IEEE Trans. Smart Grid 2013, 4, 2061–2071. [CrossRef] 25. Perroy, E.; Lucas, D.; Debusschere, V. Provision of Frequency Containment Reserve Through Large Industrial End-Users Pooling. IEEE Trans. Smart Grid 2020, 11, 26–36. [CrossRef] 26. De Carne, G.; Buticchi, G.; Liserre, M.; Vournas, C. Real-Time Primary Frequency Regulation Using Load Power Control by Smart Transformers. IEEE Trans. Smart Grid 2019, 10, 5630–5639. [CrossRef] 27. Weckx, S.; D’Hulst, R.; Driesen, J. Primary and Secondary Frequency Support by a Multi-Agent Demand Control System. IEEE Trans. Power Syst. 2015, 30, 1394–1404. [CrossRef] 28. Shim, J.W.; Verbic, G.; Zhang, N.; Hur, K. Harmonious Integration of Faster-Acting Energy Storage Systems into Frequency Control Reserves in Power Grid with High Renewable Generation. IEEE Trans. Power Syst. 2018, 33, 6193–6205. [CrossRef] 29. Knap, V.; Chaudhary, S.K.; Stroe, D.-I.; Swierczynski, M.J.; Craciun, B.-I.; Teodorescu, R. Sizing of an Energy Storage System for Grid Inertial Response and Primary Frequency Reserve. IEEE Trans. Power Syst. 2016, 31, 3447–3456. [CrossRef] 30. Kariminejad, N.; Taher, S.A.; Shahidehpour, M.; Khateri, K. A Hierarchical Governor/Turbine and Electric Vehicles Optimal Control Framework for Primary Frequency Support in Power Systems. IEEE Trans. Smart Grid 2017, 9, 6702–6712. [CrossRef] 31. Srinivasan, L.; Markovic, U.; Vaya, M.G.; Hug, G. Provision of frequency control by a BESS in combination with ﬂexible units. In Proceedings of the 2018 IEEE International Energy Conference (ENERGYCON), Limassol, Cyprus, 3–7 June 2018; IEEE: Piscataway, NJ, USA, 2018; pp. 1–6. 32. Wang, Y.; Bayem, H.; Giralt-Devant, M.; Silva, V.; Guillaud, X.; Francois, B. Methods for Assessing Available Wind Primary Power Reserve. IEEE Trans. Sustain. Energy 2015, 6, 272–280. [CrossRef] 33. Zhao, D.; Feng, X.; Gong, Y.; Zhang, B.; Jiang, X. Analysis of necessary primary reserve of a high wind penetration power system. J. Eng. 2019, 2019, 2060–2062. [CrossRef] 34. Bianchi, F.D.; Dominguez-Garcia, J.L.; Vrana, T.K. Distributed Frequency Control with Partial Information Using MT-HVDC Grids and WPPs. IEEE Syst. J. 2018, 13, 1694–1701. [CrossRef] 35. Tan, Y.; Meegahapola, L.; Muttaqi, K.M. A Suboptimal Power-Point-Tracking-Based Primary Frequency Response Strategy for DFIGs in Hybrid Remote Area Power Supply Systems. IEEE Trans. Energy Convers. 2015, 31, 93–105. [CrossRef] 36. Vidyanandan, K.V.; Senroy, N. Primary frequency regulation by deloaded wind turbines using variable droop. IEEE Trans. Power Syst. 2013, 28, 837–846. [CrossRef] 37. Tan, J.; Zhang, Y. Coordinated Control Strategy of a Battery Energy Storage System to Support a Wind Power Plant Providing Multi-Timescale Frequency Ancillary Services. IEEE Trans. Sustain. Energy 2017, 8, 1140–1153. [CrossRef] 38. Tan, Y.; Muttaqi, K.M.; Ciufo, P.P.; Meegahapola, L.G.; Guo, X.; Chen, B.; Chen, H. Enhanced Frequency Regulation Using Multilevel Energy Storage in Remote Area Power Supply Systems. IEEE Trans. Power Syst. 2018, 34, 163–170. [CrossRef] 39. Conte, F.; Massucco, S.; Schiapparelli, G.-P.; Silvestro, F. Day-Ahead and Intra-Day Planning of Integrated BESS-PV Systems Providing Frequency Regulation. IEEE Trans. Sustain. Energy 2020, 11, 1797–1806. [CrossRef] 40. Molina-Garcia, A.; Munoz-Benavente, I.; Hansen, A.D.; Gómez-Lázaro, E. Demand-Side Contribution to Primary Frequency Control with Wind Farm Auxiliary Control. IEEE Trans. Power Syst. 2014, 29, 2391–2399. [CrossRef] 41. You, S.; Liu, Y.; Tan, J.; Gonzalez, M.T.; Zhang, X.; Zhang, Y.; Liu, Y. Comparative Assessment of Tactics to Improve Primary Frequency Response Without Curtailing Solar Output in High Photovoltaic Interconnection Grids. IEEE Trans. Sustain. Energy 2018, 10, 718–728. [CrossRef] 42. Saarinen, L.; Norrlund, P.; Yang, W.; Lundin, U. Allocation of Frequency Control Reserves and Its Impact on Wear and Tear on a Hydropower Fleet. IEEE Trans. Power Syst. 2017, 33, 430–439. [CrossRef] 43. Spitalny, L.; Unger, D.; Myrzik, J.M.A. Potential of small hydro power plants for delivering control energy in Germany. In Proceedings of the 2012 IEEE Energytech, Cleveland, OH, USA, 29–31 May 2012; IEEE: Piscataway, NJ, USA, 2012; pp. 1–6. 44. Ahmed, M.H.; Arif, M.; Abdel-Galil, T.K.; Alhems, L.M.; Kotiuga, W. Quantifying the value of pumped storage hydro (PSH) in the Saudi electric grid. In Proceedings of the 2016 Saudi Arabia Smart Grid (SASG), Jeddah, Saudi Arabia, 6–8 December 2016; pp. 1–6. [CrossRef] 45. Vardakas, J.S.; Zorba, N.; Verikoukis, C.V. A Survey on Demand Response Programs in Smart Grids: Pricing Methods and Optimization Algorithms. IEEE Commun. Surv. Tutor. 2015, 17, 152–178. [CrossRef] Energies 2021, 14, 1242 22 of 23 46. Wang, Y.; Ai, X.; Tan, Z.; Yan, L.; Liu, S. Interactive Dispatch Modes and Bidding Strategy of Multiple Virtual Power Plants Based on Demand Response and Game Theory. IEEE Trans. Smart Grid 2015, 7, 510–519. [CrossRef] 47. Mnatsakanyan, A.; Kennedy, S.W. A Novel Demand Response Model with an Application for a Virtual Power Plant. IEEE Trans. Smart Grid 2015, 6, 230–237. [CrossRef] 48. Al-Awami, A.T.; Amleh, N.A.; Muqbel, A.M. Optimal Demand Response Bidding and Pricing Mechanism with Fuzzy Optimiza- tion: Application for a Virtual Power Plant. IEEE Trans. Ind. Appl. 2017, 53, 5051–5061. [CrossRef] 49. Abbasi, E. Coordinated primary control reserve by ﬂexible demand and wind power generation. In Proceedings of the 2017 IEEE Power & Energy Society Innovative Smart Grid Technologies Conference (ISGT), Washington, DC, USA, 29 April–3 May 2017; IEEE: Piscataway, NJ, USA, 2017; pp. 1–5. 50. Molina-Garcia, A.; Bouffard, F.; Kirschen, D.S. Decentralized Demand-Side Contribution to Primary Frequency Control. IEEE Trans. Power Syst. 2011, 26, 411–419. [CrossRef] 51. Calvillo, C.; Sanchezmiralles, A.; Villar, J.C. Energy management and planning in smart cities. Renew. Sustain. Energy Rev. 2016, 55, 273–287. [CrossRef] 52. Carli, R.; Dotoli, M.; Pellegrino, R. A Hierarchical Decision-Making Strategy for the Energy Management of Smart Cities. IEEE Trans. Autom. Sci. Eng. 2016, 14, 505–523. [CrossRef] 53. Blaauwbroek, N.N.; Nguyen, P.H.; Konsman, M.J.; Shi, H.H.; Kamphuis, R.I.G.; Kling, W.L. Decentralized Resource Allocation and Load Scheduling for Multicommodity Smart Energy Systems. IEEE Trans. Sustain. Energy 2015, 6, 1506–1514. [CrossRef] 54. Shabanzadeh, M.; Sheikh-El-Eslami, M.-K.; Haghifam, M.-R. An interactive cooperation model for neighboring virtual power plants. Appl. Energy 2017, 200, 273–289. [CrossRef] 55. Hosseini, S.M.; Carli, R.; Dotoli, M. Robust Optimal Energy Management of a Residential Microgrid Under Uncertainties on Demand and Renewable Power Generation. IEEE Trans. Autom. Sci. Eng. 2020, 1–20. [CrossRef] 56. Shabanzadeh, M.; Sheikh-El-Eslami, M.-K.; Haghifam, M.-R. A medium-term coalition-forming model of heterogeneous DERs for a commercial virtual power plant. Appl. Energy 2016, 169, 663–681. [CrossRef] 57. Giovanelli, C.; Sierla, S.; Ichise, R.; Vyatkin, V. Exploiting Artiﬁcial Neural Networks for the Prediction of Ancillary Energy Market Prices. Energies 2018, 11, 1906. [CrossRef] 58. The Technical Requirements and the Prequaliﬁcation Process of Frequency Containment Reserves (FCR) January 2019. Available online: https://www.ﬁngrid.ﬁ/globalassets/dokumentit/en/electricity-market/reserves/appendix3---technical-requirements- and-prequaliﬁcation-process-of-fcr.pdf (accessed on 16 October 2019). 59. Niu, Z.; Li, Y. Study on Reserve Services for Interconnected Grid under the Mode of Centralized Dispatching. In Proceedings of the 2011 Asia-Paciﬁc Power and Energy Engineering Conference, Wuhan, China, 25–28 March 2011; IEEE: Piscataway, NJ, USA, 2011; pp. 1–5. 60. Hamon, C.; Soder, L. Review paper on wind power impact on operation of reserves. In Proceedings of the 2011 8th International Conference on the European Energy Market (EEM), Zagreb, Croatia, 25 May 2011; IEEE: Piscataway, NJ, USA, 2011; pp. 895–903. 61. Zuo, Y.; Sossan, F.; Bozorg, M.; Paolone, M. Dispatch and Primary Frequency Control with Electrochemical Storage: A System- wise Veriﬁcation. In Proceedings of the 2018 IEEE PES Innovative Smart Grid Technologies Conference Europe (ISGT-Europe), Sarajevo, Bosnia-Herzegovina, 31 May 2019; IEEE: Piscataway, NJ, USA, 2018; pp. 1–6. 62. Wang, Y.; Chen, Q.; Sun, M.; Kang, C.; Xia, Q. An Ensemble Forecasting Method for the Aggregated Load with Subproﬁles. IEEE Trans. Smart Grid 2018, 9, 3906–3908. [CrossRef] 63. Wang, Y.; Chen, Q.; Zhang, N.; Wang, Y. Conditional Residual Modeling for Probabilistic Load Forecasting. IEEE Trans. Power Syst. 2018, 33, 7327–7330. [CrossRef] 64. Nijhuis, M.M.; Rawn, B.; Gibescu, M.M. Prediction of power ﬂuctuation classes for photovoltaic installations and potential beneﬁts of dynamic reserve allocation. IET Renew. Power Gener. 2014, 8, 314–323. [CrossRef] 65. Giovanelli, C.; Liu, X.; Sierla, S.; Vyatkin, V.; Ichise, R. Towards an aggregator that exploits big data to bid on frequency containment reserve market. In Proceedings of the IECON 2017—43rd Annual Conference of the IEEE Industrial Electronics Society, Beijing, China, 3–5 June 2017; IEEE: Piscataway, NJ, USA, 2017; pp. 7514–7519. 66. Liu, K.; Wei, Z.; Yang, Z.; Li, K. Mass load prediction for lithium-ion battery electrode clean production: A machine learning approach. J. Clean. Prod. 2021, 289, 125159. [CrossRef] 67. Liu, K.; Hu, X.; Zhou, H.; Tong, L.; Widanalage, D.; Macro, J. Feature Analyses and Modelling of Lithium-ion Batteries Manufacturing based on Random Forest Classiﬁcation. IEEE/ASME Trans. Mechatron. 2021, 1. [CrossRef] 68. Tang, X.; Liu, K.; Wang, X.; Gao, F.; Macro, J.; Widanage, W.D. Model Migration Neural Network for Predicting Battery Aging Trajectories. IEEE Trans. Transp. Electrif. 2020, 6, 363–374. [CrossRef] 69. Kempitiya, T.; Sierla, S.; de Silva, D.; Yli-Ojanperä, M.; Alahakoon, D.; Vyatkin, V. An Artiﬁcial Intelligence framework for bidding optimization with uncertainty in multiple frequency reserve markets. Appl. Energy 2020, 280, 115918. [CrossRef] 70. Liu, K.; Li, Y.; Hu, X.; Lucu, M.; Widanage, W.D. Gaussian Process Regression with Automatic Relevance Determination Kernel for Calendar Aging Prediction of Lithium-Ion Batteries. IEEE Trans. Ind. Inform. 2020, 16, 3767–3777. [CrossRef] 71. Liu, K.; Ashwin, T.; Hu, X.; Lucu, M.; Widanage, W.D. An evaluation study of different modelling techniques for calendar ageing prediction of lithium-ion batteries. Renew. Sustain. Energy Rev. 2020, 131, 110017. [CrossRef] 72. Liu, K.; Hu, X.; Wei, Z.; Li, Y.; Jiang, Y. Modiﬁed Gaussian Process Regression Models for Cyclic Capacity Prediction of Lithium-Ion Batteries. IEEE Trans. Transp. Electrif. 2019, 5, 1225–1236. [CrossRef] Energies 2021, 14, 1242 23 of 23 73. Fortum Energy Review—March 2015. Available online: http://apps.fortum.ﬁ/gallery/Fortum_Energy_review_EN_FINAL.pdf (accessed on 20 October 2020). 74. ESett eSett Handbook—Nordic Imbalance Settlement Model. Available online: https://www.esett.com/handbook/ (accessed on 20 October 2020). 75. Nasdaq Power Products. Available online: https://www.nasdaq.com/solutions/nordic-power-products-european-commodities (accessed on 20 October 2020). 76. Nord Pool Nord Pool Trading. 2020. Available online: https://www.nordpoolgroup.com/trading/ (accessed on 20 October 2020). 77. Epex 2020 Trading Products. Available online: https://www.epexspot.com/en/tradingproducts (accessed on 20 October 2020). 78. ENTSO-E via Energinet System Operation Agreement between Nordic Transmission System Operators—Annex: Load-Frequency Control and Re-serves. 2019. Available online: https://eepublicdownloads.blob.core.windows.net/public-cdn-container/ clean-documents/Publications/SOC/Nordic/20190807_NordicSOA_AnnexLFCR(signed_ﬁnal_updated_v2).pdf (accessed on 4 September 2020). 79. Reserves and Balancing Power. Available online: https://www.ﬁngrid.ﬁ/en/electricity-market/reserves_and_balancing/ (accessed on 8 February 2021). 80. Statnett Operations and Market Development Plan 2017–2021. Executive Summary. Available online: https://www.statnett.no/ contentassets/4c9e014c155f4dd98949502d65c9e6bf/executive-summary-system-operations-and-market-development-plan-20 17-2021.pdf (accessed on 4 September 2020). 81. Information About Ancillary Services. Available online: https://www.svk.se/en/stakeholder-portal/Electricity-market/ information-about-ancillary-services/ (accessed on 4 September 2020). 82. Solutions Report 2020. Available online: https://www.ﬁngrid.ﬁ/en/pages/news/news/2020/solutions-report-2020/ (accessed on 3 September 2020). 83. EC Commission Regulation (EU) 2016/631 Establishing a Network Code on Requirements for Grid Connection of Generators Aka Requirement for Generators Network Code (or RfG NC for Short). 2016. Available online: https://eur-lex.europa.eu/eli/ reg/2016/631/oj (accessed on 4 September 2020). 84. Schittekatte, T.; Reif, V.; Meeus, L. The EU Electricity Network Codes (2020ed.). SSRN Electron. J. 2020, 11–13. [CrossRef] 85. Frequency Containment Reserves. Available online: https://www.ﬁngrid.ﬁ/en/electricity-market/reserves_and_balancing/ frequency-containment-reserves/ (accessed on 8 February 2021). 86. Terms and Conditions for Providers of Frequency Containment Reserves (FCR). Available online: https://www.fingrid.fi/ globalassets/dokumentit/en/electricity-market/reserves/fcr-liite1---ehdot-ja-edellytykset_en.pdf (accessed on 8 February 2021). 87. The Technical Requirements and the Prequalification Process of Frequency Containment Reserves (FCR). Available online: https://www.fingrid.fi/globalassets/dokumentit/en/electricity-market/reserves/fcr-liite2---teknisten-vaatimusten-todentaminen- ja-hyvaksyttamisprosessi_en.pdf (accessed on 8 February 2021). 88. Hourly Market Agreement for Frequency Containment Reserves—Balancing Service Provider and Fingrid Oyj. Available online: https://www.ﬁngrid.ﬁ/globalassets/dokumentit/en/electricity-market/reserves/fcr-tuntimarkkinasopimus---pohja_ en.pdf (accessed on 8 February 2021). 89. Fast Frequency Reserve. Available online: https://www.fingrid.fi/en/electricity-market/reserves_and_balancing/fast-frequency- reserve/ (accessed on 8 February 2021). 90. Terms and Conditions for Providers of Fast Frequency Reserves (FFR). Available online: https://www.ﬁngrid.ﬁ/globalassets/ dokumentit/en/electricity-market/reserves/terms-and-conditions-for-providers-of-ffr.pdf (accessed on 8 February 2021). 91. The Technical Requirements and the Prequaliﬁcation Process of Fast Frequency Reserve (FFR). Available online: https://www. ﬁngrid.ﬁ/globalassets/dokumentit/en/electricity-market/reserves/the-technical-requirements-and-the-prequaliﬁcation- process-of-fast-frequency-reserve-ffr.pdf (accessed on 8 February 2021). 92. Market Agreement for Fast Frequency Reserve—Balancing Service Provider oy and Fingrid Oyj. Available online: https: //www.ﬁngrid.ﬁ/globalassets/dokumentit/en/electricity-market/reserves/ffr-markkinasopimus_pohja_en.pdf (accessed on 8 February 2021). 93. Serrano, N.; Hernantes, J.; Gallardo, G. Service-Oriented Architecture and Legacy Systems. IEEE Softw. 2014, 31, 15–19. [CrossRef] 94. Liskin, O.; Singer, L.; Schneider, K. Welcome to the Real World: A Notation for Modeling REST Services. IEEE Internet Comput. 2012, 16, 36–44. [CrossRef] 95. Yu, Q.; Yang, W. The Analysis and Design of System of Experimental Consumables Based on Django and QR code. In Proceedings of the 2019 2nd International Conference on Safety Produce Informatization (IICSPI), Chongqing, China, 28–30 November 2019; IEEE: Piscataway, NJ, USA, 2019; pp. 137–141. 96. Annenkov, D.V.; Cherkashin, E.A. Generation technique for Django MVC web framework using the stratego transformation language. In Proceedings of the 2013 36th International Convention on Information and Communication Technology, Elec-tronics and Microelectronics, MIPRO 2013—Proceedings, Opatija, Croatia, 20–24 May 2013; pp. 1084–1087.","libVersion":"0.3.2","langs":""}