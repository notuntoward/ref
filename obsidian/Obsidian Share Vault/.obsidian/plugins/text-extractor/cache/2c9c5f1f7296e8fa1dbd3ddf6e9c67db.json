{"path":"lit/sources/Gasper22battLifeMdlRedcOrder.pdf","text":"Journal of The Electrochemical Society OPEN ACCESS Machine-Learning Assisted Identification of Accurate Battery Lifetime Models with Uncertainty To cite this article: Paul Gasper et al 2022 J. Electrochem. Soc. 169 080518 View the article online for updates and enhancements. You may also like Aging Modeling of LiFePO4/C Li-Ion Cells and Application to the Pack Sizing and Lifetime Prediction in an Electric School Bus Rémy Mingant and Julien Bernard - Aging Modeling of LFP/C Li-ion Cells in Order to Predict Battery Lifetime of an Electric School Bus Rémy Mingant and Julien Bernard - Life Simulation of a Graphite/LiFePO4 Cell under Cycling and Storage C. Delacourt and M. Safari - This content was downloaded from IP address 65.102.135.109 on 02/08/2023 at 20:10 Machine-Learning Assisted Identiﬁcation of Accurate Battery Lifetime Models with Uncertainty Paul Gasper, 1,z Nils Collath,2 Holger C. Hesse, 2,3 Andreas Jossen, 2 and Kandler Smith 1 1Energy Conversion and Storage Systems Center, National Renewable Energy Laboratory, Golden, Colorado, United States of America 2School of Engineering and Design, Department of Energy and Process Engineering, Technical University of Munich, 80333 Munich, Germany 3Kempten University of Applied Sciences, 87435 Kempten, Germany Reduced-order battery lifetime models, which consist of algebraic expressions for various aging modes, are widely utilized for extrapolating degradation trends from accelerated aging tests to real-world aging scenarios. Identifying models with high accuracy and low uncertainty is crucial for ensuring that model extrapolations are believable, however, it is difﬁcult to compose expressions that accurately predict multivariate data trends; a review of cycling degradation models from literature reveals a wide variety of functional relationships. Here, a machine-learning assisted model identiﬁcation method is utilized to ﬁt degradation in a stand-out LFP-Gr aging data set, with uncertainty quantiﬁed by bootstrap resampling. The model identiﬁed in this work results in approximately half the mean absolute error of a human expert model. Models are validated by converting to a state-equation form and comparing predictions against cells aging under varying loads. Parameter uncertainty is carried forward into an energy storage system simulation to estimate the impact of aging model uncertainty on system lifetime. The new model identiﬁcation method used here reduces life-prediction uncertainty by more than a factor of three (86% ± 5% relative capacity at 10 years for human-expert model, 88.5% ± 1.5% for machine-learning assisted model), empowering more conﬁdent estimates of energy storage system lifetime. © 2022 The Author(s). Published on behalf of The Electrochemical Society by IOP Publishing Limited. This is an open access article distributed under the terms of the Creative Commons Attribution 4.0 License (CC BY, http://creativecommons.org/licenses/ by/4.0/), which permits unrestricted reuse of the work in any medium, provided the original work is properly cited. [DOI: 10.1149/ 1945-7111/ac86a8] Manuscript submitted April 19, 2022; revised manuscript received June 23, 2022. Published August 24, 2022. Models of battery degradation provide guidance for energy storage system design, empower battery dispatch to be optimized to extend system lifetime, and enable prognostic maintenance, all of which are crucial for leveraging the large initial investment required for any given battery energy storage system.1,2 Qualitative under- standing of the calendar and cycle life of various lithium-ion battery technologies, from sources such as battery warranties or from literature review, helps to deﬁne overarching industry trends or to identify targets for improving system lifetime,3 but does not provide enough detail for optimizing the design or dispatch of individual battery systems, as degradation trends vary dependent on cell format, electrode chemistry, and manufacturer. 4 To provide this detail, many researchers utilize battery lifetime models parameterized using accelerated aging test data. While a wide variety of battery degradation models with varying levels of computational or math- ematical complexity exist, 5,6 ranging from simple linear “bucket” models, 7 empirical or “semi-empirical” non-linear models,8–10 or physics-based models (single particle 7,10 or pseudo-2D11), empiri- cally derived algebraic lifetime models, also referred to as reduced- order models, are used widely due to their relative accessibility, interpretability, and ease of implementation. Many systems level and technoeconomic analyses utilize reduced-order lifetime models, combining these degradation models with simulations of battery systems and ﬁnancial models to optimize the sizing of home energy storage systems,12 determine battery degradation costs with energy arbitrage,10,13,14 or optimizing mixed battery use, such as application stacking of stationary systems or use of electric vehicle batteries for vehicle-to-grid services. 15–17 Battery degradation models can also be used to extend system lifetime and increase revenue for any given application, by balancing the revenue/utilization of the energy storage system with the cost of the incurred degradation during that use. 7,14,18–20 Battery dispatch can be optimized either through the development of battery derating strategies derived from the battery lifetime model,19,20 or by directly optimizing the battery dispatch considering revenue, system costs, and degradation costs. Various optimization approaches exist, depending on the complexity of the model and compute resources. Linear degradation models or piecewise linear approximations of a non-linear degradation model may be implemented into a mixed- integer linear program, 21,22 which are computationally efﬁcient. Non-linear convex degradation models can be used within a model predictive control framework. 14 Non-linear or physics-based models may be used to optimize dispatch using an algorithmic or gradient- free approach.10,23,24 Accessibility of battery degradation models, and their use in applications such as those cited above, is improved by recent publication of open-access battery models, including physics-based models such as SLIDE25 and PyBAMM, 26 as well as technoeconomic modeling tools using the reduced-order battery lifetime models studied in this work, such as SimSES developed by Technical University of Munich,27 and the System Advisor Model developed by the National Renewable Energy Lab.28 One of the primary challenges for utilizing battery lifetime models is the relationship between accelerated aging data and real- world use. While battery lifetime in real-world use may be anywhere from 10 to 20 years, it is not reasonable to wait 20 years before making evaluations of system lifetime. Thus, accelerated aging experiments, where the rate of degradation is increased by operating batteries aggressively, are common for evaluating battery lifetime. These experiments usually require from 6 months to a few years of aging to reach battery end-of-life instead of 10–20 years. However, there are many factors to consider when when extrapolating models from accelerated aging data to real-world use: • Separating time- and cycling-dependent degradation, as ag- gressively cycled cells can reach 10 000 cycles in 2 years (∼14 cycles per day) 29 while real world cells may not reach 10 000 cycles for 20+ years30 • Aging mechanisms driven by cell age may not appear during accelerated aging, such as the onset of a “knee” in the capacity curve31,32 • Aging mechanisms driven by aggressive cycling or extreme temperatures may not appear during real-world use 33 • Experimental noise and life model inaccuracy may result in substantial predictive uncertainty when predicting battery state at 10–20 years34zE-mail: pauljgasper@gmail.com; paul.gasper@nrel.gov Journal of The Electrochemical Society, 2022 169 080518 • Accelerated aging is typically conducted at constant tempera- ture or using a repeating cycle,9,29,35,36 while real-world use and environment vary dynamically30 The complications above apply not only to cell performance metrics, such as capacity and internal resistance, but also to cell internal states, such as lithium inventory and electrode capacities, which may be diagnosed via incremental capacity analysis. 37 Thus, to extrapolate degradation trends observed during accelerated aging to real-world applications, four key considerations need to be made: (i) Visualization of degradation trends and connection to physical mechanisms, qualitatively deconvoluting stress-dependent trends (e.g., degradation rate vs. temperature) from chem- istry-/architecture-dependent parameters (ii) Identiﬁcation of modeling equations predicting degradation trends (iii) Optimization of model parameters and quantiﬁcation of model uncertainty, deconvoluting the contributions of various degra- dation mechanisms (iv) Extrapolation to dynamic aging and validation using lab-based or real-world data The most signiﬁcant challenge in the above approach is step (ii): the identiﬁcation of modeling equations. Degradation trends may be dependent on three or more experimental variables, making a trial- and-error search for an accurate model equation very difﬁcult. This work aims to summarize prior efforts to address this challenge, then demonstrate a methodology to identify accurate models by com- bining human-expert judgement with machine-learning methods, and ﬁnally describe how these models can be used to simulate real- world aging. Thus, the main contributions of this work are: • A review of cycling degradation models, which reveals a wide variety of equation forms and complexities, indicating the challenge researchers face when attempting to discover accurate models • Demonstration of a machine-learning assisted model identiﬁca- tion procedure on a stand-out data set of the degradation of LiFePO4 (LFP) - graphite (Gr) batteries 8,29 (accessible at 38,39), using bootstrap resampling and cross-validation to quantify the accuracy and un- certainty of human-expert 8,29 and machine-learning assisted models • Comprehensive description of the procedure for deriving dynamic state equations from the optimized degradation model, which is used for model validation on dynamic aging data as well as simulation of real-world aging in a stationary energy storage system using SimSES 40 Each of these contributions is detailed in sections throughout the paper. The degradation model described in this work is provided open-source via SimSES. 40 Literature Review of Cycling Degradation Models Approaches for separating degradation modes.—In contrast to calendar aging trajectories, which in Li-ion batteries is usually dominated by a single degradation mechanism, growth of the solid- electrolyte interface (SEI) layer on the graphite electrode, and a function of only one variable, time (assuming temperature and state- of-charge (SOC) are constant), degradation for cycling batteries often involves multiple degradation modes and requires considera- tion of both time and cumulative cycles (even assuming constant cycling protocol). There are many possible approaches for handling these challenges. To account for the overlapping inﬂuence of time- and cycle-dependent degradation, many studies consider overall degradation, D, as a superposition of the calendar- and cycling- induced degradation, DCalendar and DCycling: 8,29,32 =+ [ ]DD D 1Cycling Calendar These equations can then be separated into “calendar degradation”, which is dependent only on time, and “cycling degradation”, which is dependent on time, cycle count, or charge/energy throughput. Another possible approach is to multiply the time-dependent fade trajectory by calendar or cycling dependent stress parameters: ββ=· · ( ) [ ]Df t 2Cycling Calendar where βCycling and βCalendar are stress parameters dependent on cycling and calendar test conditions, respectively. The calendar degradation component, β ·( )ftCalendar can be ﬁrst optimized to calendar aging data, and then the cycling component optimized afterwards,9 or βCycling and βCalendar can be treated as a single stress parameter, optimized over both the calendar and cycling aging test data simultaneously. 41 Degradation modes can also be combined logically, as in Smith et al.: 9 =( ) [ ]DD Dmin , ,... 312 where the degradation states represented the lithium inventory, positive electrode capacity, and negative electrode capacity, con- necting the degradation modes to the battery physics. Finally, various degradation trends can simply be treated independently by breaking the aging data set into two or more independent groups, identifying separate aging models for each group. 36,42,43 For example, Sarasketa-Zabala et al. develop two equations to describe capacity loss, one for cells cycling between 10% and 50% depth of discharge (DOD), and one for cells cycling outside of that range. 43 Note that empirical degradation models do not necessarily need to account for the separate contributions of time- and cycle- dependent losses, however, models that do not account for both cannot extrapolate accurately to real-world uses that mix resting and cycling. Models with only time dependence assume that either calendar aging dominates all other aging effects,44 or that the degradation of the battery will not vary substantially with time, 45 i.e., either battery use is unchanging or the degradation rate is constant regardless of how the battery is utilized. Models with only cycle dependence are making a similar assumption, 46,47 implying that the cells are constantly cycling at a consistent rate, or that no degradation is expected if the battery is at rest. Time-/cycle-dependent egradation trajectory models.—Once de- gradation modes have been identiﬁed, each mode needs to be ﬁt with a trajectory model. A trajectory model is an equation that predicts the degradation of the cell as a function of a time-dependent variable, e.g., either time, cycle count, charge-throughput, or energy-throughput. Many trajectory equations for cycling degradation have been proposed, due to the wide variety of trends observed in cycle aging studies. Table I reports several examples from literature. By far the most common type of trajectory equation in this literature review is a power law function of cumulative charge-throughput, which can be expressed in units of Ah or as equivalent full cycles (EFCs), which is equal to the charge-throughput divided by twice the nominal battery capacity. The power law model is simple, with only two free parameters (the degradation rate β1 and the power, β2) while still being ﬂexible enough to ﬁt a wide variety of degradation trends, such as self-limiting, linear, or accelerating degrada- tion. Cumulative charge-throughput is a convenient input variable, as it can be easily measured in real-world systems, inherently incorporates the impact of the magnitude of the current on the degradation rate, and does not require a deﬁnition of the cycle count that is consistent between varied charge/discharge protocols or dynamic tests. While the rate coefﬁcient (β1) can be easily optimized to each test condition, the power (β2) is often assumed to be cell-independent, and thus shared across cells with varying degradation rates, making optimization of either parameter non-trivial; the power and degradation rate are co-dependent, so changing the value of the power will affect the value of the rate coefﬁcient and vice-versa. Many studies simply judge the curvature of the capacity fade trajectory by eye, assigning linear trajectories a power of 1 29,48–50 and sub-linear trajectories a power of 1/2, 29,36 or even provide no justiﬁcation. 43 Some works propose several possible values, selecting one based on ﬁt metrics. 61 Others optimize the Journal of The Electrochemical Society, 2022 169 080518 power separately for each test condition, and then assume the average value from the entire data set 45,53–55,51 or choose qualitatively. 41,56 Uddin et al., 17 after optimizing a power law model of charge-throughput with both the power and coefﬁcient ﬁt to each test condition, simply used linear interpolation by the test conditions to solve for values of the power and coefﬁcient at untested conditions. β2 can be directly optimized if an equation for β1 depending on the cell aging conditions is presupposed, 46,47,56 but the structure of the β1 equation will bias the optimal value for β2. Determining the optimal value of shared parameters without needing to propose equations for parameters that vary across the data set can be done rigorously using a bilevel optimization scheme; 34 this approach has been suggested, in other terms, as far back as 2009, 57 though they did not state explicitly how to implement the method. Degradation-rate models dependent on cycling stress.—Once a trajectory equation has been ﬁt to each test condition, some method to interpolate or extrapolate between various test conditions needs to be determined so that the degradation at new conditions can be predicted. Nearly all works accomplish this by deﬁning some function of the aging stressors that predicts the value of any model parameters, such as β1 above, that are dependent on cycling stress variables such as temperature, average SOC, or DOD: βγ=( ) [ ]f ,S 4n11: where γ1:n are any optimized parameters, and S are the test conditions for any given cell. While there are a wide variety of physical models proposed in the literature, well reviewed by Reniers et al., 25 most researches use an empirical approach to identify an expression for stress dependent parameters like β1. A large number of equations for calculating degradation rates as a function of cycling stress variables are reported in Table II. Many possible features have been proposed as inputs to predict degradation rate during cycling: environmental conditions like temperature, physical battery characteristics such as the gravimetric capacity (ρAh, Alhaider et al. 48), or features related to the battery dispatch. In the equations from Cordoba-Arenas et al., 51 the variable Ratio is equal to (+ )t ttCD CD CS , where tCD is the time spent under a charge- depleting drive cycle and tCS is the time spent under a charge- sustaining drive cycle at SOCmin. Thus, Ratio incorporates informa- tion about both the DOD and the time spent in different state-of- charge windows. The Ratio variable used by Stadler et al. 60 is similar but adds time spent during charging to both the numerator and denominator. These Ratio variables are information dense but they limit model applicability to cells conducting the speciﬁc type of mixed-use tested in those works.60,51 Occasionally, features are normalized by minimum or maximum values used during testing, for example, Cordoba-Arenas et al.51 use the minimum SOC, SOC0, and maximum charging rate, CChg,0. These basic features can then be used to create an inﬁnite variety of complex features using algebraic operations. Once potential features are deﬁned, there are a variety of techniques used to down select from many features to only critical features. Mathieu et al.41 used multivariate linear regression to down select from a variety of possible equation features generated by calculating square and interaction terms of the original features, selecting features using a cutoff on the normalized absolute coefﬁcient value. Stadler et al.60 identiﬁed a multivariate linear regression model using a stepwise backwards feature selection process to down select from 20 to 16 features. Uddin et al. 17 avoid the need to ﬁnd an single expression to predict degradation rate, instead linearly interpolating between test conditions in four dimen- sions (SOCmax, DOD, CChg, and CDis) to predict the degradation rate for untested conditions. The equation used by de Hoog et al. 63 and Hosen et al.64 is repeated in Tables I and II, as it additively combines Ah, a time-varying variable, and DOD, a time-invariant variable, to calculate overall degradation, blurring the distinction made here between a trajectory equation, which describes time-varying cell behaviors, and rate equations, which describe variance between cells as functions of the test conditions. There are a few key takeaways from this review. One is that there are some test conditions that impact degradation strongly across all models and data sets. The two most critical variables present in this review are DOD and temperature. The importance of these variables is intuitive; temperature has an impact both on the rate of unwanted side-reactions, e.g., SEI growth and electrolyte solvent decomposi- tion, as well as cycling-induced degradation like Li plating, while large DOD increases both the physical stress induced in electrodes that experience volume change during Li de/intercalation and chemical stresses by increasing the range of the potential window of the battery, which may drive a variety of degradation mechan- isms. The next most important variable for predicting the degrada- tion rate is Crate, which can imply the average rate or the dis/charge rates in particular. The magnitude of the current is especially Table I. Table of trajectory equation from literature for degradation due to cycling. y refers to some battery state, such as capacity or DC pulse resistance, β0:n refers to optimizable parameters, and X refers to an independent variable. Independent variables include Ah, the cumulative charge- throughput that can be expressed either in terms of cumulative Amp·hours or as EFCs; AhChg/AhDis, the cumulative charge-throughput during charge/discharge; depth-of-discharge DOD; time t; and cycle count N. The power of the trajectory equation (β2 for power-law and stretched- exponential equations, β3 for sigmoidal equation) is nearly always in the range of 0.5 to 1, while the values of other parameters vary substantially. Reference Description Equation Independent variable Various authors36,48–50,51 Linear y = 1 − β1 · XX=Ah, 48,50,51 X = AhDis, 49 X = AhChg36 Takei, 52 Smith 9 Linear y = β0 − β1 · XX = N Various authors32,36,44 Square root β=− ·y X1 1 X = Ah,32,36 X = AhChg,36 X = t 44 Various authors17,29,41,47,51,53–57,43,58,59 Power law β=− · βy X1 1 2 X = Ah, 17,29,47,53–57,51,58,43 X = t, 41 X = N 59 Stadler 60 Power law ββ=− · βy X01 2 X = Ah Baghdadi45 Stretched exponential ββ=· ( · )βy Xexp01 2 X = t Cuervo-Reyes 61 Stretched exponential ⎛ ⎝ ⎞ ⎠()β=· − β β y exp X 0 1 2 X = N Ecker 44 Logarithm β=− ·y X1log1 X = t Gering62 Sigmoidal ⎡ ⎣ ⎤ ⎦ β=− · · − β+( · )βy 12 X1 1 2 1 1exp 2 3 X = t Smith 9 Site loss ββ β=[ − · · · ]y X20 2 10 1 2 X = N de Hoog,63 Hosen 64 Polynomial ββ=− ∑ ·− ∑ · ==y XX1 i i i j j j 0 3 1, 1 0 3 2, 2 X1 = Ah, X2 = DOD Journal of The Electrochemical Society, 2022 169 080518TableII.Tableofcyclingdegradationrateequationsfromliterature.Equationsarepredictingdegradationratecoefﬁcients,suchasβ1intheequationβ=·βyx12,asafunctionofcyclingstressors,suchasDODorCrate,andenvironmentalstressorsliketemperature.Insomecases,suchasfor,9,51,58equationswerereportedforseveraldegradationratecoefﬁcients,usuallyforpredictingmultipledegradationstates.Therearetwoapproachesthatblurthedistinctionmadeinthisworkbetweentrajectoryequations,describedinTableI,anddegradationrateequations,describedhere.TheapproachbydeHoog63andHosen64usesDODasaninputtodirectlypredictlostcapacity.Stadler60completelyavoidpredictingatrajectory,insteadpredictingthelostcapacityatsomespeciﬁcamountofcharge-throughputdirectlyusingthecyclingstressorsasinput.ReferencesEquationAlhaider48γγρ(·+∣−∣·)·(·)DODSOCC0.5expAhrate12Baghdadi45()()γ+·γCexpexpTrate21Cordoba-Arenas51()γγγ[+·+·(−)]·γγγRatioSOCSOCexpT124min0356()γγγγγ[+·(−)+·(·(−))+·(−)]·γγSOCSOCCCSOCSOCexpexpChgChgT12min045,06min037deHoog,63Hosen64ββ=−∑·−∑·==QAhDOD1iiijjj031,032,Diao46γγ(·+)Texp12γ1·T+γ2Ebbesen,47Schimpe36()γ·γexpT12Mathieu41()γγγγγ++·+·+·++·γγexpSOCISOCTITT134572262Naumann29γγγγ(·+)·(·(−)+)CDOD0.6rate12334Petit58()γ·γγ+·∣∣expIT123Sarasketa-Zabala43γ1·DOD2+γ2·DOD+γ3γγγγ·(·)+·(·)DODDODexpexp1234Saxena53γγγ··(+·+·)SOCDODDOD11232Schimpe36()γγ·+·γCexpTChg132Schmalsteig32γγγγ+·(−)+·VDOD12324γ(·)γexpDOD23Smith91+γ1·DOD()γ··γγDODexpT123Stadler60QLoss@Ah=γ1+γ2·Ratio+γ3·T2+γ4·T+γγ·+·RatioSOC526max2+γγ·+·SOCSOC7min8min2+γγ·+··PSOCRatioChg9210max+γ11·Ratio·PChg+γγ··+·TSOCPChg12max13+γγ·+··SOCTRatio14max15+γγ··+··SOCSOCTPChg16maxmin17Suri54()γγ(·+)·γγ+·SOCexpCT12rate34Todeschini55γγγ+·+·()DODCexprate123Uddin17LinearinterpolationbySOCmax,DOD,CChg,andCDisbetweentestpointsWang201156()γ·γγ+·expCT1rate23Wang201450γγγγγ(·+·+)·((·+)·)TTTCexprate122345 Journal of The Electrochemical Society, 2022 169 080518 impactful in tests at low temperature, where high charging rates may lead to Li plating. Finally, some studies incorporate SOC variables into their degradation models. Perhaps one reason why SOC is not incorporated into more models is simply due to limited testing resources; creating a test matrix that varies temperature, DOD, dis/ charging rates, and SOC windows requires a prohibitive number of batteries, forcing researchers to prioritize which experimental variables to explore. A crucial takeaway from this review is that the range of possible input features, equation forms, and modeled variables used to predict cycling degradation is extremely wide, and there is little consistency between works. This is in contrast to a prior review of calendar degradation modeling, 34 which showed relatively uniformity in the features and equation forms, e.g., Arrhenius and Tafel type equations. Uniformity across works is somewhat expected, as degradation trajectories are often qualitatively similar between data sets, and most of the works cited here study Li-ion batteries from a narrow set of commercialized electrode and electrolyte chemistries. This qualitative similarity in the degradation trends between studies implies that most degradation is due to shared root causes, most commonly the growth of the SEI at the graphite electrode; but despite these shared trends, the features, equations, and model identiﬁcation procedures reviewed here are widely disparate. This variety of approaches makes it difﬁcult to compare modeling results, ﬁnd useful models for new data sets by searching prior works, or to replicate the model identiﬁcation procedure described in any given work. Thus, there is a clear need for identifying not only accurate equations, but also a replicable and repeatable model identiﬁcation procedure, using automated methods when possible to assist the search for accurate and robust empirical degradation models. Machine-Learning Assisted Model Identiﬁcation Approach In this work, model identiﬁcation is done using a bilevel optimiza- tion and symbolic regression approach. 34 First, separate degradation modes are identiﬁed using expert-judgement; use of expert-judgement is required, as not all degradation mechanisms are electrochemically visible, and the connection of speciﬁc degradation mechanisms to degradation modes is complicated by mechanical, chemical, and electrochemical interactions. 65 After splitting the data into regimes dominated by individual modes, each mode is ﬁt with the ML-assisted model identiﬁcation method. Model identiﬁcation has two key steps: deﬁning a trajectory equation using expert-judgement aided by bilevel optimization, and identiﬁcation of local parameter submodels using either intuition or symbolic regression. A graphical representation of this procedure can be seen in Fig. A·1 (Fig.1 of Ref. 34). In the ﬁrst step of identifying a model for a speciﬁc degradation mode, expert-judgement is used to select one or more potential trajectory equations for any given degradation mode, based on qualitative trends in the data or domain knowledge of the physical root cause. For instance, the calendar degradation mode, which is attributed to the SEI growth degradation mechanism, can be modeled well by a power law expression,66 while a self-limiting reaction can be modeled by a sigmoidal expression.62 Bilevel optimization is used to separately optimize the values of local (stress dependent) and global (cell independent) parameters. Global parameters are optimized in an upper level optimization loop, with multiple lower level optimization loops solving for the values of each local parameter for every data series. Each optimization loop is attempting to minimize the root mean square error between the model prediction and the data. Model ﬁtness is reported using the adjusted coefﬁcient of determination (Radj2) and the mean absolute error (MAE). In the second step of identifying a model for a speciﬁc degradation mode, local parameters are then modeled as functions of the aging conditions, such as constant temperature or constant average SOC. Sometimes, well performing equations for these local parameter submodels can be identiﬁed by introspection or with domain knowledge, 9,34 but often, deﬁning an equation that is robust is quite difﬁcult; robust meaning a model that is accurate when trained on all the available data, cross-validates with low error, has narrow conﬁdence intervals, and extrapolates to extreme conditions without diverging. Here, the ML method of symbolic regression is utilized to identify candidate submodels for local parameters. Symbolic regression is conducted by algorithmically generating a large library of possible equation features, and then utilizing a regularization algorithm to search for an optimal linear combination of a small subset of features. This procedure can also be used to ﬁnd multiplicative models by ﬁtting the log of the response variable. 34 Features for predicting locally ﬁt parameter values are generated using an algorithmic approach, which is decscribed in Table III. Possible equations, which are constructed by linearly or multiplicative combining these features, vary from simple, such as β1 = γ0 + γ1 · DOD,tomore complex, like βγ γ γ=· ( · )· ·( · )γexp C DOD Crate rate10 1 13 2 2 3. Because any subset of features could be a valid model, the search space of possible equations has combinatorial complexity. For example, an exhaustive search for the optimal equation using 6 features from a set of 1000 would require calculating the results of 1.4 · 10 15 equations. Searching for a parsimonious model in this large search space can be done using many regularization or feature selection algorithms. In a prior work,34 the LASSO regularization algorithm was used.67 However, it was found that this algorithm did not perform well when used on large feature libraries, approximately 10 2 features or greater, as large feature libraries create wide matrices that have more features (columns) than data points (rows). Here, the Sure-Independent Screening and Sparsifying Operator (SISSO) algorithm was used. SISSO has been demonstrated to perform better than LASSO in similar cases.68–70 SISSO also has several other advantages over Table III. Algorithm for generating feature libraries used during symbolic regression. At each step, features from the prior step are kept, so the total number of descriptors is cumulative. Note that the procedure differs slightly when generating features for linear (additive) or multiplicative equations. The example shown here uses temperature, SOC, and the anode-to-reference potential, Ua, as input features for generating features to model calendar aging behaviors. When generating features for cycle aging, only DOD and the average of the charge/discharge rate (Crate) are used, and step 3 is omitted to prevent division by 0 (DOD is set equal to 0 when evaluating calendar degradation), resulting in 48 features. Temperature is omitted when generating features for cycle aging because the aging test matrix does not have enough variance in the cycling temperature to identify any trends. Step Description Formula Example # descriptors 1 Input features XA(T), XB(SOC, Ua) T, SOC, Ua 3 2 Non-linearities X 1/4, X 1/3, X1/2, X 2, X 3, X 4 T 4, SOC1/3 21 3 Inverse (calendar only) X −1 1/T2,1/Ua 42 4 Multiplicative interactions *XX1 2 *TUa 3 1 4, SOC/T3 434 5a Exponential (linear eq. search) e X ( )exp Ua , ( )exp SOC T24 868 5b Natural log (multiplicative eq. search) log(X) log(T), ( )log T Ua 14 868 6 Remove any inﬁnities or NaNs 573 (linear), 553 (multiplicative) Journal of The Electrochemical Society, 2022 169 080518 LASSO. Rather than outputting a single model, SISSO outputs several candidate models of increasing complexity, which can then be manually screened to identify the best model. SISSO also is repeatable, outputting the same candidate models when re-run on the same inputs, which is not the case when using LASSO with wide input matrices. SISSO requires deﬁning two hyperparameters: the maximum number of non-zero coefﬁcients and the number of features selected per iteration (one iteration per non-zero coefﬁ- cient). For searching for calendar degradation submodels, the maximum number of non-zero coefﬁcients is set to 4, and the number of features per iteration is set to 40. Implementations of SISSO in Fortran, 71 MATLAB,72 and Python with integration to the sklearn API73 are available. Local parameter submodels are then substituted into the trajec- tory equation, deﬁning a global equation that predicts the behavior of all data series with a single expression. The global equation is then reoptimized on the entire data set, evenly weighting each data series so that the number of data points per series does not impact the optimal parameter values. This process is repeated each time a new degradation mode is added to the model, so that the values of all model parameters are optimized considering the cumulative effects of each degradation mode. Predictive uncertainty is estimated by training the model on a randomly resampled subset of the test groups using a bootstrap resampling approach,34 and also using a leave-one- out cross-validation approach. Finally, the model is reformulated into a state model, enabling simulation of battery aging under dynamic environmental conditions or varying use, the procedure for which is described later. Data The data used for this study is LFP/Gr cell aging data, previously published in Naumann et al.8,29 and available for download.38,39 Data was provided at request from the original authors, and includes some data not reported in the prior works. The cells studied were commercial Sony/Murata US26650FTC1 LFP/Gr cells in the 26 650 cylindrical format. The manufacturer speciﬁed nominal discharge capacity of these cells is 2.85 Ah, however, the nominal discharge capacity is considered to be 3 Ah due to prior characterization work on over 1000 cells.74 The aging studywas conductedbyaging cells in climate controlled chambers. Cell performance was monitored by routine perfor- mance checkups, conducted every week for the ﬁrst three weeks, every other week for the following six weeks, and every four weeks for the rest of the study, approximately 900 d. Performance checkups consist of capacity checks and pulse resistance measurements. Capacity is measured using two repeated con- stant-current constant-voltage (CCCV) charge and discharge cycles (1C CC, 3.6V CV on charge with a C/30 cutoff on charge, 2.0 V CV with a C/20 cutoff on discharge). DC pulse resistance is measured using 10 s charge and discharge pulses at 50% SOC and at 1/3C, 2/3C, and 1C rates, with 10 min of relaxation between each pulse. This work develops a model for the relative discharge capacity, which is deﬁned as the mean of the discharged capacity from the two full CCCV discharge cycles (Eq. 5), divided by the initial discharge capacity recorded for each cell. =( + ) [ ]QQ Q 1 2 5CCCV CCCVdischarge discharge,1 ,2 Table A·I reports the aging conditions of each test group. The aging matrix consists of 17 static calendar aging test groups (groups 1-17), 19 static cycle aging test groups (groups 18-36), 8 dynamic calendar aging test groups (groups 37-44), and 5 dynamic cycling aging test groups (groups 45-49), with three test replicates for most groups. Static calendar aging tests varied storage temperature from 0 °C to 60 °C and SOC from 0% to 100%. Static cycle aging tests cycled cells using CC charge and discharge steps at only 25 °C and 45 °C, but widely varied DOD between 1% and 100%, varied average SOC between 25% and 75% at 20% DOD, varied discharge and charging rates (Crate) between 0.2C and 2C, and cycled some cells using CCCV charging steps instead of CC charging steps. More detail is provided in the original works.8,29 For modeling purposes, the Crate is considered as the average of the charging and discharging rates, as a direct comparison of cells aging under asymmetric charging and discharge rates (groups 26, 27, 28, and 30) revealed no substantial difference in the capacity fade or resistance growth behavior. 29 Visualizing prominent capacity fade trends.—The development of the capacity fade model begins with identifying major trends in the data, correlating those trends with the aging conditions, and determining an appropriate order in which to model individual mechanisms, which may combine additively 29,36 or competitively.9 Key calendar degradation trends are shown in Fig. 1, and cycling degradation trends are shown in Fig. 2. The prominent trends observed during calendar aging are increasing degradation rate with respect to temperature (Fig. 1a) as well as with increasing SOC (Fig. 1b). The time-dependent calendar aging behavior appears sub- linear for most aging conditions, however, it can be seen in Fig. 1b that as the SOC approaches 0%, the degradation trajectory becomes almost linear. This behavior was also observed in a prior work.34 Figure 1. Capacity fade trends observed during calendar aging. (a) Impact of temperature variation at 50% SOC (groups 1, 2, 4, 10, 16). (b) Impact of SOC variation at 40 °C (groups 6-14). Journal of The Electrochemical Society, 2022 169 080518 Figure 2 shows the dominant trends in the cycling data. Figures 2a–2b both show the impact of the average Crate on the capacity fade, but with time on the x-axis in Fig. 2a and EFCs on the x-axis in Fig. 2b. While in Fig. 2a it seems clear that increasing Crate increases the degradation rate, this is not accounting for the impact that increased charge-throughput may have on cell capacity over time. But when plotted vs EFCs in Fig. 2b, the apparent trend reverses, and it becomes unclear if the increased degradation at high Crate is simply due to increased charge-throughput, or if there is an impact of Crate on the degradation per EFC as well. these effects can be potentially deconvoluted by ﬁrst subtracting the contribution of calendar fade, as described in Eq. 1; Naumann et al. identiﬁed a positive impact of Crate on the degradation per EFC using this approach.29 This simple example demonstrates why it is crucial to plot data vs both time and charge- or energy-throughput when considering the impact of Crate on cell health metrics. Figure 2c shows the impact of varying DOD on the capacity fade trajectory. The variation of DOD reveals that there are two additive degradation modes involved in the loss of discharge capacity during cycling: an initial sudden drop of capacity followed by a saturation period, i.e., break-in loss, and a nearly linear loss of capacity over the entire experiment, i.e., long- term loss. Break-in loss appears to always saturate within the ﬁrst 300 d and 4000 EFCs. The magnitude of the break-in loss is a non-monotonic function of DOD and SOC. As seen in Figs. 2c–2d, the maximum break-in loss is observed at approximately 20% DOD and 50% SOC, decreasing in magnitude as both SOC and DOD vary from these values. This break-in loss has been characterized in detail by prior work,75 and is attributed to a uneven distribution of lithium throughout that occurs when cycling at low DODs. While some of the break-in capacity loss is recoverable, by letting the lithium in the cell redistribute via relaxation or very slow cycling, the uneven utilization of the anode during low DOD cycling also results in unrecoverable capacity loss. This physical explanation also implies that cells cycled with varying DOD, or with suitably long rest periods between cycles, would likely not experience this loss mechanism, which has implica- tions for extrapolating the trends observed during the acceler- ated aging study to real-world use. In contrast to the break-in fade, the long-term capacity loss trends are relatively straightforward. The slope of the long-term capacity loss appears to be a monotonic function of DOD, with an increasing slope at increasing DODs. Figure 2dshows the impact of varying the average SOC on capacity fade. SOC seems to primarily impact the magnitude of the break-in loss, with a maximum break-in loss at 50% SOC, and has no obvious impacts on the slope of the long-term loss. Due to the complexity of these trends, prior work modeling the cycling degradation trends in this data set29 neglected to ﬁt the break-in loss. However, due to the additive nature of the break-in and long-term capacity loss modes, and the large contribution of the break-in loss to many of the cells, accurately modeling the dependence of the long-term loss rate on DOD without also modeling the break-in behavior is not possible. Figure 2. Capacity fade trends observed during cycling aging. (a), (b) Impact of Crate variation vs (a) time and (b) EFC (groups 23-25). (c) Impact of DOD variation (groups 22-23, 29, 31, 34). (d) Impact of SOC variation at 20% DOD (groups 31-33). Journal of The Electrochemical Society, 2022 169 080518 Model Identiﬁcation Using Static Aging Data In this section, the identiﬁcation of a capacity loss model using the bilevel optimization and symbolic regression approach and the test data from static aging tests (groups 1-36) is described in detail. Model identiﬁcation begins by ﬁtting the calendar degradation data (groups 1-17), and then this calendar degradation model is used to estimate the contribution of calendar degradation to the degradation observed during cycle aging (groups 8-36). As discussed in the previous section, capacity loss due to cycle aging is modeled using the additive combination of a break-in mode and a long-term degradation mode; the break-in mode is ﬁt ﬁrst, followed by ﬁtting of the long-term degradation mode. After identifying the cycling degradation equations, all model parameters, including the calendar fade model parameters, are reoptimized over all of the static aging data. Fitting calendar aging data.—Various different equation forms were considered for predicting the capacity loss due to calendar aging. 34 Comparing between square-root, linear, power-law, and sigmoidal equation forms, the sigmoidal equation results in the best overall model with regards to accuracy and uncertainty. This trajectory model is reported in Eq. 6: ⎡ ⎣ ⎢ ⎤ ⎦ ⎥ =− =· · − +(( · ) ) [] qq qq exp q t 1 2 1 2 1 1 6 Loss Cal Loss Cal q , ,1 2 3 where q1, q2, and q3 are free parameters, and t is the time in days. The parameters q1 and q3 are ﬁt locally to each cell, as both the extent of degradation and the curvature of the capacity fade trajectory differ across the various test conditions, while the parameter q2 is optimized globally with a resulting value of 1.31 · 10−4; ﬁtting q1 locally has a clear physical basis (the max- imum extent of the reaction), while model errors are lower when allowing q3 to be ﬁt locally rather than q2. Fitting all parameters locally results in chaotic trends for parameter values vs temperature and SOC, leading to a non-physical model. The result of this bilevel optimization is shown in Fig. 3. The model ﬁts the data precisely, and there are no obvious trends observable in the residual errors, indicating that the data is well ﬁt. Locally ﬁt values of q1 and q3 are then modeled using the symbolic regression procedure. Locally ﬁt values of q1 and q3 are shown as circles in Figs. 4a–4b. q1 varies primarily as an exponential function of temperature, with little dependence on SOC until the SOC reaches 0%. q3 seems to vary mostly as a function of SOC. Considering both parameters, the behavior at 0% SOC across all temperatures differs substantially from cells tested at other SOCs; this is because the capacity fade trajectory of cells at 0% SOC is much closer to linear than any of the other cells, leading to higher values of q3, which then impacts the optimal value of q1. The symbolic regression procedure is able to ﬁnd robust equations for predicting the values of q1 and q3 as functions of temperature and SOC. The equation found for q1 is reported below (Eq. 7), where q1,a−c are free parameters, T is the temperature in Kelvin, and Ua is the anode-to-reference potential, calculated according to the equa- tion deﬁned by Safari and Delacourt76 and parameterized for this speciﬁc cell in Schimpe et al. 36 Model predictions are plotted as X’s with 95% conﬁdence intervals as determined by bootstrap resam- pling in Fig. 4a. The only test condition poorly predicted by the identiﬁed model is at 0 °C and 50% SOC, however, both the measured and predicted values are very small, resulting a low predicted value for the capacity fade in Eq. 6, which matches the observed trends. ⎜⎟ ⎜ ⎟⎛ ⎝ ⎞ ⎠ ⎛ ⎝ ⎞ ⎠ =· · · · [ ]q q exp q U T q U T exp 7ab a c a 11, 1, 0.5 2 1, 0.5 where Ua is a function of SOC, described in equation A·1. Equation 7 is then simulated between 0 °C–60 °C and 0%–100% SOC, to evaluate model trends over a wide range of conditions. Model predictions at 0% SOC vary substantially from those at higher SOCs, which makes sense intuitively because the capacity fade trajectory of cells at 0% SOC is much different than those at larger SOCs. The equation found for q3 is reported below (Eq. 8), where q3,a−e are free parameters, with predictions plotted as X’s in Fig. 4b. The identiﬁed equation correctly captures all the trends of the locally ﬁt Figure 3. Calendar model local ﬁt on all calendar aging cells. Journal of The Electrochemical Society, 2022 169 080518 q3 values accurately. Simulation of the model shows that the model behaves sensibly across a large range of conditions. At 0% SOC and 5 °C, the value of q3 becomes larger than 1, which results in faster than linear degradation, however, the value of q1 is extremely small at this condition, so the predicted capacity fade (Eq. 6) will still conform to physical intuition. ⎜⎟ ⎜⎟ ⎛ ⎝ ⎞ ⎠ ⎛ ⎝ ⎞ ⎠ =· · ·( · · ) ·· ·( · · ) [ ] q q exp q U T exp q T U exp q U T exp q T U 8 ab a c a d a e a 33, 3, 13 4 3, 31 4 3, 13 3 3, 21 4 The overall calendar fade model is then deﬁned by substituting Eqs. 7 and 8 into Eq. 6. Fitting cycling aging data.—For ﬁtting the break-in and long- term cycling degradation modes, the data from static cycling cells was split into regions dominated by the break-in and long-term degradation behaviors. Splitting the data was done by deﬁning logical conditions with respect to EFCs and the second derivative of the relative discharge capacity with respect to time in days; derivatives were calculated by element-wise division of the differ- ence of capacity and the difference of time and then using the Matlab function smoothdata. The conditional statement for the break-in data mask is shown in Eq. 9, and the conditional statement for the long- term data mask is shown in Eq. 10. ⎜⎟⎛ ⎝ ⎞ ⎠ ∈< < > − == ( ) [ ] −q q EFC q E OR Test group 0 4000 & d dt 36 20, 36 9 Break in 2 2 ⎜⎟⎛ ⎝ ⎞ ⎠ ∈> < − [ ]−q q EFC q t E1000 & d d 2.5 7 10Long term 2 2 Modeling cycling break-in loss.—Because the capacity loss due to the break-in mechanism appears to saturate for all cases, a sigmoidal equation was used to account for it (Eq. 11). This mechanism was additively combined with the existing equation for the capacity loss due to calendar aging, optimizing the parameters q4, q5, and q6; q4 was optimized locally to each test group, while q5 and q6 were optimized globally to the entire data set. The result of optimizing Eq. 11 to the masked off break-in data is shown in Fig. 5. ⎡ ⎣ ⎢ ⎤ ⎦ ⎥ =− − =· · − +(( · ) ) [] qq q qq exp q EFC 1 2 1 2 1 1 11 Loss Cal Loss BreakIn Loss BreakIn q ,, ,4 5 6 As shown in Figs. 2c–2d, the magnitude of the break-in mechanism is both a function of DOD and average SOC. This variation is captured by the locally optimized values of q4, shown as circle markers in Fig. 6. The parameters q5 and q6 have optimal values of 3.04 · 10−3 and 1.43, respectively. Due to the lack of test cases varying SOC, there is not enough data available to use the symbolic regression approach to learn a robust equation that predicts the behavior of q4 vs both SOC and DOD. Qualitative analysis of the trends of q4 vs both DOD and average SOC led to the insight that a two-dimensional skewed normal distribution describes the overall trend, while also ensuring the boundary conditions match physical expectations by multiplying by a sigmoid; there should be no break- in if the DOD is equal to 0, or very near 0, and the experimental results show no break-in at 100% DOD either. So, the data was ﬁt with Eq. 12: ⎛ ⎝ ⎜ ⎡ ⎣ ⎢ ⎤ ⎦ ⎥⎞ ⎠ ⎟ ϕ ϕ =· ( ) ·( ) ·· − +( · ) [] μσ ξ μσ ξ qq SOC q q q DOD q q q exp q DOD ,, , ,, , 2 1 2 1 1 12 a skew SOC SOC SOC skew DOD DOD DOD b 4 4, 4,, 4, , 4,, 4, , 4, , 4, , 4, where SOC and DOD are inputs, q4,a, q4,b, q4,SOC,σ, q4,SOC,ξ, q4,DOD,σ, and q4,DOD,ξ are ﬁtting parameters, and q4,SOC,μ and q4,DOD,μ are set to 0.5 manually based on the qualitative trends observed in Figs. 2c–2d. φskew is deﬁned here as: ⎛ ⎝ ⎞ ⎠ ⎛ ⎝ ⎞ ⎠ ϕϕ μ σ ξ μ σ () = · − ·Φ · − []x xx 213skew where φ is the normal probability distribution function and Φ is the normal cumulative distribution function, both with mean μ and standard deviation σ, and a skew of ξ. Equation 12 ﬁts the data accurately, as seen in Fig. 6. The magnitude of the uncertainty at DOD less than 20% is quite large, which is sensible as q4 grows very quickly and there are only 3 available data points to train the model in this regime. Modeling long-term cycling loss.—After ﬁtting the break-in behavior, the long-term cycling fade behavior was ﬁt with a power law model (Eq. 14), where the degradation rate parameter, q7, was ﬁt Figure 4. (a) Parameter q1 values from local ﬁts (circles), ML model (Eq. 7) ﬁts with 95% conﬁdence intervals (X’s with error bars), and model predictions vs temperature at 0%, 25%, 50%, 75%, and 100% SOC. (b) Parameter q3 values from local ﬁts, ML model (Eq. 8) ﬁts with 95% conﬁdence intervals, and model predictions vs temperature at 0%, 25%, 50%, 75%, and 100% SOC. Journal of The Electrochemical Society, 2022 169 080518 locally to each test group, and the power, q8, was ﬁt to all of the data. =− − − =( · ) [ ] qq q q q q EFC 1 14 Loss Cal Loss BreakIn Loss LongTerm Loss LongTerm q ,, , ,7 8 The resulting ﬁts can be seen in Fig. 7. Because the calendar and break-in losses are already accounted for, the contribution of just the long-term fade is deconvoluted from the overall capacity loss, and the data is ﬁt well by a nearly linear model; the optimal value of q8 is 1.13. The residual errors of the ﬁt are small, with little apparent slope, excepting that from test group 30, which has very large cell- to-cell variance between the three cells in the test group due to the break-in loss. The locally ﬁt values of q7 are shown vs DOD and average Crate in Fig. 8. The overall trend is relatively simple: degradation rate increases monotonically with DOD, and the impact of Crate on q7 increases with increasing DOD, indicating an interaction between DOD and Crate. This data was ﬁt by Eq. 15, which was identiﬁed via ML. Model uncertainty is relatively low, except for the regime with high DOD and high Crate, which has only a single test group, resulting in high uncertainty. =+· + · ( · ) [ ]q q q DOD q exp DOD C 15ab c rate77, 7, 7, 2 3 Capacity Fade Model Results and Comparison to Prior Work After identiﬁcation of the capacity fade model using the ML- assisted identiﬁcation procedure, all parameters of the model are reoptimized to all of the static aging data simultaneously to deconvolute the relative contributions of each degradation mode (qLoss,Cal, qLoss,BreakIn, and qLoss,LongTerm) as accurately as possible. Resulting optimal parameter values are reported in Table IV. The model predictions on the entire data set are shown in Fig. 10. All major trends in the data are clearly accounted for, resulting in low model error: MAE for the calendar degradation data is only 0.4%, and 1.2% for the cycling degradation data. This model performance can be compared to that of the model deﬁned by Naumann et al. for this same data set. 8,29 The model in Naumann et al. incorporates a square-root of time calendar loss equation and a square-root of EFC cycling loss equation. The values of the model parameters identiﬁed by Naumann et al. were ﬁtusing an iterative procedure, as described in the original publications; 8,29 to make a like-for-like comparison, the parameters have been reoptimized on the same data as the ML-assisted model. The resulting predictions when optimizing the model described by Naumann et al. to the entire data set are shown in Fig. 9. While most of the calendar aging trends are predicted accurately, the degradation at 60 °C is ﬁt poorly across the entire range of SOCs due to the deviation of the aging trajectory from a square-root of time trend. Cycling degradation does not take into account the impact of break-in, and the square-root of EFC trend assumed by the model cannot accurately ﬁt the cycling fade for several cases, clearly seen by the systematic deviation of the residual errors in both positive and negative directions. A comparison of the model errors from the Naumann model with parameter values from prior work, 8,29 after reﬁtting all parameters to the entire data set, and from the ML-assisted model deﬁned here are reported in Table V. Note that the simple act of optimizing all of the Figure 5. Local ﬁtting of break-in cycling degradation behavior using Eq. 11. Figure 6. Parameter q4 values vs DOD and SOC from local ﬁts (circles), machine-learned model (Eq. 12) ﬁts with 95% conﬁdence intervals (X’s with error bars), and model predictions vs DOD at 25%, 50%, and 75% SOC; only valid ranges of DOD and SOC are shown (maximum DOD at an average SOC of 75% is 50%). Journal of The Electrochemical Society, 2022 169 080518 parameters in the Naumann model has resulted in approximately a 20% decrease of the model error. The ML-assisted model outperforms both the original and the reﬁt Naumann model, with about 50% of the MAE as the reﬁt Naumann model on all splits of the data. The uncertainty of the Naumann model and the ML-assisted model can also be compared using a cross-validation approach, where by each model is trained while leaving out one of the test groups, and a prediction made for this left out group, repeating across all groups. The ML-assisted model, overall, appears more robust than the reﬁt Naumann model, with lower MAECV. Uncertainty can be quantiﬁed more precisely utilizing a bootstrap resampling procedure. The predictive uncertainty for the ML-assisted and reﬁt Naumann capacity fade models are shown in Figs. 11a–11e and 11f–11j, respectively, for 5 test groups from the overall data set. Bootstrap resampling for the “reﬁtNaumann” model is done using a “sequential bootstrap” method, where for each bootstrap iteration the calendar fade model parameters are trained on a bootstrap resampled set of the calendar aging groups and the cycling fade model parameters trained on a bootstrap resampled set of the cycle aging groups, reﬂecting the model identiﬁcation procedure outlined in the original works. 8,29 The ML-assisted model ﬁts data trends more accurately for all cases. Conﬁdence intervals for the ML-assisted model are also narrower than that of the reﬁt Naumann model. Additionally, the variance of the uncertainty of the ML-assisted model is larger than that of the reﬁt Naumann model; uncertainty is extremely small for the calendar degradation data (test groups 13 and 22, Figs. 11a–11b), slightly larger for cycling degradation data at both low and high DODs (test groups 22 and 32, Figs. 11c, 11e), and very large for cycling degradation at high DOD and high Crate (test group 28, Fig. 11d). The variance of the uncertainty highlights which degradation regimes are difﬁcult to predict accurately based on the available training data, and is crucial for helping distinguish between high-conﬁdence and low- conﬁdence predictions, or for identifying potential new test cases that may be useful for improving the performance of the aging model. For example, uncertainty is large for cells in test group 28 because this is the onlycellathighDOD andhigh Crate, resulting in a linear degradation trajectory with a much steeper slope than any other test groups in the data set; this uncertainty can also be observed in the wide conﬁdence interval for the data point at 80% DOD and 1.5 average Crate in Fig. 8. In comparison, the uncertainties of the reﬁtNaumann model have low variance, with qualitatively similar trends across the entire data set, making it difﬁcult to gain insights into model behavior. Dynamic Aging Validation and Simulation of Real-World Use In order to simulate battery aging under varying load or environ- mental conditions, the identiﬁed aging model needs to be reformulated to be path independent, e.g. “memory-less”. 77 Path independent aging depends not on the amount of time or cycles that have elapsed since the beginning of battery life, but rather, on the current state and the future stress on the battery. For instance, consider the case of aging dominated by the loss of lithium inventory, which is primarily driven by SEI growth: the growth rate of the SEI at any point depends not on the amount of time passed since beginning of life, but rather on the current thickness of the SEI. This concept was ﬁrst proposed by Thomas and Bloom, 77 and was likely independently applied by Serrao et al. 57 at the same time. Dynamic state models, as they are referred to here, have been utilized in a wide variety of studies since. 8,29,35,36,41,44,58 Deriving dynamic state models.—There have been several past descriptions on deriving dynamic state models, using various terminologies or deﬁnitions.8,29,35,77,78 For any given degradation equation, the dynamic model for each state (degradation mode) can be derived using the following approach: (1) separate the overall model into several independent states, =( )yf x , each dependent on Figure 7. Local ﬁtting of long-term cycling degradation behavior. Figure 8. Parameter q7 values from local ﬁtting to the long-term cycling fade data (circles), ﬁts by an ML equation (Eq. 15) with 95% conﬁdence intervals (X’s with error bars), and model predictions vs DOD at 0.2, 0.5, 0.75, 1, and 1.5 Crate. Journal of The Electrochemical Society, 2022 169 080518 only one time-varying independent variable (e.g., calendar and cycle aging;8,29 lithium loss, positive electrode capacity, and negative electrode capacity9); (2) solve the derivative of the equation with respect to the time-varying independent variable: = () [] y x fx x d d d, S d 16 where x is the time-varying independent variable (e.g. time, charge- throughput, cycles, ...), and S is a vector of stressor values (temperature, average SOC, DOD, ...), which are assumed to be constant over the time step δx; (3) invert the equation to solve for x *, referred to as the virtual-time or virtual-EFC in Naumann et al. 8,29 and in the next section, given the values of S for the current time step and the prior value of the state variable, yt−1: * =( ) [ ]− −xf y ,S 17t 1 1 (4) substitute x in the derivative (Eq. 16) with x * to get the derivative for the current time step, dyt/dx, dependent not on x, but on the prior value of the state: * = () = (( ) ) [] − − y x fxx ff yx d d d, S d d, S , S d 18 t t 1 1 (5) solve for the degradation in the current time step, δyt,by multiplying Eq. 18 by δx: δδ= (( ) ) ·[ ] − −y ff yx x d, S , S d 19t t 1 1 or, as is done in SimSES and used in the following section, simply solve for δy by taking the difference between yt and yt−1: **δδ=( + ) −( ) [ ]yf x x f x,S ,S 20t This is equivalent to the above approach at small time steps but may be more accurate if the time step is large, and thus the linearization described above is not valid; (6) enforce any initial conditions or special considerations (see Smith et al., 35 Appendix A); (7) combine the dynamic models for each state additively (as in Refs. 8, 29) or logically (as in Ref. 9) to match the structure of overall degradation model. Derivations for a variety of degradation equations are reported by Santhanagopalan et al. 78 and Smith et al.35 Even after deriving the dynamic equation forms for each state in the model, there are a several considerations for extracting the values of stress variables (temperature, C-rate, SOC, ...) from the varying load. Note that only one variable in the degradation model can be treated as time-varying for any given state, therefore, the values of stressors such as temperature, SOC, DOD, or others must be treated as constant within any given time step. Thomas and Bloom 77 avoid this issue by solving an integral where both time and the values of the stressors are continuous variables (replacing the discrete calculation in Eq. 19), but this approach only works for variables that smoothly vary with time, such as temperature or SOC, and cannot account for variables such as DOD or cycle count, which do not smoothly vary and are difﬁcult to deﬁne for complex battery loads. One approach is to break up the SOC timeseries into discrete time steps by identifying turning points, using techniques such as the rainﬂow algorithm 9,35,78 or the rising sun envelope method; 79 DOD and cycle-count are then constant between each turning point. DOD can also be treated as a continuous variable using a time-superposition approach. 35,80 A simpler approach, not requiring turning point identiﬁcation, is to simply take the difference between the maximum and minimum SOC in a predeﬁned time step; however, this requires setting the simulation time step to some appropriate value that captures the dynamics of the battery use. A fast Fourier transform of the battery load can be used to help determine an appropriate time step for simulating the battery degradation, but there is still a risk of splitting a long duration charge or discharge into Table IV. Optimal parameter values for the ML-assisted model identiﬁed here. Parameter q1,a q1,b q1,c q2 q1,a q3,b Value 9.90E-01 −2.88E+06 8.74E+03 1.31E-04 3.33E-04 7.35E+11 Parameter q3,c q3,d q3,e q4,a q4,SOC,ξ q4,SOC,σ Value −2.82E-06 −3.28E+09 1.27E-03 5.82E-01 5.83E-02 2.09E-01 Parameter q4,DOD,ξ q4,DOD,σ q4,b q5 q6 q7,a Value −3.81E+00 1.16E+00 2.54E+01 3.04E-03 1.44E+00 −6.81E-06 Parameter q7,c q8 Value 2.12E-06 1.13E+00 Figure 9. Reﬁt Naumann capacity loss model. (a) Fit to calendar degradation data and (b) residual errors. (c) Fit to cycling degradation data and (d) residual errors. Axis limits are shared with Fig. 10 to assist comparison. Journal of The Electrochemical Society, 2022 169 080518 two different time steps, incurring some simulation error. SimSES, which is used in this work to simulate the lifetime of battery energy storage systems, avoids this issue by calculating degradation once per day, only calculating cycling degradation once at least a half-EFC of charge-throughput has occured. 27 Determining a “best-practice” ap- proach from all of these options would require a huge variety of long- term aging data under dynamic use. Each of the approaches described above has demonstrated satisfactory results on available validation data. Model validation on dynamic aging tests.—Comparisons of model predictions with 95% conﬁdence intervals on a variety of dynamic aging tests are shown in Fig. 12. Qualitatively, both the human expert and ML-assisted models perform well on the validation tests shown. The conﬁdence intervals for the ML-assisted model identiﬁed here are much narrower for both the calendar- and cycling-dependent degradation states. Prediction errors on the dynamic validation data from each model are reported in Table VI. Corroborating the results from the model identiﬁcation on the static testing data, the ML-assisted model identiﬁed here has the lowest average prediction erro. This improvement comes from substantially better accuracy on the dynamic cycling cells. For duty cycles with less aggressive cycling, such as the PV-HESS and PV-PCR-BESS load proﬁles shown in Figs. 12c–12d (Naumann reﬁt) and Figs. 12g–12h (ML-assisted), overall cycling degradation is relatively low for both models. Where cycling Table V. MAE and cross-validation MAE (MAECV) of models on the static aging data used for model identiﬁcation and optimization. The Naumann model uses the structure and the parameter values deﬁned in prior work,8,29 while the “Naumann (reﬁt)” model reoptimizes the model parameters to all of the available aging data, and the “ML-assisted” model is the degradation model identiﬁed in this work. Storage error is calculated over data from test groups 1–17. Cycling error is calculated over data from test groups 18–36. All data Storage Cycling Model description MAE MAECV MAE MAECV MAE MAECV Naumann 2.11% 1.01% 3.18% Naumann (reﬁt) 1.66% 1.91% 0.72% 0.99% 2.58% 2.82% ML-assisted 0.79% 0.83% 0.38% 0.47% 1.20% 1.43% Figure 11. Comparison of model ﬁts for groups 5 (a, f), 13 (b, g), 22 (c, h), 28 (d, i), and 32 (e, j) between the reﬁt Naumann model (a)–(e) and the ML-assisted model identiﬁed in this work (f)–(j). Dots correspond to experimental data, solid lines are best-ﬁt model predictions, and shaded regions denote 95% conﬁdence intervals from 1000 iterations of bootstrap resampling. Figure 10. ML-assisted capacity loss model predictions. (a) Fit to calendar degradation data and (b) residual errors. (c) Fit to cycling degradation data and (d) residual errors. Axis limits are shared with Fig. 9 to assist comparison. Journal of The Electrochemical Society, 2022 169 080518 degradation is incurred, the ML-assisted model predicts that it is dominated by the saturating break-in fade, which matches with the trends observed in the static aging data (Fig. 2c). There is an additional assumption required for extrapolating the break-in fade to less aggressive cycling conditions that are more likely to be observed in real-world use: based on the aging data, and the known physics causing the break-in effect, 75 break-in is treated as unrecoverable, however, it should only occur during periods of high use, where lithium in the cell would not have a chance to redistribute during rest. For this work, “high-use” is assumedtobeperiods when the battery is utilized at a rate of 2 EFCs/day or more. This is less strenuous than the accelerated aging tests, but more strenuous than most real-world use cases, and thus break-in fade should only be expected to occur during short periods of very high-use in real-world applications. The approach shown here assumes that aging is path indepen- dent, however, there is experimental evidence that lithium-ion Figure 12. Model validation on dynamic aging tests. For each model, the overall capacity loss (black solid line) is the sum of the loss due to each state (dotted and/or dashed colored lines). (a)–(d) Human expert model described in Naumann et al.,8,29 reﬁt to the exact data used for ML-assisted model identiﬁcation here. (e)–(h) ML-assisted model identiﬁed in this work. The dynamic calendar fade test (Group 44 in Table A·I) data and model predictions plotted in (a, e) are shown with colored regions denoting the aging temperature between capacity checks throughout the experiment. Figure 13. Distribution and mean values of the stress factors SOC, DOD and Crate as well as average EFCs per annum (EFC/a) for the three applications: Frequency Containment Reserve (FCR), Peak Shaving (PS), and Self Consumption Increase (SCI). Counts reported on y-axes are from 15 year simulations. Journal of The Electrochemical Society, 2022 169 080518 battery degradation may sometimes be path dependent, e.g., not only does the number of cycles matter, but also the order in which those cycles occur, or how many cycles are conducted consecu- tively before rest periods.81 Achieving accurate prediction of cell degradation in cases where path dependence is a clear factor is an open challenge for the battery degradation modeling community, but luckily, the assumption that degradation is path independent seems to hold true for many common real-world use cases, as is shown by the good performance of both the reﬁt Naumann model and ML model when validated against dynamic aging data presented here. Simulation of realistic stationary energy storage applications.— Battery lifetime models may be utilized to estimate the lifetime of real- world energy storage systems by incorporating them into systems-level simulation tools such as SimSES. SimSES is a time-series based open source tool that allows to perform holistic techno-economic simulations and analyses for battery energy storage systems. 27 Here, we consider Table VI. MAE of models on dynamic aging data used for validation. Storage error is calculated over data from test groups 37–44. Cycling error is calculated over data from test groups 45–49. Model description MAE (All data) MAE (Storage) MAE (Cycling) Naumann 1.18% 0.78% 1.28% Naumann (reﬁt) 0.84% 0.71% 0.88% ML-assisted 0.68% 1.29% 0.52% Figure 14. Schematic overview of how conﬁdence intervals for the incremental capacity losses are calculated in the adapted version of the environment SimSES for each time step. The adapted version of SimSES has been made available open-access.40 Journal of The Electrochemical Society, 2022 169 080518 three applications: a commercial frequency containment reserve application (FCR), a commercial peak-shaving application (PS), and a residential PV-battery system performing a self-consumption increase service (SCI). These three applications are described in detail in previous work. 30 Battery load for each application is calculated using an energy management system based on realistic input proﬁles for the selected application and system parameterization. For FCR, a grid frequency proﬁle serves as input, with the BESS discharging during underfrequency and charging during overfrequency. In PS, the BESS discharges when the used industrial load proﬁle exceeds a predeﬁned peak shaving limit and charges again afterwards. For SCI, a household load and PV generation proﬁle serve as inputs. The BESS charges when PV power exceeds the household load and discharges when the household load exceeds PV power. Histograms of the SOC, DOD, and Crate stress factors throughout ﬁfteen years of simulation are shown in Fig. 13. Each of the application cycles shows signiﬁcantly different battery use: the FCR application operates around 50% SOC at low DOD with Crate up to 0.5, the PS application spends a large amount of time at high SOC, even resting at 100% SOC for long periods, with an average DOD of approximately 40% but with low power demands (low Crate), and the SCI application has the battery regularly being fully discharged, with little amount of time spent resting at high SOC, regular operation at high DOD, and relatively high Crate. As the EFCs are less than 2 per day in all applications, the break-in loss model is not considered in this analysis. Furthermore, the BESS is assumed to be in a temperature controlled environment, kept at a constant temperature of 25 °C, to ensure comparability between applications. In this work, uncertainty from the battery-level degradation is incorporated to estimate uncertainty at the system-level by resolving the degradation model using not only the best-ﬁt parameter values for any given model, but also the bootstrapped parameter values. The process for calculating the capacity loss at each simulation time step with uncertainty in SimSES is shown in Fig. 14. For each model, there is a vector of the best-ﬁt parameter values and 1: M vectors from M bootstrap resampling iterations. Incorporating degradation uncertainty into the system level simulation is challenging because the capacity loss in a given time step inﬂuences the requested power for the following time steps, i.e., the dispatch of the battery is dependent on its current health. For example, a home storage system that is degrading faster will see less charge-throughput over the same time frame, as it ﬁlls up quicker with surplus photovoltaic (PV) power at daytime and empties faster during nighttime. Estimating the impact of degradation uncertainty thus requires simulating the entire system lifetime for every set of M bootstrapped degradation parameters, resulting in M system lifetime predictions. This is how conﬁdence intervals are calculated for Figs. 11 and 12, but with 1000 sets of bootstrapped parameters used in this work, it is far too computationally expensive to run on a single workstation. To avoid this issue, the simulation can instead be run at a speciﬁed degrada- tion percentile. This is conducted by calculating the incremental change of each battery state (Eq. 20, for calendar loss and cycling loss) for each bootstrapped parameter sets at each time step. The 1000 values for the incremental change of each state are then sorted and the desired percentile output at each time step. The entire system lifetime then only needs to be calculated once for each desired percentile, as well as for the best ﬁt scenario. The results from simulations of the FCR, PS, and SCI energy storage system applications for both the ML-assisted and reﬁt Naumann degradation models are shown in Fig. 15. Immediately clear is that the uncertainty of the model identiﬁed in Naumann et al.8,29 is much larger than the uncertainty of the ML-assisted model identiﬁed here, which reﬂects the results shown from the model identiﬁcation (Fig. 11) and validation (Fig. 12) steps reported prior. This improved model conﬁdence gives much narrower estimates for the system lifetime: taking the lower-bound of the 99% conﬁdence interval as a prediction for the ’worst-case’ lifetime of the energy storage system, the ML-assisted model predicts that the discharge capacity will remain >80% for at least 15 years in all of the aging scenarios, while the reﬁt model from Naumann et al. gives a minimum lifetime estimate of 9 years for the FCR application, 7 years for the PS application, and 10 years for the SCI application. Overall, the expected lifetime (best-ﬁt line) does not vary hugely between the two models, with both models estimating 15 years or more of battery lifetime for all applications; this agreement is because calendar degradation dominates all applications, and in terms of the absolute error, the models differ more when predicting substantial cycling degradation than when predicting calendar degradation. An application with more aggressive battery use would likely result in a larger disagreement between the two models than the results shown here. Conclusions Battery degradation models play a key role in the planning, development, and control of battery energy storage systems. Most Figure 15. Relative discharge capacity for various realistic use-cases of battery energy storage systems over 15 years predicted by the degradation models identiﬁed by Naumann et al. 8,29 (a)–(c) and the degradation model identiﬁed in this work using ML (d)–(f). The green line in plots (a)–(c) uses the parameter values originally reported by Naumann et al. 8,29 Journal of The Electrochemical Society, 2022 169 080518 often, they take the form of empirically-derived algebraic models due to the simplicity of identifying model equations, optimizing model parameters, and implementing the model into battery performance models, technoeconomic simulations of energy storage systems, or real- time controllers. But despite their prevalence, identifying accurate models remains a trial-and-error process, with a huge variety of approaches in the literature, making it difﬁcult to replicate work or identify best practices. Thus, in this work, a general framework for developing battery lifetime models is described: (i) Visualization of degradation trends and connection to physical mechanisms, qualitatively deconvoluting stress-dependent trends from behaviors shared across the data set (ii) Identiﬁcation of modeling equations describing degradation trends (iii) Optimization of model parameters and quantiﬁcation of model uncertainty, deconvoluting the contributions of various degra- dation mechanisms (iv) Extrapolation to dynamic aging and validation using lab-based or real-world data This approach is demonstrated using a ML-assisted model identiﬁ- cation procedure that searches through millions of potential equa- tions to ﬁnd potential candidates for the human-expert to analyze. On a stand-out LFP/Gr aging data set, the ML-assisted model is shown to be about twice as accurate as a human-expert model, and this is validated on dynamic aging test data. The improved accuracy of the ML-assisted model also results in smaller conﬁdence intervals for the majority of model predictions, indicating that the ML-assisted model is more likely to provide accurate estimates for capacity loss when extrapolating to untested conditions. The impact of degradation model uncertainty on lifetime estimates for energy storage systems is then evaluated using the technoeconomic simulation software SimSES. It is found that uncertainty may substantially impact system lifetime predictions for any model. This demonstrates the importance of incorporating battery lifetime uncertainty into system models, as well as the importance of identifying models that are as accurate as possible given the available experimental data. Acknowledgments This work was supported by the Assistant Secretary for Energy Efﬁciency and Renewable Energy, Ofﬁce of Vehicle Technologies of the U.S. Department of Energy through the Machine Learning for Accelerated Life Prediction & Cell Design program, tech- nology manager Dr. Simon Thompson. The National Renewable Energy Laboratory is operated by Alliance for Sustainable Energy under Contract No. DE-AC36-08GO28308 for the U.S. Department of Energy. The views expressed in the article do not necessarily represent the views of the DOE or the U.S. Government. The U.S. Government retains and the publisher, by accepting the article for publication, acknowledges that the U.S. Government retains a nonexclusive, paid-up, irrevocable, world- wide license to publish or reproduce the published form of this work, or allow others to do so, for U.S. Government purposes. Furthermore, the authors would like to thank the Bavarian Research Foundation for their ﬁnancial support via the project SmartB4P, reference number AZ-1376-19. Appendix Ua is calculated from the state-of-charge (SOC) using the following formula, which was deﬁned in Schimpe et al. 36 for this cell using curve ﬁtting of the negative electrode half-cell data and comparison of the half-cell potentials to the full-cell open-circuit potential. ⎛ ⎝ ⎞ ⎠ ⎛ ⎝ ⎞ ⎠ ⎛ ⎝ ⎞ ⎠ ⎛ ⎝ ⎞ ⎠ () = + (− · ) +− − − − − + − − [· ] Ux x x x x x 0.6379 0.5416 exp 305.5309 0.044 tanh 0.1958 0.1088 0.1978 tanh 1.0571 0.0854 0.6875 tanh 0.0117 0.0529 0.0175 tanh 0.5692 0.0875 A1 aa a a a a a where xa, the anode stoichiometry, is calculated using: Table A·I. Test matrix for static and dynamic aging tests used for model training and validation, respectively. Except for group 21, all static cycling cells are aging using CC cycling protocols. For dynamic tests, conditions were changed following each performance checkup. Values of SOC, DOD, CCharge, and CDischarge for the PV-HESS and PV-PCR-BESS dynamic tests are daily averages. Group Type Condition T (°C) SOC (%) DOD (%) CCharge (hr−1) CDischarge (hr −1) # of Cells 1 Static Storage 0 50 n/a n/a n/a 3 2 Static Storage 10 50 3 3 Static Storage 25 0 3 4 Static Storage 25 50 3 5 Static Storage 25 100 3 6 Static Storage 40 0 3 7 Static Storage 40 12.5 3 8 Static Storage 40 25 3 9 Static Storage 40 37.5 3 10 Static Storage 40 50 3 11 Static Storage 40 62.5 3 12 Static Storage 40 75 3 13 Static Storage 40 87.5 3 14 Static Storage 40 100 3 15 Static Storage 60 0 3 16 Static Storage 60 50 3 17 Static Storage 60 100 3 18 Static Cycling 25 50 100 1 1 3 19 Static Cycling 25 50 80 1 1 3 20 Static Cycling 25 50 20 1 1 3 21 Static Cycling CCCV 40 50 100 1 1 3 22 Static Cycling 40 50 100 1 1 3 Journal of The Electrochemical Society, 2022 169 080518 Table A·I. (Continued). Group Type Condition T (°C) SOC (%) DOD (%) CCharge (hr−1) CDischarge (hr −1) # of Cells 23 Static Cycling 40 50 80 1 1 3 24 Static Cycling 40 50 80 0.5 0.5 3 25 Static Cycling 40 50 80 0.2 0.2 3 26 Static Cycling 40 50 80 0.5 1 3 27 Static Cycling 40 50 80 1 0.5 3 28 Static Cycling 40 50 80 1 2 3 29 Static Cycling 40 50 40 1 1 3 30 Static Cycling 40 50 40 1 2 3 31 Static Cycling 40 50 20 1 1 3 32 Static Cycling 40 75 20 1 1 3 33 Static Cycling 40 25 20 1 1 3 34 Static Cycling 40 50 10 1 1 3 35 Static Cycling 40 50 5 1 1 3 36 Static Cycling 40 50 1 1 1 3 37 Dynamic Storage 25/40 100 n/a n/a n/a 2 38 Dynamic Storage 25/60 100 2 39 Dynamic Storage 40/60 100 2 40 Dynamic Storage 0/60 100 2 41 Dynamic Storage 60 0/50 2 42 Dynamic Storage 60 0/100 2 43 Dynamic Storage 60 50/100 2 44 Dynamic Storage 25/40/60 100 1 45 Dynamic Cycling/ Storage 40 50 80 1 1 3 46 Dynamic Storage/ Cycling 40 50 80 1 1 3 47 Dynamic Cycling 40 50 20/80 1 1 3 48 Dynamic PV-HESS 40 51.4 74.6 0.243 0.172 3 49 Dynamic PV-PCR-BESS 40 51.2 25.1 0.073 0.057 3 Journal of The Electrochemical Society, 2022 169 080518 () = + ·( − ) [ · ]x SOC SOC0.0085 0.78 0.0085 A 2a ORCID Paul Gasper https://orcid.org/0000-0001-8834-9458 Andreas Jossen https://orcid.org/0000-0003-0964-1405 Kandler Smith https://orcid.org/0000-0001-7011-0377 References 1. M. Woody, M. Arbabzadeh, G. M. Lewis, G. A. Keoleian, and A. Stefanopoulou, Journal of Energy Storage, 28, 101231 (2020). 2. E. Minear, M. Simpson, and D. Long, Electric Power Research Institute, 3002020048 (2020). 3. K. Mongird, V. Viswanathan, J. Alam, C. Vartanian, V. Sprenkle, and R. Baxter, U. S. Department of Energy, DOE/PA–0204 (2020). 4. D. Hill and M. Mills-Price, DNV GL Energy, 160620 (2019). 5. X. Hu, L. Xu, X. Lin, and M. Pecht, Joule, 4, 310 (2020). 6. M. S. Hosen, J. Jaguemont, J. Van Mierlo, and M. Berecibar, iScience, 24, 102060 (2021). 7. J. M. Reniers, G. Mulder, and D. A. Howey, Journal of Power Sources, 487, 229355 (2021). 8. M. Naumann, M. Schimpe, P. Keil, H. C. Hesse, and A. Jossen, Journal of Energy Storage, 17, 153 (2018). 9. K. Smith, A. Saxon, M. Keyser, B. Lundstrom, Z. Cao, and A. Roc, Proceedings of the American Control Conference, p. 4062 (2017). 10. A. Gailani, M. Al-Greer, M. Short, T. Crosbie, and N. Dawood, Energies, 13, 2816 (2020). 11. V. Sulzer, P. Mohtat, S. Pannala, J. B. Siegel, and A. G. Stefanopoulou, J. Electrochem. Soc., 168, 120531 (2021). 12. M. Förstl, D. Azuatalam, A. Chapman, G. Verbič, A. Jossen, and H. Hesse, International Journal of Energy Research, 44, 718 (2020). 13. A. Gailani, M. Al-Greer, M. Short, and T. Crosbie, Electronics (Switzerland), 9,90 (2020). 14. J. Liu, C. Hu, and Z. Wang, IEEE Transportation Electriﬁcation Conference & Expo, p. 863 (2020), https://doi.org/10.1109/itec48692.2020.9161750. 15. S. Englberger, S. Englberger, A. Jossen, and H. Hesse, Cell Reports Physical Science, 1, 100238 (2020). 16. S. Englberger, K. A. Gamra, B. Tepe, M. Schreiber, A. Jossen, and H. Hesse, Applied Energy, 304, 117862 (2021). 17. K. Uddin, T. Jackson, W. D. Widanage, G. Chouchelamane, P. A. Jennings, and J. Marco, Energy, 133, 710 (2017). 18. V. Kumtepeli, H. C. Hesse, M. Schimpe, A. Tripathi, Y. Wang, and A. Jossen, IEEE Access, 8, 204325 (2020). Figure A·1. Machine-learning assisted model identiﬁcation procedure used here to identify model for each degradation mode. In this work, as Step 2, SISSO is used rather than LASSO. Models for each degradation mode are then combined via superposition. Originally published in Ref. 34. Journal of The Electrochemical Society, 2022 169 080518 19. M. Schimpe, J. V. Barreras, B. Wu, and G. J. Offer, J. Electrochem. Soc., 168, 060506 (2021). 20. J. Sowe, S. P. M. Few, M. Schimpe, B. Wu, C. Candelise, J. Nelson, and V. Barreras, ECS PRiME, MA2020-02, 3780 (2020). 21. B. Xu, J. Zhao, T. Zheng, E. Litvinov, and D. S. Kirschen, IEEE Transactions on Power Systems, 33, 2248 (2017). 22. B. Xu, A. Oudalov, A. Ulbig, G. Andersson, and D. S. Kirschen, IEEE Transactions on Smart Grid, 9, 1131 (2018). 23. B. T. Mirletz and D. L. Guittet, “Heuristic dispatch based on price signals for behind-the-meter pv-battery systems in the system advisor model.” 2021 IEEE 48th Photovoltaic Specialists Conference (PVSC) (IEEE, Piscataway, NJ) 1393 (2021), https://www.osti.gov/biblio/1798078. 24. S. Wang, D. Guo, X. Han, L. Lu, K. Sun, W. Li, D. U. Sauer, and M. Ouyang, Energy, 207, 118228 (2020). 25. J. M. Reniers, G. Mulder, and D. A. Howey, J. Electrochem. Soc., 166, A3189 (2019). 26. V. Sulzer, S. G. Marquis, R. Timms, M. Robinson, and S. J. Chapman, Journal of Open Research Software, 9, 14 (2021). 27. M. Möller, D. Kucevic, N. Collath, A. Parlikar, P. Dotzauer, B. Tepe, S. Englberger, A. Jossen, and H. Hesse, Journal of Energy Storage, 49, 103743 (2022). 28. 2021 System advisor model version 2021.12.02 (sam 2021.12.02), https://sam.nrel.gov. 29. M. Naumann, F. Spingler, and A. Jossen, Journal of Power Sources, 451, 227666 (2020). 30. D. Kucevic, B. Tepe, S. Englberger, A. Parlikar, M. Mühlbauer, O. Bohlen, A. Jossen, and H. Hesse, Journal of Energy Storage, 28, 101077 (2020). 31. V. Sulzer et al., Joule, 5, 1934 (2021). 32. J. Schmalstieg, S. Käbitz, M. Ecker, and D. U. Sauer, Journal of Power Sources, 257, 325 (2014). 33. J. Vetter, P. Novák, M. R. Wagner, C. Veit, K. C. Möller, J. Besenhard, M. Winter, M. Wohlfahrt-Mehrens, C. Vogler, and A. Hammouche, Journal of power sources, 147, 269 (2005). 34. P. Gasper, K. Gering, E. Dufek, and K. Smith, J. Electrochem. Soc., 168, 020502 (2021). 35. K. Smith, P. Gasper, A. M. Colclasure, Y. Shimonishi, and S. Yoshida, J. Electrochem. Soc., 168, 100530 (2021). 36. M. Schimpe, M. E. von Kuepach, M. Naumann, H. C. Hesse, K. Smith, and A. Jossen, J. Electrochem. Soc., 165, A181 (2018). 37. D. Anseán, M. Dubarry, A. Devie, B. Liaw, V. García, J. Viera, and M. González, Journal of Power Sources, 356, 36 (2017). 38. M. Naumann, Mendeley Data, V1 (2021), https://doi.org/10.17632/6hgyr25h8d.1. 39. M. Naumann, Mendeley Data, V1 (2021), https://doi.org/10.17632/kxh42bfgtj.1. 40. mediaTUM, (2021), Techno-economic analysis results of bess use-cases con- sidering battery degradation model conﬁdence intervals 10.14459/2021mp1633017. 41. R. Mathieu, I. Baghdadi, O. Briat, P. Gyan, and J. M. Vinassa, Energy, 141, 2108 (2017). 42. L. Tang, G. Rizzoni, and S. Onori, IEEE Transactions on Transportation Electriﬁcation, 1, 211 (2015). 43. E. Sarasketa-Zabala, I. Gandiaga, E. Martinez-Laserna, L. M. Rodriguez-Martinez, and I. Villarreal, Journal of Power Sources, 275, 573 (2015). 44. M. Ecker, J. B. Gerschler, J. Vogel, S. Käbitz, F. Hust, P. Dechent, and D. U. Sauer, Journal of Power Sources, 215, 248 (2012). 45. I. Baghdadi, O. Briat, J. Y. Delétage, P. Gyan, and J. M. Vinassa, Journal of Power Sources, 325, 273 (2016). 46. W. Diao, S. Saxena, and M. Pecht, Journal of Power Sources, 435, 226830 (2019). 47. S. Ebbesen, P. Elbert, and L. Guzzella, IEEE Transactions on Vehicular Technology, 61, 2893 (2012). 48. F. Alhaider, T. Klein, and S. Gerhard, NEIS 2018—Conference on Sustainable Energy Supply and Energy Storage Systems, p. 156 (2018), https://ieeexplore.ieee. org/document/8669467. 49. B. Bole, C. S. Kulkarni, and M. Daigle, PHM 2014—Proceedings of the Annual Conference of the Prognostics and Health Management Society 2014, p. 502 (2014). 50. J. Wang, J. Purewal, P. Liu, J. Hicks-Garner, S. Soukazian, E. Sherman, A. Sorenson, L. Vu, H. Tataria, and M. W. Verbrugge, Journal of Power Sources, 269, 937 (2014). 51. A. Cordoba-Arenas, S. Onori, Y. Guezennec, and G. Rizzoni, Journal of Power Sources, 278, 473 (2015). 52. K. Takei, K. Kumai, Y. Kobayashi, H. Miyashiro, N. Terada, T. Iwahori, and T. Tanaka, Journal of Power Sources, 97, 697 (2001). 53. S. Saxena, C. Hendricks, and M. Pecht, Journal of Power Sources, 327, 394 (2016). 54. G. Suri and S. Onori, Energy, 96, 644 (2016). 55. F. Todeschini, S. Onori, and G. Rizzoni, IFAC Proceedings Volumes, 45, 456 (2012). 56. J. Wang, P. Liu, J. Hicks-garner, E. Sherman, S. Soukiazian, M. Verbrugge, H. Tataria, J. Musser, and P. Finamore, Journal of Power Sources, 196, 3942 (2011). 57. L. Serrao, S. Onori, G. Rizzoni, and Y. Guezennec, IFAC Proceedings Volumes, 42, 923 (2009). 58. M. Petit, E. Prada, and V. Sauvant-Moynot, Applied Energy, 172, 398 (2016). 59. E. Sarasketa-Zabala, E. Martinez-Laserna, M. Berecibar, I. Gandiaga, L. M. Rodriguez-Martinez, and I. Villarreal, Applied Energy, 162, 839 (2016). 60. J. Stadler, C. Krupp, M. Ecker, J. Bandlow, B. Spier, and A. Latz, (2021), https:// doi.org/10.1016/j.jpowsour.2021.230952. 61. E. Cuervo-Reyes and R. Flückiger, J. Electrochem. Soc., 166, A1463 (2019). 62. K. L. Gering, Electrochimica Acta, 228, 636 (2017). 63. J. de Hoog, J. M. Timmermans, D. Ioan-Stroe, M. Swierczynski, J. Jaguemont, S. Goutam, N. Omar, J. Van Mierlo, and P. Van Den Bossche, Applied Energy, 200, 47 (2017). 64. M. S. Hosen, D. Karimi, T. Kalogiannis, A. Pirooz, J. Jaguemont, M. Berecibar, and J. Van Mierlo, Journal of Energy Storage, 28, 101265 (2020). 65. P. M. Attia, A. Bills, and F. B. Planella, J. Electrochem. Soc., 169, 060517 (2022). 66. P. M. Attia, W. C. Chueh, and S. J. Harris, J. Electrochem. Soc., 167, 090535 (2020). 67. S. L. Kukreja, J. Löfberg, and M. J. Brenner, IFAC Proceedings Volumes, 39, 814 (2006). 68. L. M. Ghiringhelli, J. Vybiral, S. V. Levchenko, C. Draxl, and M. Schefﬂer, Phys. Rev. Lett., 114, 1 (2015), (Preprint 1411.7437). 69. L. M. Ghiringhelli, J. Vybiral, E. Ahmetcik, R. Ouyang, S. V. Levchenko, C. Draxl, and M. Schefﬂer, New J. Phys., 19, 023017 (2017). 70. R. Ouyang, S. Curtarolo, E. Ahmetcik, M. Schefﬂer, and L. M. Ghiringhelli, Phys. Rev. Mater., 2, 1 (2018), (Preprint 1710.03319). 71. R. Ouyang, (2021), SISSO https://github.com/rouyang2017/SISSO. 72. P. Gasper, (2021), SISSORegressor_MATLAB https://github.com/NREL/ SISSORegressor_MATLAB. 73. D. Waroquiers, (2021), Matgenix pysisso https://github.com/Matgenix/pysisso. 74. K. Rumpf, M. Naumann, and A. Jossen, Journal of Energy Storage, 14, 224 (2017). 75. F. B. Spingler, M. Naumann, and A. Jossen, J. Electrochem. Soc., 167, 040526 (2020). 76. M. Safari and C. Delacourt, J. Electrochem. Soc., 158, A1123 (2011). 77. E. V. Thomas, I. Bloom, J. P. Christophersen, and V. S. Battaglia, Journal of Power Sources, 184, 312 (2008). 78. S.Santhanagopalan,K.Smith,J.Neubauer, G. H. Kim, M. Keyser,and A. Pesaran, Design and analysis of large lithium-ion battery systems (Artech House, Boston) (2015). 79. R. Monteiro, I. Miyazato, and K. Takahashi, The Journal of Physical Chemistry A, 124, 1754 (2020). 80. H. Cinco-Ley and V. F. Samaniego(OnePetro), SPE Annual Technical Conference and Exhibition, p. SPE-19817-MS (1989). 81. T. Raj, A. A. Wang, C. W. Monroe, and D. A. Howey, Batteries & Supercaps, 3, 1377 (2020). Journal of The Electrochemical Society, 2022 169 080518","libVersion":"0.3.1","langs":""}